

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>postgresql_privs – Grant or revoke privileges on PostgreSQL database objects &mdash; Ansible Documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/modules/postgresql_privs_module.html"/>
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'2.9',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  false,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansible.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansible.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> <!---- extra head elements for Ansible beyond RTD Sphinx Theme --->
<script type="text/javascript" src="//www.redhat.com/dtm.js"></script>
<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="2.9">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->

<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script> 
</head>

<body class="wy-body-for-nav">
   <!---- extra body elements for Ansible beyond RTD Sphinx Theme --->
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

  <div class="DocSite-globalNav ansibleNav">
      <ul>
          <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
          <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
          <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
          <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
          <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
      </ul>
  </div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/logo_invert.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">
    Documentation
  </div>
</a> 
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Ansible
          

          
          </a>

          
            
            
              <div class="version">
                2.9
              </div>
            
          

          <!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <select class="version-list" id="version-list" onchange="javascript:location.href = this.value;">
        <script> x = document.getElementById("version-list"); </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "latest";
            if ( "latest" == "2.9" ) {
              option.selected = true;
            }
            if (current_url.search("2.9") > -1) {
              option.value = current_url.replace("2.9","latest");
            } else {
              option.value = current_url.replace("latest","latest");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.9_ja";
            if ( "2.9_ja" == "2.9" ) {
              option.selected = true;
            }
            if (current_url.search("2.9") > -1) {
              option.value = current_url.replace("2.9","2.9_ja");
            } else {
              option.value = current_url.replace("latest","2.9_ja");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.8";
            if ( "2.8" == "2.9" ) {
              option.selected = true;
            }
            if (current_url.search("2.9") > -1) {
              option.value = current_url.replace("2.9","2.8");
            } else {
              option.value = current_url.replace("latest","2.8");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "2.7";
            if ( "2.7" == "2.9" ) {
              option.selected = true;
            }
            if (current_url.search("2.9") > -1) {
              option.value = current_url.replace("2.9","2.7");
            } else {
              option.value = current_url.replace("latest","2.7");
            }
            x.add(option);
          </script>
        
          <script>
            current_url = window.location.href;
            option = document.createElement("option");
            option.text = "devel";
            if ( "devel" == "2.9" ) {
              option.selected = true;
            }
            if (current_url.search("2.9") > -1) {
              option.value = current_url.replace("2.9","devel");
            } else {
              option.value = current_url.replace("latest","devel");
            }
            x.add(option);
          </script>
        
      </select>
    </div>
  
</div>
          

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Ansible Community Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Extending Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/cloud_guides.html">Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Ansible for Network Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/index.html">Ansible for Network Automation</a></li>
</ul>
<p class="caption"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules_by_category.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/release_and_maintenance.html">Release and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/tower.html">Red Hat Ansible Tower</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/index.html">Ansible Roadmap</a></li>
</ul>

            
          
        </div>
        
         <!-- extra nav elements for Ansible beyond RTD Sphinx Theme --->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>
      </div>
    </nav>
  </div>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>postgresql_privs – Grant or revoke privileges on PostgreSQL database objects</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- Ansible-specific additions for modules etc -->
                
                  <a href="https://github.com/ansible/ansible/edit/devel/lib/ansible/modules/database/postgresql/postgresql_privs.py?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
                
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <!--- Based on sphinx versionwarning extension. Extension currently only works on READTHEDOCS -->
  <script>
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">');
      para = document.createElement('p');
      banner_text=document.createTextNode("This is a testing site. For the official docs go to https://docs.ansible.com/");
      para.appendChild(banner_text);
      element = document.getElementById('testing_banner_id');
      element.appendChild(para);
      document.write('</div>');
    }

    // Create a banner if we're not the latest version
    current_url = window.location.href;
    if ((current_url.search("latest") > -1) || (current_url.search("/2.9/") > -1)) {
     // no banner for latest release
    } else if (current_url.search("devel") > -1) {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading the *devel* version of the Ansible documentation - most module documentation is currently missing as the modules have moved to collections. Until docs catches up to this change, use the version selection to the left if you want module documentation or the latest stable release version. The *devel* version is not guaranteed stable.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    } else {
      document.write('<div id="banner_id" class="admonition caution">');
      para = document.createElement('p');
      banner_text=document.createTextNode("You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the latest stable released version.");
      para.appendChild(banner_text);
      element = document.getElementById('banner_id');
      element.appendChild(para);
      document.write('</div>');
    }
  </script>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="postgresql-privs-grant-or-revoke-privileges-on-postgresql-database-objects">
<span id="postgresql-privs-module"></span><h1>postgresql_privs – Grant or revoke privileges on PostgreSQL database objects<a class="headerlink" href="#postgresql-privs-grant-or-revoke-privileges-on-postgresql-database-objects" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li>
<li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li>
<li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li>
<li><a class="reference internal" href="#notes" id="id4">Notes</a></li>
<li><a class="reference internal" href="#see-also" id="id5">See Also</a></li>
<li><a class="reference internal" href="#examples" id="id6">Examples</a></li>
<li><a class="reference internal" href="#return-values" id="id7">Return Values</a></li>
<li><a class="reference internal" href="#status" id="id8">Status</a></li>
</ul>
</div>
<div class="section" id="synopsis">
<h2><a class="toc-backref" href="#id1">Synopsis</a><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Grant or revoke privileges on PostgreSQL database objects.</li>
<li>This module is basically a wrapper around most of the functionality of PostgreSQL’s GRANT and REVOKE statements with detection of changes (GRANT/REVOKE <em>privs</em> ON <em>type</em> <em>objs</em> TO/FROM <em>roles</em>).</li>
</ul>
</div>
<div class="section" id="requirements">
<h2><a class="toc-backref" href="#id2">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The below requirements are needed on the host that executes this module.</p>
<ul class="simple">
<li>psycopg2</li>
</ul>
</div>
<div class="section" id="parameters">
<h2><a class="toc-backref" href="#id3">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<table  border=0 cellpadding=0 class="documentation-table">
    <tr>
        <th colspan="1">Parameter</th>
        <th>Choices/<font color="blue">Defaults</font></th>
                    <th width="100%">Comments</th>
    </tr>
                <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-ca_cert"></div>
                <b>ca_cert</b>
                <a class="ansibleOptionLink" href="#parameter-ca_cert" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Specifies the name of a file containing SSL certificate authority (CA) certificate(s).</div>
                                        <div>If the file exists, the server&#x27;s certificate will be verified to be signed by one of these authorities.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: ssl_rootcert</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-database"></div>
                <b>database</b>
                <a class="ansibleOptionLink" href="#parameter-database" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                             / <span style="color: red">required</span>                    </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Name of database to connect to.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: db, login_db</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-fail_on_role"></div>
                <b>fail_on_role</b>
                <a class="ansibleOptionLink" href="#parameter-fail_on_role" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">boolean</span>
                                                                </div>
                <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.8</div>                </td>
                            <td>
                                                                                                                                                                                                                <ul style="margin: 0; padding: 0"><b>Choices:</b>
                                                                                                                                                            <li>no</li>
                                                                                                                                                                                            <li><div style="color: blue"><b>yes</b>&nbsp;&larr;</div></li>
                                                                                </ul>
                                                                        </td>
                                                            <td>
                                        <div>If <code>yes</code>, fail when target role (for whom privs need to be granted) does not exist. Otherwise just warn and continue.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-grant_option"></div>
                <b>grant_option</b>
                <a class="ansibleOptionLink" href="#parameter-grant_option" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">boolean</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                                    <ul style="margin: 0; padding: 0"><b>Choices:</b>
                                                                                                                                                            <li>no</li>
                                                                                                                                                                                            <li>yes</li>
                                                                                </ul>
                                                                        </td>
                                                            <td>
                                        <div>Whether <code>role</code> may grant/revoke the specified privileges/group memberships to others.</div>
                                        <div>Set to <code>no</code> to revoke GRANT OPTION, leave unspecified to make no changes.</div>
                                        <div><em>grant_option</em> only has an effect if <em>state</em> is <code>present</code>.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: admin_option</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-host"></div>
                <b>host</b>
                <a class="ansibleOptionLink" href="#parameter-host" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Database host address. If unspecified, connect via Unix socket.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: login_host</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-login"></div>
                <b>login</b>
                <a class="ansibleOptionLink" href="#parameter-login" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                                <b>Default:</b><br/><div style="color: blue">"postgres"</div>
                                </td>
                                                            <td>
                                        <div>The username to authenticate with.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: login_user</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-login_host"></div>
                <b>login_host</b>
                <a class="ansibleOptionLink" href="#parameter-login_host" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Host running the database.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-login_password"></div>
                <b>login_password</b>
                <a class="ansibleOptionLink" href="#parameter-login_password" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>The password used to authenticate with.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-login_unix_socket"></div>
                <b>login_unix_socket</b>
                <a class="ansibleOptionLink" href="#parameter-login_unix_socket" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Path to a Unix domain socket for local connections.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-login_user"></div>
                <b>login_user</b>
                <a class="ansibleOptionLink" href="#parameter-login_user" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                                <b>Default:</b><br/><div style="color: blue">"postgres"</div>
                                </td>
                                                            <td>
                                        <div>The username used to authenticate with.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-objs"></div>
                <b>objs</b>
                <a class="ansibleOptionLink" href="#parameter-objs" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Comma separated list of database objects to set privileges on.</div>
                                        <div>If <em>type</em> is <code>table</code>, <code>partition table</code>, <code>sequence</code> or <code>function</code>, the special value<code>ALL_IN_SCHEMA</code> can be provided instead to specify all database objects of type <em>type</em> in the schema specified via <em>schema</em>. (This also works with PostgreSQL &lt; 9.0.) (<code>ALL_IN_SCHEMA</code> is available for <code>function</code> and <code>partition table</code> from version 2.8)</div>
                                        <div>If <em>type</em> is <code>database</code>, this parameter can be omitted, in which case privileges are set for the database specified via <em>database</em>.</div>
                                        <div>If <em>type</em> is <em>function</em>, colons (&quot;:&quot;) in object names will be replaced with commas (needed to specify function signatures, see examples)</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: obj</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-password"></div>
                <b>password</b>
                <a class="ansibleOptionLink" href="#parameter-password" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>The password to authenticate with.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: login_password</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-port"></div>
                <b>port</b>
                <a class="ansibleOptionLink" href="#parameter-port" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">integer</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                                <b>Default:</b><br/><div style="color: blue">5432</div>
                                </td>
                                                            <td>
                                        <div>Database port to connect to.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: login_port</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-privs"></div>
                <b>privs</b>
                <a class="ansibleOptionLink" href="#parameter-privs" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Comma separated list of privileges to grant/revoke.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: priv</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-roles"></div>
                <b>roles</b>
                <a class="ansibleOptionLink" href="#parameter-roles" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                             / <span style="color: red">required</span>                    </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Comma separated list of role (user/group) names to set permissions for.</div>
                                        <div>The special value <code>PUBLIC</code> can be provided instead to set permissions for the implicitly defined PUBLIC group.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: role</div>
                                </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-schema"></div>
                <b>schema</b>
                <a class="ansibleOptionLink" href="#parameter-schema" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Schema that contains the database objects specified via <em>objs</em>.</div>
                                        <div>May only be provided if <em>type</em> is <code>table</code>, <code>sequence</code>, <code>function</code> or <code>default_privs</code>. Defaults to  <code>public</code> in these cases.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-session_role"></div>
                <b>session_role</b>
                <a class="ansibleOptionLink" href="#parameter-session_role" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.8</div>                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Switch to session_role after connecting.</div>
                                        <div>The specified session_role must be a role that the current login_user is a member of.</div>
                                        <div>Permissions checking for SQL commands is carried out as though the session_role were the one that had logged in originally.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-ssl_mode"></div>
                <b>ssl_mode</b>
                <a class="ansibleOptionLink" href="#parameter-ssl_mode" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                        <ul style="margin: 0; padding: 0"><b>Choices:</b>
                                                                                                                                                            <li>allow</li>
                                                                                                                                                                                            <li>disable</li>
                                                                                                                                                                                            <li><div style="color: blue"><b>prefer</b>&nbsp;&larr;</div></li>
                                                                                                                                                                                            <li>require</li>
                                                                                                                                                                                            <li>verify-ca</li>
                                                                                                                                                                                            <li>verify-full</li>
                                                                                </ul>
                                                                        </td>
                                                            <td>
                                        <div>Determines whether or with what priority a secure SSL TCP/IP connection will be negotiated with the server.</div>
                                        <div>See https://www.postgresql.org/docs/current/static/libpq-ssl.html for more information on the modes.</div>
                                        <div>Default of <code>prefer</code> matches libpq default.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-state"></div>
                <b>state</b>
                <a class="ansibleOptionLink" href="#parameter-state" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                        <ul style="margin: 0; padding: 0"><b>Choices:</b>
                                                                                                                                                            <li>absent</li>
                                                                                                                                                                                            <li><div style="color: blue"><b>present</b>&nbsp;&larr;</div></li>
                                                                                </ul>
                                                                        </td>
                                                            <td>
                                        <div>If <code>present</code>, the specified privileges are granted, if <code>absent</code> they are revoked.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-target_roles"></div>
                <b>target_roles</b>
                <a class="ansibleOptionLink" href="#parameter-target_roles" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.8</div>                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>A list of existing role (user/group) names to set as the default permissions for database objects subsequently created by them.</div>
                                        <div>Parameter <em>target_roles</em> is only available with <code>type=default_privs</code>.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-type"></div>
                <b>type</b>
                <a class="ansibleOptionLink" href="#parameter-type" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                        <ul style="margin: 0; padding: 0"><b>Choices:</b>
                                                                                                                                                            <li>database</li>
                                                                                                                                                                                            <li>default_privs</li>
                                                                                                                                                                                            <li>foreign_data_wrapper</li>
                                                                                                                                                                                            <li>foreign_server</li>
                                                                                                                                                                                            <li>function</li>
                                                                                                                                                                                            <li>group</li>
                                                                                                                                                                                            <li>language</li>
                                                                                                                                                                                            <li><div style="color: blue"><b>table</b>&nbsp;&larr;</div></li>
                                                                                                                                                                                            <li>tablespace</li>
                                                                                                                                                                                            <li>schema</li>
                                                                                                                                                                                            <li>sequence</li>
                                                                                </ul>
                                                                        </td>
                                                            <td>
                                        <div>Type of database object to set privileges on.</div>
                                        <div>The `default_privs` choice is available starting at version 2.7.</div>
                                        <div>The &#x27;foreign_data_wrapper&#x27; and &#x27;foreign_server&#x27; object types are available from Ansible version &#x27;2.8&#x27;.</div>
                                                    </td>
        </tr>
                            <tr>
                                                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="parameter-unix_socket"></div>
                <b>unix_socket</b>
                <a class="ansibleOptionLink" href="#parameter-unix_socket" title="Permalink to this option"></a>
                <div style="font-size: small">
                    <span style="color: purple">string</span>
                                                                </div>
                                </td>
                            <td>
                                                                                                                                                        </td>
                                                            <td>
                                        <div>Path to a Unix domain socket for local connections.</div>
                                                            <div style="font-size: small; color: darkgreen"><br/>aliases: login_unix_socket</div>
                                </td>
        </tr>
                    </table>
<br/></div>
<div class="section" id="notes">
<h2><a class="toc-backref" href="#id4">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Parameters that accept comma separated lists (<em>privs</em>, <em>objs</em>, <em>roles</em>) have singular alias names (<em>priv</em>, <em>obj</em>, <em>role</em>).</li>
<li>To revoke only <code class="docutils literal notranslate"><span class="pre">GRANT</span> <span class="pre">OPTION</span></code> for a specific object, set <em>state</em> to <code class="docutils literal notranslate"><span class="pre">present</span></code> and <em>grant_option</em> to <code class="docutils literal notranslate"><span class="pre">no</span></code> (see examples).</li>
<li>Note that when revoking privileges from a role R, this role  may still have access via privileges granted to any role R is a member of including <code class="docutils literal notranslate"><span class="pre">PUBLIC</span></code>.</li>
<li>Note that when revoking privileges from a role R, you do so as the user specified via <em>login</em>. If R has been granted the same privileges by another user also, R can still access database objects via these privileges.</li>
<li>When revoking privileges, <code class="docutils literal notranslate"><span class="pre">RESTRICT</span></code> is assumed (see PostgreSQL docs).</li>
<li>The default authentication assumes that you are either logging in as or sudo’ing to the <code class="docutils literal notranslate"><span class="pre">postgres</span></code> account on the host.</li>
<li>To avoid “Peer authentication failed for user postgres” error, use postgres user as a <em>become_user</em>.</li>
<li>This module uses psycopg2, a Python PostgreSQL database adapter. You must ensure that psycopg2 is installed on the host before using this module.</li>
<li>If the remote host is the PostgreSQL server (which is the default case), then PostgreSQL must also be installed on the remote host.</li>
<li>For Ubuntu-based systems, install the postgresql, libpq-dev, and python-psycopg2 packages on the remote host before using this module.</li>
<li>The ca_cert parameter requires at least Postgres version 8.4 and <em>psycopg2</em> version 2.4.3.</li>
</ul>
</div>
</div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id5">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="postgresql_user_module.html#postgresql-user-module"><span class="std std-ref">postgresql_user – Add or remove a user (role) from a PostgreSQL server instance</span></a></dt>
<dd>The official documentation on the <strong>postgresql_user</strong> module.</dd>
<dt><a class="reference internal" href="postgresql_owner_module.html#postgresql-owner-module"><span class="std std-ref">postgresql_owner – Change an owner of PostgreSQL database object</span></a></dt>
<dd>The official documentation on the <strong>postgresql_owner</strong> module.</dd>
<dt><a class="reference internal" href="postgresql_membership_module.html#postgresql-membership-module"><span class="std std-ref">postgresql_membership – Add or remove PostgreSQL roles from groups</span></a></dt>
<dd>The official documentation on the <strong>postgresql_membership</strong> module.</dd>
<dt><a class="reference external" href="https://www.postgresql.org/docs/current/ddl-priv.html">PostgreSQL privileges</a></dt>
<dd>General information about PostgreSQL privileges.</dd>
<dt><a class="reference external" href="https://www.postgresql.org/docs/current/sql-grant.html">PostgreSQL GRANT command reference</a></dt>
<dd>Complete reference of the PostgreSQL GRANT command documentation.</dd>
<dt><a class="reference external" href="https://www.postgresql.org/docs/current/sql-revoke.html">PostgreSQL REVOKE command reference</a></dt>
<dd>Complete reference of the PostgreSQL REVOKE command documentation.</dd>
</dl>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id6">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="c1"># On database &quot;library&quot;:</span>
<span class="c1"># GRANT SELECT, INSERT, UPDATE ON TABLE public.books, public.authors</span>
<span class="c1"># TO librarian, reader WITH GRANT OPTION</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Grant privs to librarian and reader on database library</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">present</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">SELECT,INSERT,UPDATE</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">table</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">books,authors</span>
    <span class="nt">schema</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">public</span>
    <span class="nt">roles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian,reader</span>
    <span class="nt">grant_option</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Same as above leveraging default values</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">SELECT,INSERT,UPDATE</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">books,authors</span>
    <span class="nt">roles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian,reader</span>
    <span class="nt">grant_option</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="c1"># REVOKE GRANT OPTION FOR INSERT ON TABLE books FROM reader</span>
<span class="c1"># Note that role &quot;reader&quot; will be *granted* INSERT privilege itself if this</span>
<span class="c1"># isn&#39;t already the case (since state: present).</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Revoke privs from reader</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">present</span>
    <span class="nt">priv</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">INSERT</span>
    <span class="nt">obj</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">books</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reader</span>
    <span class="nt">grant_option</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">no</span>

<span class="c1"># &quot;public&quot; is the default schema. This also works for PostgreSQL 8.x.</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">REVOKE INSERT, UPDATE ON ALL TABLES IN SCHEMA public FROM reader</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">absent</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">INSERT,UPDATE</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL_IN_SCHEMA</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reader</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GRANT ALL PRIVILEGES ON SCHEMA public, math TO librarian</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">schema</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">public,math</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian</span>

<span class="c1"># Note the separation of arguments with colons.</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GRANT ALL PRIVILEGES ON FUNCTION math.add(int, int) TO librarian, reader</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">function</span>
    <span class="nt">obj</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">add(int:int)</span>
    <span class="nt">schema</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">math</span>
    <span class="nt">roles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian,reader</span>

<span class="c1"># Note that group role memberships apply cluster-wide and therefore are not</span>
<span class="c1"># restricted to database &quot;library&quot; here.</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GRANT librarian, reader TO alice, bob WITH ADMIN OPTION</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">group</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian,reader</span>
    <span class="nt">roles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">alice,bob</span>
    <span class="nt">admin_option</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="c1"># Note that here &quot;db: postgres&quot; specifies the database to connect to, not the</span>
<span class="c1"># database to grant privileges on (which is specified via the &quot;objs&quot; param)</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GRANT ALL PRIVILEGES ON DATABASE library TO librarian</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgres</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database</span>
    <span class="nt">obj</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian</span>

<span class="c1"># If objs is omitted for type &quot;database&quot;, it defaults to the database</span>
<span class="c1"># to which the connection is established</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GRANT ALL PRIVILEGES ON DATABASE library TO librarian</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">database</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian</span>

<span class="c1"># Available since version 2.7</span>
<span class="c1"># Objs must be set, ALL_DEFAULT to TABLES/SEQUENCES/TYPES/FUNCTIONS</span>
<span class="c1"># ALL_DEFAULT works only with privs=ALL</span>
<span class="c1"># For specific</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALTER DEFAULT PRIVILEGES ON DATABASE library TO librarian</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL_DEFAULT</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default_privs</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian</span>
    <span class="nt">grant_option</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>

<span class="c1"># Available since version 2.7</span>
<span class="c1"># Objs must be set, ALL_DEFAULT to TABLES/SEQUENCES/TYPES/FUNCTIONS</span>
<span class="c1"># ALL_DEFAULT works only with privs=ALL</span>
<span class="c1"># For specific</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALTER DEFAULT PRIVILEGES ON DATABASE library TO reader, step 1</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">TABLES,SEQUENCES</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">SELECT</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default_privs</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reader</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALTER DEFAULT PRIVILEGES ON DATABASE library TO reader, step 2</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">TYPES</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">USAGE</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default_privs</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reader</span>

<span class="c1"># Available since version 2.8</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GRANT ALL PRIVILEGES ON FOREIGN DATA WRAPPER fdw TO reader</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">fdw</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foreign_data_wrapper</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reader</span>

<span class="c1"># Available since version 2.8</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GRANT ALL PRIVILEGES ON FOREIGN SERVER fdw_server TO reader</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">fdw_server</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foreign_server</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reader</span>

<span class="c1"># Available since version 2.8</span>
<span class="c1"># Grant &#39;execute&#39; permissions on all functions in schema &#39;common&#39; to role &#39;caller&#39;</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA common TO caller</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">function</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">present</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">EXECUTE</span>
    <span class="nt">roles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">caller</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALL_IN_SCHEMA</span>
    <span class="nt">schema</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">common</span>

<span class="c1"># Available since version 2.8</span>
<span class="c1"># ALTER DEFAULT PRIVILEGES FOR ROLE librarian IN SCHEMA library GRANT SELECT ON TABLES TO reader</span>
<span class="c1"># GRANT SELECT privileges for new TABLES objects created by librarian as</span>
<span class="c1"># default to the role reader.</span>
<span class="c1"># For specific</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALTER privs</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">schema</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">TABLES</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">SELECT</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default_privs</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reader</span>
    <span class="nt">target_roles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian</span>

<span class="c1"># Available since version 2.8</span>
<span class="c1"># ALTER DEFAULT PRIVILEGES FOR ROLE librarian IN SCHEMA library REVOKE SELECT ON TABLES FROM reader</span>
<span class="c1"># REVOKE SELECT privileges for new TABLES objects created by librarian as</span>
<span class="c1"># default from the role reader.</span>
<span class="c1"># For specific</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ALTER privs</span>
  <span class="nt">postgresql_privs</span><span class="p">:</span>
    <span class="nt">db</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">absent</span>
    <span class="nt">schema</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">library</span>
    <span class="nt">objs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">TABLES</span>
    <span class="nt">privs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">SELECT</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default_privs</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reader</span>
    <span class="nt">target_roles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">librarian</span>
</pre></div>
</div>
</div>
<div class="section" id="return-values">
<h2><a class="toc-backref" href="#id7">Return Values</a><a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h2>
<p>Common return values are documented <a class="reference internal" href="../reference_appendices/common_return_values.html#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p>
<table border=0 cellpadding=0 class="documentation-table">
    <tr>
        <th colspan="1">Key</th>
        <th>Returned</th>
        <th width="100%">Description</th>
    </tr>
                <tr>
                            <td colspan="1">
                <div class="ansibleOptionAnchor" id="return-queries"></div>
                <b>queries</b>
                <a class="ansibleOptionLink" href="#return-queries" title="Permalink to this return value"></a>
                <div style="font-size: small">
                  <span style="color: purple">list</span>
                                      </div>
                <div style="font-style: italic; font-size: small; color: darkgreen">added in 2.8</div>                </td>
            <td>always</td>
            <td>
                                        <div>List of executed queries.</div>
                                    <br/>
                                        <div style="font-size: smaller"><b>Sample:</b></div>
                                            <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">[&#x27;REVOKE GRANT OPTION FOR INSERT ON TABLE &quot;books&quot; FROM &quot;reader&quot;;&#x27;]</div>
                                </td>
        </tr>
                    </table>
<br/><br/></div>
<div class="section" id="status">
<h2><a class="toc-backref" href="#id8">Status</a><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>This module is guaranteed to have backward compatible interface changes going forward. <em>[stableinterface]</em></li>
<li>This module is <a class="reference internal" href="../user_guide/modules_support.html#modules-support"><span class="std std-ref">maintained by the Ansible Community</span></a>. <em>[community]</em></li>
</ul>
<div class="section" id="authors">
<h3>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bernhard Weitzhofer (&#64;b6d)</li>
<li>Tobias Birkefeld (&#64;tcraxs)</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">If you notice any issues in this documentation, you can <a class="reference external" href="https://github.com/ansible/ansible/edit/devel/lib/ansible/modules/database/postgresql/postgresql_privs.py?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr">edit this document</a> to improve it.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>


<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 Red Hat, Inc.
      <span class="lastupdated">
        Last updated on Jul 21, 2020.
      </span>

    </p>
  </div> 
</footer>
        </div>
      </div>

    </section>

  </div>

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script>

  
  
    
   <!-- extra footer elements for Ansible beyond RTD Sphinx Theme --->
<!-- begin analytics -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = '//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script> 

</body>
</html>