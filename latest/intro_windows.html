

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script type="text/javascript" src="//www.redhat.com/dtm.js"></script>

  <!-- Google Tag Manager Data Layer -->
  <script>
   dataLayer = [];
  </script>
  <!-- End Google Tag Manager Data Layer -->




  
  <title>Windows Support &mdash; Ansible Documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'2.4',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  false
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Ansible Documentation" href="index.html"/>
        <link rel="up" title="Introduction" href="intro.html"/>
        <link rel="next" title="Networking Support" href="intro_networking.html"/>
        <link rel="prev" title="BSD Support" href="intro_bsd.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

  <style>
    .search-reset-start {
        color: #463E3F;
        float: right;
        position: relative;
        top: -25px;
        left: -10px;
        z-index: 10;
     }
     .search-reset-start:hover {
        cursor: pointer;
        color: #2980B9;
     }
     #search-box-id {
        padding-right: 25px;
     }
  </style>

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300'
    rel='stylesheet' type='text/css'>

</head>

<body class="wy-body-for-nav">

  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
  <!-- End Google Tag Manager -->

    <div class="DocSite-globalNav ansibleNav">
        <ul>
            <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
            <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
            <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
            <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
            <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
        </ul>
    </div>

  <a class="DocSite-nav" href="/">
    <img class="DocSiteNav-logo"
      src="_static/images/logo_invert.png"
      alt="Ansible Logo">
    <div class="DocSiteNav-title">
      Documentation
    </div>
  </a>

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">

      <div style="background-color:#5bbdbf;height=80px;margin:'auto auto auto auto'">
        <a class="DocSiteProduct-header DocSiteProduct-header--core" href="/">
            <div class="DocSiteProduct-productName">
                <div class="DocSiteProduct-logoText">
                    Ansible  
                    <div class="DocSiteProduct-CurrentVersion" align="right">
                      v2.4
                  </div>
                </div>
            </div>
        </a>
        

          <div class="DocSiteProduct-CheckVersionPara">For previous versions, see the  <a class="DocSiteProduct-versionheader" href="/#coreversionselect">documentation archive.</a></div>
      </div>

      <div id="menu-id" class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="intro.html">Introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro_installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_inventory.html">Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_dynamic_inventory.html">Dynamic Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_adhoc.html">Introduction To Ad-Hoc Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_configuration.html">Configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_bsd.html">BSD Support</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Windows Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_networking.html">Networking Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart Video</a></li>
<li class="toctree-l1"><a class="reference internal" href="playbooks.html">Playbooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="playbooks_intro.html">Intro to Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_reuse.html">Creating Reusable Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_templating.html">Templating (Jinja2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_conditionals.html">Conditionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_loops.html">Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_blocks.html">Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_strategies.html">Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_best_practices.html">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="playbooks_special_topics.html">Playbooks: Special Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="become.html">Become (Privilege Escalation)</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_acceleration.html">Accelerated Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_async.html">Asynchronous Actions and Polling</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_checkmode.html">Check Mode (&#8220;Dry Run&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_debugger.html">Playbook Debugger</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_delegation.html">Delegation, Rolling Updates, and Local Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_environment.html">Setting the Environment (and Working With Proxies)</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_environment.html#working-with-language-specific-version-managers">Working With Language-Specific Version Managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_error_handling.html">Error Handling In Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_advanced_syntax.html">Advanced Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_lookups.html">Lookups</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_lookups.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_prompts.html">Prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_tags.html">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_vault.html">Using Vault in playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_startnstep.html">Start and Step</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_keywords.html">Directives Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">About Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules_intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="common_return_values.html">Return Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules_support.html">Module Maintenance &amp; Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules_by_category.html">Module Index</a><ul>
<li class="toctree-l2"><a class="reference internal" href="list_of_all_modules.html">All Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_cloud_modules.html">Cloud Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_clustering_modules.html">Clustering Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_commands_modules.html">Commands Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_crypto_modules.html">Crypto Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_database_modules.html">Database Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_files_modules.html">Files Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_identity_modules.html">Identity Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_inventory_modules.html">Inventory Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_messaging_modules.html">Messaging Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_monitoring_modules.html">Monitoring Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_net_tools_modules.html">Net Tools Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_network_modules.html">Network Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_notification_modules.html">Notification Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_packaging_modules.html">Packaging Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_remote_management_modules.html">Remote Management Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_source_control_modules.html">Source Control Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_storage_modules.html">Storage Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_system_modules.html">System Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_utilities_modules.html">Utilities Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_web_infrastructure_modules.html">Web Infrastructure Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="list_of_windows_modules.html">Windows Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vault.html">Ansible Vault</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vault.html#what-can-be-encrypted-with-vault">What Can Be Encrypted With Vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#creating-encrypted-files">Creating Encrypted Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#editing-encrypted-files">Editing Encrypted Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#rekeying-encrypted-files">Rekeying Encrypted Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#encrypting-unencrypted-files">Encrypting Unencrypted Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#decrypting-encrypted-files">Decrypting Encrypted Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#viewing-encrypted-files">Viewing Encrypted Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#use-encrypt-string-to-create-encrypted-variables-to-embed-in-yaml">Use encrypt_string to create encrypted variables to embed in yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#vault-ids-and-multiple-vault-passwords">Vault Ids and Multiple Vault Passwords</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#providing-vault-passwords">Providing Vault Passwords</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#speeding-up-vault-operations">Speeding Up Vault Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#vault-format">Vault Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="vault.html#vault-payload-format-1-1">Vault Payload Format 1.1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="command_line_tools.html">Command Line Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ansible.html">ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-playbook.html">ansible-playbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-vault.html">ansible-vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-galaxy.html">ansible-galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-console.html">ansible-console</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-config.html">ansible-config</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-doc.html">ansible-doc</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-inventory.html">ansible-inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible-pull.html">ansible-pull</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guides.html">Detailed Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide_aws.html">Amazon Web Services Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_azure.html">Getting Started with Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_rax.html">Rackspace Cloud Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_gce.html">Google Cloud Platform Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_cloudstack.html">CloudStack Cloud Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_vagrant.html">Using Vagrant and Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_rolling_upgrade.html">Continuous Delivery and Rolling Upgrades</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_docker.html">Getting Started with Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_packet.html">Using Ansible with the Packet host</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev_guide/index.html">Developer Information</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dev_guide/index.html#ansible-developer-guide">Ansible Developer Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tower.html">Ansible Tower</a></li>
<li class="toctree-l1"><a class="reference internal" href="community.html">Community Information &amp; Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="community.html#ansible-users">Ansible Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="community.html#for-current-and-prospective-developers">For Current and Prospective Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="community.html#other-topics">Other Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="community.html#community-code-of-conduct">Community Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="community.html#contributors-license-agreement">Contributors License Agreement</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="galaxy.html">Ansible Galaxy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="galaxy.html#the-website">The Website</a></li>
<li class="toctree-l2"><a class="reference internal" href="galaxy.html#the-command-line-tool">The command line tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_strategies.html">Testing Strategies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#integrating-testing-with-ansible-playbooks">Integrating Testing With Ansible Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#the-right-level-of-testing">The Right Level of Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#check-mode-as-a-drift-test">Check Mode As A Drift Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#modules-that-are-useful-for-testing">Modules That Are Useful for Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#testing-lifecycle">Testing Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#integrating-testing-with-rolling-updates">Integrating Testing With Rolling Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#achieving-continuous-deployment">Achieving Continuous Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-set-the-path-or-any-other-environment-variable-for-a-task-or-entire-playbook">How can I set the PATH or any other environment variable for a task or entire playbook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-handle-different-machines-needing-different-user-accounts-or-ports-to-log-in-with">How do I handle different machines needing different user accounts or ports to log in with?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-get-ansible-to-reuse-connections-enable-kerberized-ssh-or-have-ansible-pay-attention-to-my-local-ssh-config-file">How do I get ansible to reuse connections, enable Kerberized SSH, or have Ansible pay attention to my local SSH config file?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-configure-a-jump-host-to-access-servers-that-i-have-no-direct-access-to">How do I configure a jump host to access servers that I have no direct access to?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-speed-up-management-inside-ec2">How do I speed up management inside EC2?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-handle-python-pathing-not-having-a-python-2-x-in-usr-bin-python-on-a-remote-machine">How do I handle python pathing not having a Python 2.X in /usr/bin/python on a remote machine?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-is-the-best-way-to-make-content-reusable-redistributable">What is the best way to make content reusable/redistributable?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#where-does-the-configuration-file-live-and-what-can-i-configure-in-it">Where does the configuration file live and what can I configure in it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-disable-cowsay">How do I disable cowsay?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-see-a-list-of-all-of-the-ansible-variables">How do I see a list of all of the ansible_ variables?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-see-all-the-inventory-vars-defined-for-my-host">How do I see all the inventory vars defined for my host?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-loop-over-a-list-of-hosts-in-a-group-inside-of-a-template">How do I loop over a list of hosts in a group, inside of a template?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-access-a-variable-name-programmatically">How do I access a variable name programmatically?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-access-a-variable-of-the-first-host-in-a-group">How do I access a variable of the first host in a group?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-copy-files-recursively-onto-a-target-host">How do I copy files recursively onto a target host?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-access-shell-environment-variables">How do I access shell environment variables?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-generate-crypted-passwords-for-the-user-module">How do I generate crypted passwords for the user module?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#can-i-get-training-on-ansible">Can I get training on Ansible?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#is-there-a-web-interface-rest-api-etc">Is there a web interface / REST API / etc?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-submit-a-change-to-the-documentation">How do I submit a change to the documentation?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-keep-secret-data-in-my-playbook">How do I keep secret data in my playbook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#when-should-i-use-also-how-to-interpolate-variables-or-dynamic-variable-names">When should I use {{ }}? Also, how to interpolate variables or dynamic variable names</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#why-don-t-you-ship-in-x-format">Why don&#8217;t you ship in X format?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-don-t-see-my-question-here">I don&#8217;t see my question here</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="config.html#common-options">Common Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#environment-variables">Environment Variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="YAMLSyntax.html">YAML Syntax</a><ul>
<li class="toctree-l2"><a class="reference internal" href="YAMLSyntax.html#yaml-basics">YAML Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="YAMLSyntax.html#gotchas">Gotchas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="porting_guides.html">Ansible Porting Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_3_support.html">Python 3 Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python_3_support.html#testing-python-3-with-commands-and-playbooks">Testing Python 3 with commands and playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_3_support.html#testing-python-3-module-support">Testing Python 3 module support</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_3_support.html#what-to-do-if-an-incompatibility-is-found">What to do if an incompatibility is found</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release_and_maintenance.html">Release and maintenance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release_and_maintenance.html#release-cycle">Release cycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_and_maintenance.html#release-status">Release status</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_and_maintenance.html#development-and-stable-version-maintenance-workflow">Development and stable version maintenance workflow</a></li>
</ul>
</li>
</ul>

        


    <div class="DocSite-sideNav ansibleNav">
       <ul class="">
       <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
       <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
       <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
       <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
       <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
       </ul>
     </div>

    <!-- changeable widget -->
    <div id="sideBanner">
    <br/>
    <a href="https://www.ansible.com/docs-left?utm_source=docs">
      <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
    </a>
    </div>


      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">Ansible Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <!-- Banner ads
          <div class="DocSiteBanner">
            <a class="DocSiteBanner-imgWrapper"
                href="https://www.ansible.com/docs-top?utm_source=docs">
                <img src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-top-left.png">
            </a>
            <a class="DocSiteBanner-imgWrapper"
                href="https://www.ansible.com/docs-top?utm_source=docs">
                <img src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-top-right.png">
            </a>
        </div> -->

          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">Windows Support</a></li>
  
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/ansible/ansible/blob/devel/docs/docsite/rst/intro_windows.rst" class="icon icon-github"> Edit on GitHub</a>
    </li>
  
</ul>
<hr/>

          <div id="page-content">
          
  <div class="section" id="windows-support">
<h1><a class="toc-backref" href="#id5">Windows Support</a><a class="headerlink" href="#windows-support" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="topics">
<p class="topic-title first">Topics</p>
<ul class="simple">
<li><a class="reference internal" href="#windows-support" id="id5">Windows Support</a><ul>
<li><a class="reference internal" href="#windows-how-does-it-work" id="id6">Windows: How Does It Work</a></li>
<li><a class="reference internal" href="#installing-on-the-control-machine" id="id7">Installing on the Control Machine</a></li>
<li><a class="reference internal" href="#using-a-windows-control-machine" id="id8">Using a Windows control machine</a></li>
<li><a class="reference internal" href="#authentication-options" id="id9">Authentication Options</a><ul>
<li><a class="reference internal" href="#certificate" id="id10">Certificate</a></li>
<li><a class="reference internal" href="#kerberos" id="id11">Kerberos</a><ul>
<li><a class="reference internal" href="#installing-python-kerberos-dependencies" id="id12">Installing python-kerberos dependencies</a></li>
<li><a class="reference internal" href="#installing-python-kerberos" id="id13">Installing python-kerberos</a></li>
<li><a class="reference internal" href="#configuring-kerberos" id="id14">Configuring Kerberos</a></li>
<li><a class="reference internal" href="#testing-a-kerberos-connection" id="id15">Testing a kerberos connection</a></li>
<li><a class="reference internal" href="#automatic-kerberos-ticket-management" id="id16">Automatic kerberos ticket management</a></li>
<li><a class="reference internal" href="#troubleshooting-kerberos-connections" id="id17">Troubleshooting kerberos connections</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credssp" id="id18">CredSSP</a><ul>
<li><a class="reference internal" href="#installing-requests-credssp" id="id19">Installing requests-credssp</a></li>
<li><a class="reference internal" href="#credssp-and-tls-1-2" id="id20">CredSSP and TLS 1.2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credential-delegation" id="id21">Credential Delegation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inventory" id="id22">Inventory</a></li>
<li><a class="reference internal" href="#windows-system-prep" id="id23">Windows System Prep</a></li>
<li><a class="reference internal" href="#getting-to-powershell-3-0-or-higher" id="id24">Getting to PowerShell 3.0 or higher</a></li>
<li><a class="reference internal" href="#what-modules-are-available" id="id25">What modules are available</a></li>
<li><a class="reference internal" href="#developers-supported-modules-and-how-it-works" id="id26">Developers: Supported modules and how it works</a></li>
<li><a class="reference internal" href="#windows-facts" id="id27">Windows Facts</a></li>
<li><a class="reference internal" href="#windows-playbook-examples" id="id28">Windows Playbook Examples</a></li>
<li><a class="reference internal" href="#windows-contributions" id="id29">Windows Contributions</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="windows-how-does-it-work">
<span id="id1"></span><h2><a class="toc-backref" href="#id6">Windows: How Does It Work</a><a class="headerlink" href="#windows-how-does-it-work" title="Permalink to this headline">¶</a></h2>
<p>As you may have already read, Ansible manages Linux/Unix machines using SSH by default.</p>
<p>Starting in version 1.7, Ansible also contains support for managing Windows machines.  This uses
native PowerShell remoting, rather than SSH.</p>
<p>Ansible will still be run from a Linux control machine, and uses the &#8220;winrm&#8221; Python module to talk to remote hosts.
While not supported by Microsoft or Ansible, this Linux control machine can be a Windows Subsystem for Linux (WSL) bash shell.</p>
<p>No additional software needs to be installed on the remote machines for Ansible to manage them, it still maintains the agentless properties that make it popular on Linux/Unix.</p>
<p>Note that it is expected you have a basic understanding of Ansible prior to jumping into this section, so if you haven&#8217;t written a Linux playbook first, it might be worthwhile to dig in there first.</p>
</div>
<div class="section" id="installing-on-the-control-machine">
<span id="windows-installing"></span><h2><a class="toc-backref" href="#id7">Installing on the Control Machine</a><a class="headerlink" href="#installing-on-the-control-machine" title="Permalink to this headline">¶</a></h2>
<p>On a Linux control machine:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pip install &quot;pywinrm&gt;=0.2.2&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">on distributions with multiple python versions, use pip2 or pip2.x, where x matches the python minor version Ansible is running under.</p>
</div>
</div>
<div class="section" id="using-a-windows-control-machine">
<span id="windows-control-machine"></span><h2><a class="toc-backref" href="#id8">Using a Windows control machine</a><a class="headerlink" href="#using-a-windows-control-machine" title="Permalink to this headline">¶</a></h2>
<p>A Linux control machine is required to manage Windows hosts. This Linux control machine can be a Windows Subsystem for Linux (WSL) bash shell.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Running Ansible from a Windows control machine directly is not a goal of the project.  Refrain from asking for this feature, as it limits what technologies, features, and code we can use in the main project in the future.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Windows Subsystem for Linux (Beta) is not supported by Microsoft or Ansible and should not be used for production systems.</p>
</div>
<p>If you would like to experiment with the Windows Subsystem for Linux (WSL), first enable the Windows Subsystem for Linux using
<a class="reference external" href="https://www.jeffgeerling.com/blog/2017/using-ansible-through-windows-10s-subsystem-linux">these instructions</a>.
This requires a reboot.</p>
<p>Once WSL is enabled, you can open the Bash terminal. At the prompt, you can quickly start using the latest Ansible release by running the following commands:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">sudo apt-get update</span>
<span class="l l-Scalar l-Scalar-Plain">sudo apt-get install python-pip git libffi-dev libssl-dev -y</span>
<span class="l l-Scalar l-Scalar-Plain">pip install ansible pywinrm</span>

<span class="l l-Scalar l-Scalar-Plain"># this step is only necessary for Windows builds earlier than 16188, and must be repeated each time bash is launched,</span>
<span class="l l-Scalar l-Scalar-Plain"># unless bash is launched as ``bash --login``</span>
<span class="l l-Scalar l-Scalar-Plain"># see https://github.com/Microsoft/BashOnWindows/issues/2148 and</span>
<span class="l l-Scalar l-Scalar-Plain"># https://github.com/Microsoft/BashOnWindows/issues/816#issuecomment-301216901 for details</span>
<span class="l l-Scalar l-Scalar-Plain">source ~/.profile</span>
</pre></div>
</div>
<p>After you&#8217;ve successfully run these commands, you can start to create your inventory, write example playbooks and start targeting systems using the plethora of available Windows modules.</p>
<p>If you want to run Ansible from source for development purposes, simply uninstall the pip-installed version (which will leave all the necessary dependencies behind), then clone the Ansible source, and run the hacking script to configure it to run from source:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pip uninstall ansible -y</span>
<span class="l l-Scalar l-Scalar-Plain">git clone https://github.com/ansible/ansible.git</span>
<span class="l l-Scalar l-Scalar-Plain">source ansible/hacking/env-setup</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ansible is also reported to &#8220;work&#8221; on Cygwin, but installation is more cumbersome, and will incur sporadic failures due to Cygwin&#8217;s implementation of <code class="docutils literal"><span class="pre">fork()</span></code>.</p>
</div>
</div>
<div class="section" id="authentication-options">
<h2><a class="toc-backref" href="#id9">Authentication Options</a><a class="headerlink" href="#authentication-options" title="Permalink to this headline">¶</a></h2>
<p>When connecting to a Windows host there are different authentication options that can be used. The options and the features they support are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="20%" />
<col width="34%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Local Accounts</th>
<th class="head">Active Directory Accounts</th>
<th class="head">Credential Delegation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Basic</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>Certificate</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr class="row-even"><td>Kerberos</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>NTLM</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>CredSSP</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>You can specify which authentication option you wish to use by setting it to the <code class="docutils literal"><span class="pre">ansible_winrm_transport</span></code> variable.</p>
<div class="section" id="certificate">
<h3><a class="toc-backref" href="#id10">Certificate</a><a class="headerlink" href="#certificate" title="Permalink to this headline">¶</a></h3>
<p>Certificate authentication is similar to SSH where a certificate is assigned to a local user and instead of using a password to authenticate a certificate is used instead.</p>
</div>
<div class="section" id="kerberos">
<h3><a class="toc-backref" href="#id11">Kerberos</a><a class="headerlink" href="#kerberos" title="Permalink to this headline">¶</a></h3>
<p>Kerberos is the preferred option compared to NTLM to use when using an Active Directory account but it requires a few extra steps to set up on the Ansible control host. You will need to install the &#8220;python-kerberos&#8221; module on the Ansible control host (and the MIT krb5 libraries it depends on). The Ansible control host also requires a properly configured computer account in Active Directory.</p>
<div class="section" id="installing-python-kerberos-dependencies">
<h4><a class="toc-backref" href="#id12">Installing python-kerberos dependencies</a><a class="headerlink" href="#installing-python-kerberos-dependencies" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Via Yum</span>
yum -y install python-devel krb5-devel krb5-libs krb5-workstation

<span class="c1"># Via Apt (Ubuntu)</span>
sudo apt-get install python-dev libkrb5-dev krb5-user

<span class="c1"># Via Portage (Gentoo)</span>
emerge -av app-crypt/mit-krb5
emerge -av dev-python/setuptools

<span class="c1"># Via pkg (FreeBSD)</span>
sudo pkg install security/krb5

<span class="c1"># Via OpenCSW (Solaris)</span>
pkgadd -d http://get.opencsw.org/now
/opt/csw/bin/pkgutil -U
/opt/csw/bin/pkgutil -y -i libkrb5_3

<span class="c1"># Via Pacman (Arch Linux)</span>
pacman -S krb5
</pre></div>
</div>
</div>
<div class="section" id="installing-python-kerberos">
<h4><a class="toc-backref" href="#id13">Installing python-kerberos</a><a class="headerlink" href="#installing-python-kerberos" title="Permalink to this headline">¶</a></h4>
<p>Once you&#8217;ve installed the necessary dependencies, the python-kerberos wrapper can be installed via pip:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install pywinrm<span class="o">[</span>kerberos<span class="o">]</span>
</pre></div>
</div>
<p>Kerberos is installed and configured by default on OS X and many Linux distributions. If your control machine has not already done this for you, you will need to.</p>
</div>
<div class="section" id="configuring-kerberos">
<h4><a class="toc-backref" href="#id14">Configuring Kerberos</a><a class="headerlink" href="#configuring-kerberos" title="Permalink to this headline">¶</a></h4>
<p>Edit your /etc/krb5.conf (which should be installed as a result of installing packages above) and add the following information for each domain you need to connect to:</p>
<p>In the section that starts with</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[realms]</span>
</pre></div>
</div>
<p>add the full domain name and the fully qualified domain names of your primary and secondary Active Directory domain controllers.  It should look something like this:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[realms]</span>

 <span class="na">MY.DOMAIN.COM</span> <span class="o">=</span> <span class="s">{</span>
<span class="s">  kdc = domain-controller1.my.domain.com</span>
<span class="s">  kdc = domain-controller2.my.domain.com</span>
<span class="s"> }</span>
</pre></div>
</div>
<p>and in the [domain_realm] section add a line like the following for each domain you want to access:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[domain_realm]</span>
    <span class="na">.my.domain.com</span> <span class="o">=</span> <span class="s">MY.DOMAIN.COM</span>
</pre></div>
</div>
<p>You may wish to configure other settings here, such as the default domain.</p>
</div>
<div class="section" id="testing-a-kerberos-connection">
<h4><a class="toc-backref" href="#id15">Testing a kerberos connection</a><a class="headerlink" href="#testing-a-kerberos-connection" title="Permalink to this headline">¶</a></h4>
<p>If you have installed krb5-workstation (yum) or krb5-user (apt-get) you can use the following command to test that you can be authorised by your domain controller.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>kinit <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c1b4b2a4b3818c98ef858e8c80888fef828e8c">[email&#160;protected]</a>
</pre></div>
</div>
<p>Note that the domain part has to be fully qualified and must be in upper case.</p>
<p>To see what tickets if any you have acquired, use the command klist</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>klist
</pre></div>
</div>
</div>
<div class="section" id="automatic-kerberos-ticket-management">
<h4><a class="toc-backref" href="#id16">Automatic kerberos ticket management</a><a class="headerlink" href="#automatic-kerberos-ticket-management" title="Permalink to this headline">¶</a></h4>
<p>Ansible defaults to automatically managing kerberos tickets (as of Ansible 2.3) when both username and password are specified for a host that&#8217;s configured for kerberos. A new ticket is created in a temporary credential cache for each host, before each task executes (to minimize the chance of ticket expiration). The temporary credential caches are deleted after each task, and will not interfere with the default credential cache.</p>
<p>To disable automatic ticket management (e.g., to use an existing SSO ticket or call <code class="docutils literal"><span class="pre">kinit</span></code> manually to populate the default credential cache), set <code class="docutils literal"><span class="pre">ansible_winrm_kinit_mode=manual</span></code> via inventory.</p>
<p>Automatic ticket management requires a standard <code class="docutils literal"><span class="pre">kinit</span></code> binary on the control host system path. To specify a different location or binary name, set the <code class="docutils literal"><span class="pre">ansible_winrm_kinit_cmd</span></code> inventory var to the fully-qualified path to an MIT krbv5 <code class="docutils literal"><span class="pre">kinit</span></code>-compatible binary.</p>
</div>
<div class="section" id="troubleshooting-kerberos-connections">
<h4><a class="toc-backref" href="#id17">Troubleshooting kerberos connections</a><a class="headerlink" href="#troubleshooting-kerberos-connections" title="Permalink to this headline">¶</a></h4>
<p>If you unable to connect using kerberos, check the following:</p>
<p>Ensure that forward and reverse DNS lookups are working properly on your domain.</p>
<p>To test this, ping the windows host you want to control by name then use the ip address returned with nslookup.  You should get the same name back from DNS when you use nslookup on the ip address.</p>
<p>If you get different hostnames back than the name you originally pinged, speak to your active directory administrator and get them to check that DNS Scavenging is enabled and that DNS and DHCP are updating each other.</p>
<p>Ensure that the Ansible controller has a properly configured computer account in the domain.</p>
<p>Check your Ansible controller&#8217;s clock is synchronised with your domain controller.  Kerberos is time sensitive and a little clock drift can cause tickets not be granted.</p>
<p>Check you are using the real fully qualified domain name for the domain.  Sometimes domains are commonly known to users by aliases.  To check this run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>kinit -C <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5326203621131e0a7d171c1e121a1d7d101c1e">[email&#160;protected]</a>
klist
</pre></div>
</div>
<p>If the domain name returned by klist is different from the domain name you requested, you are requesting using an alias, and you need to update your krb5.conf so you are using the fully qualified domain name, not its alias.</p>
</div>
</div>
<div class="section" id="credssp">
<span id="windows-inventory"></span><h3><a class="toc-backref" href="#id18">CredSSP</a><a class="headerlink" href="#credssp" title="Permalink to this headline">¶</a></h3>
<p>CredSSP authentication can be used to authenticate with both domain and local accounts. It allows credential delegation to do second hop authentication on a remote host by sending an encrypted form of the credentials to the remote host using the CredSSP protocol.</p>
<div class="section" id="installing-requests-credssp">
<h4><a class="toc-backref" href="#id19">Installing requests-credssp</a><a class="headerlink" href="#installing-requests-credssp" title="Permalink to this headline">¶</a></h4>
<p>To install credssp you can use pip to install the requests-credssp library:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install pywinrm<span class="o">[</span>credssp<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="credssp-and-tls-1-2">
<h4><a class="toc-backref" href="#id20">CredSSP and TLS 1.2</a><a class="headerlink" href="#credssp-and-tls-1-2" title="Permalink to this headline">¶</a></h4>
<p>CredSSP requires the remote host to have TLS 1.2 configured or else the connection will fail. TLS 1.2 is installed by default from Server 2012 and Windows 8 onwards. For Server 2008, 2008 R2 and Windows 7 you can add TLS 1.2 support by:</p>
<ul class="simple">
<li>Installing the <a class="reference external" href="https://support.microsoft.com/en-us/help/3080079/update-to-add-rds-support-for-tls-1.1-and-tls-1.2-in-windows-7-or-windows-server-2008-r2">TLS 1.2 update from Microsoft</a></li>
<li>Adding the TLS 1.2 registry keys as shown on this <a class="reference external" href="https://technet.microsoft.com/en-us/library/dn786418.aspx#BKMK_SchannelTR_TLS12">page</a></li>
</ul>
</div>
</div>
<div class="section" id="credential-delegation">
<h3><a class="toc-backref" href="#id21">Credential Delegation</a><a class="headerlink" href="#credential-delegation" title="Permalink to this headline">¶</a></h3>
<p>If you need to interact with a remote resource or run a process that requires the credentials to be stored in the current session like a certreq.exe then an authentication protocol that supports credential delegation needs to be used.</p>
</div>
</div>
<div class="section" id="inventory">
<h2><a class="toc-backref" href="#id22">Inventory</a><a class="headerlink" href="#inventory" title="Permalink to this headline">¶</a></h2>
<p>Ansible&#8217;s windows support relies on a few standard variables to indicate the username, password, and connection type (windows) of the remote hosts.  These variables are most easily set up in inventory.  This is used instead of SSH-keys or passwords as normally fed into Ansible:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="p p-Indicator">[</span><span class="nv">windows</span><span class="p p-Indicator">]</span>
<span class="l l-Scalar l-Scalar-Plain">winserver1.example.com</span>
<span class="l l-Scalar l-Scalar-Plain">winserver2.example.com</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ansible 2.0 has deprecated the &#8220;ssh&#8221; from <code class="docutils literal"><span class="pre">ansible_ssh_user</span></code>, <code class="docutils literal"><span class="pre">ansible_ssh_host</span></code>, and <code class="docutils literal"><span class="pre">ansible_ssh_port</span></code> to become <code class="docutils literal"><span class="pre">ansible_user</span></code>, <code class="docutils literal"><span class="pre">ansible_host</span></code>, and <code class="docutils literal"><span class="pre">ansible_port</span></code>. If you are using a version of Ansible prior to 2.0,  you should continue using the older style variables (<code class="docutils literal"><span class="pre">ansible_ssh_*</span></code>). These shorter variables are ignored, without warning, in older versions of Ansible.</p>
</div>
<p>In <code class="docutils literal"><span class="pre">group_vars/windows.yml</span></code>, define the following inventory variables:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="c1"># it is suggested that these be encrypted with ansible-vault:</span>
<span class="c1"># ansible-vault edit group_vars/windows.yml</span>

<span class="l l-Scalar l-Scalar-Plain">ansible_user</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Administrator</span>
<span class="l l-Scalar l-Scalar-Plain">ansible_password</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">SecretPasswordGoesHere</span>
<span class="l l-Scalar l-Scalar-Plain">ansible_port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5986</span>
<span class="l l-Scalar l-Scalar-Plain">ansible_connection</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">winrm</span>
<span class="c1"># The following is necessary for Python 2.7.9+ (or any older Python that has backported SSLContext, eg, Python 2.7.5 on RHEL7) when using default WinRM self-signed certificates:</span>
<span class="l l-Scalar l-Scalar-Plain">ansible_winrm_server_cert_validation</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ignore</span>
</pre></div>
</div>
<p>Attention for the older style variables (<code class="docutils literal"><span class="pre">ansible_ssh_*</span></code>): ansible_ssh_password doesn&#8217;t exist, should be ansible_ssh_pass.</p>
<p>Although Ansible is mostly an SSH-oriented system, Windows management will not happen over SSH (<a class="reference external" href="http://blogs.msdn.com/b/powershell/archive/2015/06/03/looking-forward-microsoft-support-for-secure-shell-ssh.aspx">yet</a>).</p>
<p>If you have installed the <code class="docutils literal"><span class="pre">kerberos</span></code> module and <code class="docutils literal"><span class="pre">ansible_user</span></code> contains <code class="docutils literal"><span class="pre">&#64;</span></code> (e.g. <code class="docutils literal"><span class="pre">username&#64;realm</span></code>), Ansible will first attempt Kerberos authentication. <em>This method uses the principal you are authenticated to Kerberos with on the control machine and not</em> <code class="docutils literal"><span class="pre">ansible_user</span></code>. If that fails, either because you are not signed into Kerberos on the control machine or because the corresponding domain account on the remote host is not available, then Ansible will fall back to &#8220;plain&#8221; username/password authentication.</p>
<p>When using your playbook, don&#8217;t forget to specify <code class="docutils literal"><span class="pre">--ask-vault-pass</span></code> to provide the password to unlock the file.</p>
<p>Test your configuration like so, by trying to contact your Windows nodes.  Note this is not an ICMP ping, but tests the Ansible
communication channel that leverages Windows remoting:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ansible windows [-i inventory] -m win_ping --ask-vault-pass</span>
</pre></div>
</div>
<p>If you haven&#8217;t done anything to prep your systems yet, this won&#8217;t work yet.  This is covered in a later
section about how to enable PowerShell remoting - and if necessary - how to upgrade PowerShell to
a version that is 3 or higher.</p>
<p>You&#8217;ll run this command again later though, to make sure everything is working.</p>
<p>Since 2.0, the following custom inventory variables are also supported for additional configuration of WinRM connections</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ansible_winrm_scheme</span></code>: Specify the connection scheme (<code class="docutils literal"><span class="pre">http</span></code> or <code class="docutils literal"><span class="pre">https</span></code>) to use for the WinRM connection.  Ansible uses <code class="docutils literal"><span class="pre">https</span></code> by default unless the port is 5985.</li>
<li><code class="docutils literal"><span class="pre">ansible_winrm_path</span></code>: Specify an alternate path to the WinRM endpoint.  Ansible uses <code class="docutils literal"><span class="pre">/wsman</span></code> by default.</li>
<li><code class="docutils literal"><span class="pre">ansible_winrm_realm</span></code>: Specify the realm to use for Kerberos authentication.  If the username contains <code class="docutils literal"><span class="pre">&#64;</span></code>, Ansible will use the part of the username after <code class="docutils literal"><span class="pre">&#64;</span></code> by default.</li>
<li><code class="docutils literal"><span class="pre">ansible_winrm_transport</span></code>: Specify one or more transports as a comma-separated list.  By default, Ansible will use <code class="docutils literal"><span class="pre">kerberos,plaintext</span></code> if the <code class="docutils literal"><span class="pre">kerberos</span></code> module is installed and a realm is defined, otherwise <code class="docutils literal"><span class="pre">plaintext</span></code>.</li>
<li><code class="docutils literal"><span class="pre">ansible_winrm_server_cert_validation</span></code>: Specify the server certificate validation mode (<code class="docutils literal"><span class="pre">ignore</span></code> or <code class="docutils literal"><span class="pre">validate</span></code>). Ansible defaults to <code class="docutils literal"><span class="pre">validate</span></code> on Python 2.7.9 and higher, which will result in certificate validation errors against the Windows self-signed certificates. Unless verifiable certificates have been configured on the WinRM listeners, this should be set to <code class="docutils literal"><span class="pre">ignore</span></code>.</li>
<li><code class="docutils literal"><span class="pre">ansible_winrm_kerberos_delegation</span></code>: Set to <code class="docutils literal"><span class="pre">true</span></code> to enable delegation of commands on the remote host when using kerberos.</li>
<li><code class="docutils literal"><span class="pre">ansible_winrm_operation_timeout_sec</span></code>: Increase the default timeout for WinRM operations (default: <code class="docutils literal"><span class="pre">20</span></code>).</li>
<li><code class="docutils literal"><span class="pre">ansible_winrm_read_timeout_sec</span></code>: Increase the WinRM read timeout if you experience read timeout errors (default: <code class="docutils literal"><span class="pre">30</span></code>), e.g. intermittent network issues.</li>
<li><code class="docutils literal"><span class="pre">ansible_winrm_*</span></code>: Any additional keyword arguments supported by <code class="docutils literal"><span class="pre">winrm.Protocol</span></code> may be provided.</li>
</ul>
</div>
<div class="section" id="windows-system-prep">
<span id="id2"></span><h2><a class="toc-backref" href="#id23">Windows System Prep</a><a class="headerlink" href="#windows-system-prep" title="Permalink to this headline">¶</a></h2>
<p>In order for Ansible to manage your windows machines, you will have to enable and configure PowerShell remoting.</p>
<p>To automate the setup of WinRM, you can run the <a class="reference external" href="https://github.com/ansible/ansible/blob/devel/examples/scripts/ConfigureRemotingForAnsible.ps1">examples/scripts/ConfigureRemotingForAnsible.ps1</a> script on the remote machine in a PowerShell console as an administrator.</p>
<p>The example script accepts a few arguments which Admins may choose to use to modify the default setup slightly, which might be appropriate in some cases.</p>
<p>Pass the <code class="docutils literal"><span class="pre">-CertValidityDays</span></code> option to customize the expiration date of the generated certificate:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">powershell.exe -File ConfigureRemotingForAnsible.ps1 -CertValidityDays 100</span>
</pre></div>
</div>
<p>Pass the <code class="docutils literal"><span class="pre">-EnableCredSSP</span></code> switch to enable CredSSP as an authentication option:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">powershell.exe -File ConfigureRemotingForAnsible.ps1 -EnableCredSSP</span>
</pre></div>
</div>
<p>Pass the <code class="docutils literal"><span class="pre">-ForceNewSSLCert</span></code> switch to force a new SSL certificate to be attached to an already existing winrm listener. (Avoids SSL winrm errors on syspreped Windows images after the CN changes):</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">powershell.exe -File ConfigureRemotingForAnsible.ps1 -ForceNewSSLCert</span>
</pre></div>
</div>
<p>Pass the <code class="docutils literal"><span class="pre">-SkipNetworkProfileCheck</span></code> switch to configure winrm to listen on PUBLIC zone interfaces.  (Without this option, the script will fail if any network interface on device is in PUBLIC zone):</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">powershell.exe -File ConfigureRemotingForAnsible.ps1 -SkipNetworkProfileCheck</span>
</pre></div>
</div>
<p>To troubleshoot the <code class="docutils literal"><span class="pre">ConfigureRemotingForAnsible.ps1</span></code> writes every change it makes to the Windows EventLog (useful when run unattendedly). Additionally the <code class="docutils literal"><span class="pre">-Verbose</span></code> option can be used to get more information on screen about what it is doing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>On Windows 7 and Server 2008 R2 machines, due to a bug in Windows
Management Framework 3.0, it may be necessary to install this
hotfix <a class="reference external" href="http://support.microsoft.com/kb/2842230">http://support.microsoft.com/kb/2842230</a> to avoid receiving
out of memory and stack overflow exceptions.  Newly-installed Server 2008
R2 systems which are not fully up to date with windows updates are known
to have this issue.</p>
<p class="last">Windows 8.1 and Server 2012 R2 are not affected by this issue as they
come with Windows Management Framework 4.0.</p>
</div>
</div>
<div class="section" id="getting-to-powershell-3-0-or-higher">
<span id="getting-to-powershell-three-or-higher"></span><h2><a class="toc-backref" href="#id24">Getting to PowerShell 3.0 or higher</a><a class="headerlink" href="#getting-to-powershell-3-0-or-higher" title="Permalink to this headline">¶</a></h2>
<p>PowerShell 3.0 or higher is needed for most provided Ansible modules for Windows, and is also required to run the above setup script. Note that PowerShell 3.0 is only supported on Windows 7 SP1, Windows Server 2008 SP1, and later releases of Windows.</p>
<p>Looking at an Ansible checkout, copy the <a class="reference external" href="https://github.com/ansible/ansible/blob/devel/examples/scripts/upgrade_to_ps3.ps1">examples/scripts/upgrade_to_ps3.ps1</a> script onto the remote host and run a PowerShell console as an administrator.  You will now be running PowerShell 3 and can try connectivity again using the <code class="docutils literal"><span class="pre">win_ping</span></code> technique referenced above.</p>
</div>
<div class="section" id="what-modules-are-available">
<span id="what-windows-modules-are-available"></span><h2><a class="toc-backref" href="#id25">What modules are available</a><a class="headerlink" href="#what-modules-are-available" title="Permalink to this headline">¶</a></h2>
<p>Most of the Ansible modules in core Ansible are written for a combination of Linux/Unix machines and arbitrary web services, though there are various
Windows-only modules. These are listed in the <a class="reference external" href="http://docs.ansible.com/list_of_windows_modules.html">&#8220;windows&#8221; subcategory of the Ansible module index</a>.</p>
<p>In addition, the following core modules/action-plugins work with Windows:</p>
<ul class="simple">
<li>add_host</li>
<li>assert</li>
<li>async_status</li>
<li>debug</li>
<li>fail</li>
<li>fetch</li>
<li>group_by</li>
<li>include</li>
<li>include_role</li>
<li>include_vars</li>
<li>meta</li>
<li>pause</li>
<li>raw</li>
<li>script</li>
<li>set_fact</li>
<li>set_stats</li>
<li>setup</li>
<li>slurp</li>
<li>template (also: win_template)</li>
<li>wait_for_connection</li>
</ul>
<p>Some modules can be utilised in playbooks that target windows by delegating to localhost, depending on what you are
attempting to achieve.  For example, <code class="docutils literal"><span class="pre">assemble</span></code> can be used to create a file on your ansible controller that is then
sent to your windows targets using <code class="docutils literal"><span class="pre">win_copy</span></code>.</p>
<p>In many cases, there is no need to use or write an Ansible module. In particular, the <code class="docutils literal"><span class="pre">script</span></code> module can be used to run arbitrary PowerShell scripts, allowing Windows administrators familiar with PowerShell a very native way to do things, as in the following playbook:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">windows</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">script</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">foo.ps1 --argument --other-argument</span>
</pre></div>
</div>
<p>But also the <code class="docutils literal"><span class="pre">win_shell</span></code> module allows for running Powershell snippets inline:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">windows</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Remove Appx packages (and their hindering file assocations)</span>
      <span class="l l-Scalar l-Scalar-Plain">win_shell</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">|</span>
        <span class="no">Get-AppxPackage -name &quot;Microsoft.ZuneMusic&quot; | Remove-AppxPackage</span>
        <span class="no">Get-AppxPackage -name &quot;Microsoft.ZuneVideo&quot; | Remove-AppxPackage</span>
</pre></div>
</div>
</div>
<div class="section" id="developers-supported-modules-and-how-it-works">
<span id="developers-developers-developers"></span><h2><a class="toc-backref" href="#id26">Developers: Supported modules and how it works</a><a class="headerlink" href="#developers-supported-modules-and-how-it-works" title="Permalink to this headline">¶</a></h2>
<p>Developing Ansible modules are covered in a <a class="reference external" href="http://docs.ansible.com/developing_modules.html">later section of the documentation</a>, with a focus on Linux/Unix.
What if you want to write Windows modules for Ansible though?</p>
<p>For Windows, Ansible modules are implemented in PowerShell.  Skim those Linux/Unix module development chapters before proceeding. Windows modules in the core and extras repo live in a <code class="docutils literal"><span class="pre">windows/</span></code> subdir. Custom modules can go directly into the Ansible <code class="docutils literal"><span class="pre">library/</span></code> directories or those added in ansible.cfg. Documentation lives in a <code class="docutils literal"><span class="pre">.py</span></code> file with the same name. For example, if a module is named <code class="docutils literal"><span class="pre">win_ping</span></code>, there will be embedded documentation in the <code class="docutils literal"><span class="pre">win_ping.py</span></code> file, and the actual PowerShell code will live in a <code class="docutils literal"><span class="pre">win_ping.ps1</span></code> file. Take a look at the sources and this will make more sense.</p>
<p>Modules (ps1 files) should start as follows:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="c1">#!powershell</span>
<span class="c1"># &lt;license&gt;</span>

<span class="c1"># WANT_JSON</span>
<span class="c1"># POWERSHELL_COMMON</span>

<span class="c1"># code goes here, reading in stdin as JSON and outputting JSON</span>
</pre></div>
</div>
<p>The above magic is necessary to tell Ansible to mix in some common code and also know how to push modules out.  The common code contains some nice wrappers around working with hash data structures and emitting JSON results, and possibly a few more useful things.  Regular Ansible has this same concept for reusing Python code - this is just the windows equivalent.</p>
<p>What modules you see in <code class="docutils literal"><span class="pre">windows/</span></code> are just a start.  Additional modules may be submitted as pull requests to github.</p>
</div>
<div class="section" id="windows-facts">
<span id="id3"></span><h2><a class="toc-backref" href="#id27">Windows Facts</a><a class="headerlink" href="#windows-facts" title="Permalink to this headline">¶</a></h2>
<p>Just as with Linux/Unix, facts can be gathered for windows hosts, which will return things such as the operating system version.  To see what variables are available about a windows host, run the following:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ansible winhost.example.com -m setup</span>
</pre></div>
</div>
<p>Note that this command invocation is exactly the same as the Linux/Unix equivalent.</p>
</div>
<div class="section" id="windows-playbook-examples">
<span id="windows-playbook-example"></span><h2><a class="toc-backref" href="#id28">Windows Playbook Examples</a><a class="headerlink" href="#windows-playbook-examples" title="Permalink to this headline">¶</a></h2>
<p>Here is an example of pushing and running a PowerShell script:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">test script module</span>
  <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">windows</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">run test script</span>
      <span class="l l-Scalar l-Scalar-Plain">script</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">files/test_script.ps1</span>
</pre></div>
</div>
<p>Running individual commands uses the <code class="docutils literal"><span class="pre">win_command</span> <span class="pre">&lt;https://docs.ansible.com/ansible/win_command_module.html&gt;</span></code> or <code class="docutils literal"><span class="pre">win_shell</span> <span class="pre">&lt;https://docs.ansible.com/ansible/win_shell_module.html&gt;</span></code> module, as opposed to the shell or command module as is common on Linux/Unix operating systems:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">test raw module</span>
  <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">windows</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">run ipconfig</span>
      <span class="l l-Scalar l-Scalar-Plain">win_command</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ipconfig</span>
      <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ipconfig</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">var=ipconfig</span>
</pre></div>
</div>
<p>Running common DOS commands like <code class="docutils literal"><span class="pre">del</span></code>, <code class="docutils literal"><span class="pre">move</span></code>, or <code class="docutils literal"><span class="pre">copy</span></code> is unlikely to work on a remote Windows Server using Powershell, but they can work by prefacing the commands with <code class="docutils literal"><span class="pre">CMD</span> <span class="pre">/C</span></code> and enclosing the command in double quotes as in this example:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">another raw module example</span>
  <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">windows</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Move file on remote Windows Server from one location to another</span>
       <span class="l l-Scalar l-Scalar-Plain">win_command</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">CMD /C &quot;MOVE /Y C:\teststuff\myfile.conf C:\builds\smtp.conf&quot;</span>
</pre></div>
</div>
<p>You may wind up with a more readable playbook by using the PowerShell equivalents of DOS commands.  For example, to achieve the same effect as the example above, you could use:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">another raw module example demonstrating powershell one liner</span>
  <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">windows</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
     <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Move file on remote Windows Server from one location to another</span>
       <span class="l l-Scalar l-Scalar-Plain">win_command</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Powershell.exe &quot;Move-Item C:\teststuff\myfile.conf C:\builds\smtp.conf&quot;</span>
</pre></div>
</div>
<p>Bear in mind that using <code class="docutils literal"><span class="pre">win_command</span></code> or <code class="docutils literal"><span class="pre">win_shell</span></code> will always report <code class="docutils literal"><span class="pre">changed</span></code>, and it is your responsibility to ensure PowerShell will need to handle idempotency as appropriate (the move examples above are inherently not idempotent), so where possible use (or write) a module.</p>
<p>Here&#8217;s an example of how to use the <code class="docutils literal"><span class="pre">win_stat</span></code> module to test for file existence. Note that the data returned by the <code class="docutils literal"><span class="pre">win_stat</span></code> module is slightly different than what is provided by the Linux equivalent:</p>
<div class="highlight-YAML+Jinja"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">test stat module</span>
  <span class="l l-Scalar l-Scalar-Plain">hosts</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">windows</span>
  <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">test stat module on file</span>
      <span class="l l-Scalar l-Scalar-Plain">win_stat</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">path=&quot;C:/Windows/win.ini&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">register</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">stat_file</span>

    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">debug</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">var=stat_file</span>

    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">check stat_file result</span>
      <span class="l l-Scalar l-Scalar-Plain">assert</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">that</span><span class="p p-Indicator">:</span>
             <span class="p p-Indicator">-</span> <span class="s">&quot;stat_file.stat.exists&quot;</span>
             <span class="p p-Indicator">-</span> <span class="s">&quot;not</span><span class="nv"> </span><span class="s">stat_file.stat.isdir&quot;</span>
             <span class="p p-Indicator">-</span> <span class="s">&quot;stat_file.stat.size</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0&quot;</span>
             <span class="p p-Indicator">-</span> <span class="s">&quot;stat_file.stat.md5&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="windows-contributions">
<span id="id4"></span><h2><a class="toc-backref" href="#id29">Windows Contributions</a><a class="headerlink" href="#windows-contributions" title="Permalink to this headline">¶</a></h2>
<p>Windows support in Ansible is still relatively new, and contributions are quite welcome, whether this is in the
form of new modules, tweaks to existing modules, documentation, or something else.  Please stop by the ansible-devel mailing list if you would like to get involved and say hi.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="dev_guide/developing_modules.html"><span class="doc">Developing Modules</span></a></dt>
<dd>How to write modules</dd>
<dt><a class="reference internal" href="playbooks.html"><span class="doc">Playbooks</span></a></dt>
<dd>Learning Ansible&#8217;s configuration management language</dd>
<dt><a class="reference external" href="http://docs.ansible.com/list_of_windows_modules.html">List of Windows Modules</a></dt>
<dd>Windows specific module list, all implemented in PowerShell</dd>
<dt><a class="reference external" href="http://groups.google.com/group/ansible-project">Mailing List</a></dt>
<dd>Questions? Help? Ideas?  Stop by the list on Google Groups</dd>
<dt><a class="reference external" href="http://irc.freenode.net">irc.freenode.net</a></dt>
<dd>#ansible IRC chat channel</dd>
</dl>
</div>
</div>
</div>


          </div>
          <div id="search-results"><gcse:searchresults-only></div>
          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="intro_networking.html" class="btn btn-neutral float-right" title="Networking Support"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="intro_bsd.html" class="btn btn-neutral" title="BSD Support"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

<script data-cfasync="false" src="/cdn-cgi/scripts/d07b1474/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

  <p>
  Copyright © 2017 Red Hat, Inc.
  <br>
    Last updated on Oct 10, 2017.
  </p>
<p>
Ansible docs are generated from <a href="https://github.com/ansible/ansible">GitHub sources</a> using <a href="http://sphinx-doc.org/">Sphinx</a> using a theme provided by <a href="http://readthedocs.org">Read the Docs</a>. 
</p>
</footer>
        </div>
      </div>

    </section>

  </div>
  


<!-- begin analytics -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
        (function(d,s,i,r) {
        if (d.getElementById(i)){return;}
        var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
        n.id=i;n.src = '//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
        e.parentNode.insertBefore(n, e);
        })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
_satellite.pageBottom();
}
</script>
</body>
</html>