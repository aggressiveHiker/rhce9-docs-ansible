<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frequently Asked Questions &mdash; Ansible Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/ansible.css" type="text/css" />
      <link rel="stylesheet" href="../_static/antsibull-minimal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/rtd-ethical-ads.css" type="text/css" />
    <link rel="shortcut icon" href="_static/images/Ansible-Mark-RGB_Black.svg"/>
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/reference_appendices/faq.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="yamllint" href="../dev_guide/testing/sanity/yamllint.html" /><!-- extra head elements for Ansible beyond RTD Sphinx Theme -->
<script src="https://www.redhat.com/dtm.js"></script>


<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="6">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->



<script>
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','https://s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

</head>

<body class="wy-body-for-nav"><!-- extra body elements for Ansible beyond RTD Sphinx Theme -->
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
    <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
    <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
    <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/Ansible-Mark-RGB_White.svg"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Documentation</div>
</a>
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Ansible
          </a>
              <div class="version">
                6
              </div><!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <script>
        function switchVersionTo(slug) {
          var current_url_path = window.location.pathname;
          var url_version = current_url_path.search("/6/") > -1
            ? "/6/"
            : "/latest/";
          var new_version_url = current_url_path.replace(url_version, "/" + slug + "/");
          window.location.replace(new_version_url);
        }
      </script>
      <select
          class="version-list"
          id="version-list"
          onchange="switchVersionTo(this.value);"
      >
        
        <option
            value="latest"
            
        >
            latest
        </option>
        
        <option
            value="2.9"
            
        >
            2.9
        </option>
        
        <option
            value="devel"
            
        >
            devel
        </option>
        
      </select>
    </div>
  
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Ansible getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting started with Ansible</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Ansible Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/contributions_collections.html">Ansible Collections Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/contributions.html">ansible-core Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/advanced_index.html">Advanced Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/style_guide/index.html">Ansible documentation style guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/index.html">Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/cloud_guides.html">Legacy Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/getting_started/index.html">Network Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/user_guide/index.html">Network Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/dev_guide/index.html">Network Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../collections/index.html">Collection Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collections/all_plugins.html">Indexes of all modules and plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_and_maintenance.html">Releases and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#where-did-all-the-modules-go">Where did all the modules go?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#where-did-this-specific-module-go">Where did this specific module go?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-can-i-set-the-path-or-any-other-environment-variable-for-a-task-or-entire-play">How can I set the PATH or any other environment variable for a task or entire play?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-handle-different-machines-needing-different-user-accounts-or-ports-to-log-in-with">How do I handle different machines needing different user accounts or ports to log in with?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-get-ansible-to-reuse-connections-enable-kerberized-ssh-or-have-ansible-pay-attention-to-my-local-ssh-config-file">How do I get ansible to reuse connections, enable Kerberized SSH, or have Ansible pay attention to my local SSH config file?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-configure-a-jump-host-to-access-servers-that-i-have-no-direct-access-to">How do I configure a jump host to access servers that I have no direct access to?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-get-ansible-to-notice-a-dead-target-in-a-timely-manner">How do I get Ansible to notice a dead target in a timely manner?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-speed-up-run-of-ansible-for-servers-from-cloud-providers-ec2-openstack">How do I speed up run of ansible for servers from cloud providers (EC2, openstack,.. )?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-handle-not-having-a-python-interpreter-at-usr-bin-python-on-a-remote-machine">How do I handle not having a Python interpreter at /usr/bin/python on a remote machine?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-handle-the-package-dependencies-required-by-ansible-package-dependencies-during-ansible-installation">How do I handle the package dependencies required by Ansible package dependencies during Ansible installation ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-platform-issues">Common Platform Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-customer-platforms-does-red-hat-support">What customer platforms does Red Hat support?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-in-a-virtualenv">Running in a virtualenv</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-on-macos">Running on macOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-on-bsd">Running on BSD</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-on-solaris">Running on Solaris</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-on-z-os">Running on z/OS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-under-fakeroot">Running under fakeroot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-the-best-way-to-make-content-reusable-redistributable">What is the best way to make content reusable/redistributable?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#where-does-the-configuration-file-live-and-what-can-i-configure-in-it">Where does the configuration file live and what can I configure in it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-disable-cowsay">How do I disable cowsay?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-see-a-list-of-all-of-the-ansible-variables">How do I see a list of all of the ansible_ variables?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-see-all-the-inventory-variables-defined-for-my-host">How do I see all the inventory variables defined for my host?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-see-all-the-variables-specific-to-my-host">How do I see all the variables specific to my host?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-loop-over-a-list-of-hosts-in-a-group-inside-of-a-template">How do I loop over a list of hosts in a group, inside of a template?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-access-a-variable-name-programmatically">How do I access a variable name programmatically?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-access-a-group-variable">How do I access a group variable?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-access-a-variable-of-the-first-host-in-a-group">How do I access a variable of the first host in a group?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-copy-files-recursively-onto-a-target-host">How do I copy files recursively onto a target host?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-access-shell-environment-variables">How do I access shell environment variables?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-generate-encrypted-passwords-for-the-user-module">How do I generate encrypted passwords for the user module?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ansible-allows-dot-notation-and-array-notation-for-variables-which-notation-should-i-use">Ansible allows dot notation and array notation for variables. Which notation should I use?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#when-is-it-unsafe-to-bulk-set-task-arguments-from-a-variable">When is it unsafe to bulk-set task arguments from a variable?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#can-i-get-training-on-ansible">Can I get training on Ansible?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#is-there-a-web-interface-rest-api-gui">Is there a web interface / REST API / GUI?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-keep-secret-data-in-my-playbook">How do I keep secret data in my playbook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#when-should-i-use-also-how-to-interpolate-variables-or-dynamic-variable-names">When should I use {{ }}? Also, how to interpolate variables or dynamic variable names</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-don-t-you-ship-ansible-in-wheel-format-or-other-packaging-format">Why don’t you ship ansible in wheel format (or other packaging format) ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-get-the-original-ansible-host-when-i-delegate-a-task">How do I get the original ansible_host when I delegate a task?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-fix-protocol-error-filename-does-not-match-request-when-fetching-a-file">How do I fix ‘protocol error: filename does not match request’ when fetching a file?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#does-ansible-support-multiple-factor-authentication-2fa-mfa-biometrics-finterprint-usbkey-otp">Does Ansible support multiple factor authentication 2FA/MFA/biometrics/finterprint/usbkey/OTP/…</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-validate-option-is-not-enough-for-my-needs-what-do-i-do">The ‘validate’ option is not enough for my needs, what do I do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-does-the-regex-search-filter-return-none-instead-of-an-empty-string">Why does the <code class="docutils literal notranslate"><span class="pre">regex_search</span></code> filter return <cite>None</cite> instead of an empty string?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-do-i-submit-a-change-to-the-documentation">How do I submit a change to the documentation?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#i-don-t-see-my-question-here">I don’t see my question here</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="tower.html">Red Hat Ansible Automation Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="automationhub.html">Ansible Automation Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/ansible_roadmap_index.html">Ansible Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/ansible_core_roadmap_index.html">ansible-core Roadmaps</a></li>
</ul>
<!-- extra nav elements for Ansible beyond RTD Sphinx Theme -->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Frequently Asked Questions</li>
  <li class="wy-breadcrumbs-aside">
          <!-- Ansible-specific additions for modules etc -->
            
              <a href="https://github.com/ansible/ansible/edit/devel/docs/docsite/rst/reference_appendices/faq.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
            
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  <script>
    function startsWith(str, needle) {
      return str.slice(0, needle.length) == needle
    }
    function startsWithOneOf(str, needles) {
      return needles.some(function (needle) {
        return startsWith(str, needle);
      });
    }
    var banner = '';
      var extra_banner = '';
    /*use extra_banner for when marketing wants something extra, like a survey or AnsibleFest notice
    var extra_banner =
      '<div id="latest_extra_banner_id" class="admonition important">' +
      '<br>' +
      '<p>' +
        'You\'re invited to AnsibleFest 2021! ' +
      '<p>' +
        'Explore ways to automate, innovate, and accelerate with our free virtual event September 29-30. ' +
      '<pr>' +
        '<a href="https://reg.ansiblefest.redhat.com/flow/redhat/ansible21/regGenAttendee/login?sc_cid=7013a000002pemAAAQ">Register now!</a> ' +
      '</p>' +
      '<br>' +
      '</div>'; */
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">' +
                     '<p>This is the testing site for Ansible Documentation. Unless you are reviewing pre-production changes, please visit the <a href="https://docs.ansible.com/ansible/latest/">official documentation website</a>.</p> <p></p>' +
                     '</div>');
    }
    
      // Create a banner
      current_url_path = window.location.pathname;

      var important = false;
      var msg = '<p>';
      if (startsWith(current_url_path, "/ansible-core/")) {
        msg += 'You are reading documentation for Ansible Core, which contains no plugins except for those in ansible.builtin. For documentation of the Ansible package, go to <a href="/ansible/latest">the latest documentation</a>.';
      } else if (startsWithOneOf(current_url_path, ["/ansible/latest/", "/ansible/6/"])) {
        /* temp extra banner to advertise AnsibeFest2021 */
        banner += extra_banner;

        msg += 'You are reading the <b>latest</b> (stable) community version of the Ansible documentation. Red Hat subscribers, select <b>2.9</b> in the version selection to the left for the most recent Red Hat release.';
      } else if (startsWith(current_url_path, "/ansible/2.9/")) {
        msg += 'You are reading the latest Red Hat released version of the Ansible documentation. Community users can use this version, or select <b>latest</b> from the version selector to the left for the most recent community version.';
      } else if (startsWith(current_url_path, "/ansible/devel/")) {
        /* temp extra banner to advertise AnsibleFest2021 */
        banner += extra_banner;

        /* temp banner to advertise survey
        important = true;
        msg += 'Please take our <a href="https://www.surveymonkey.co.uk/r/B9V3CDY">Docs survey</a> before December 31 to help us improve Ansible documentation.';
        */

        msg += 'You are reading the <b>devel</b> version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the <b>latest</b> (stable) released version.';
      } else {
        msg += 'You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the <b>latest</b> (stable) released version.';
      }
      msg += '</p>';

      banner += '<div id="banner_id" class="admonition ';
      banner += important ? 'important' : 'caution';
      banner += '">';
      banner += important ? '<br>' : '';
      banner += msg;
      banner += important ? '<br>' : '';
      banner += '</div>';
      document.write(banner);
    
  </script>


  
           <div itemprop="articleBody">
             
  <section id="frequently-asked-questions">
<span id="ansible-faq"></span><h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline"></a></h1>
<p>Here are some commonly asked questions and their answers.</p>
<section id="where-did-all-the-modules-go">
<span id="collections-transition"></span><h2>Where did all the modules go?<a class="headerlink" href="#where-did-all-the-modules-go" title="Permalink to this headline"></a></h2>
<p>In July, 2019, we announced that collections would be the <a class="reference external" href="https://www.ansible.com/blog/the-future-of-ansible-content-delivery">future of Ansible content delivery</a>. A collection is a distribution format for Ansible content that can include playbooks, roles, modules, and plugins. In Ansible 2.9 we added support for collections. In Ansible 2.10 we <a class="reference external" href="https://access.redhat.com/solutions/5295121">extracted most modules from the main ansible/ansible repository</a> and placed them in <a class="reference internal" href="../collections/index.html#list-of-collections"><span class="std std-ref">collections</span></a>. Collections may be maintained by the Ansible team, by the Ansible community, or by Ansible partners. The <a class="reference external" href="https://github.com/ansible/ansible">ansible/ansible repository</a> now contains the code for basic features and functions, such as copying module code to managed nodes. This code is also known as <code class="docutils literal notranslate"><span class="pre">ansible-core</span></code> (it was briefly called <code class="docutils literal notranslate"><span class="pre">ansible-base</span></code> for version 2.10).</p>
<ul class="simple">
<li><p>To learn more about using collections, see <a class="reference internal" href="../user_guide/collections_using.html#collections"><span class="std std-ref">Using collections</span></a>.</p></li>
<li><p>To learn more about developing collections, see <a class="reference internal" href="../dev_guide/developing_collections.html#developing-collections"><span class="std std-ref">Developing collections</span></a>.</p></li>
<li><p>To learn more about contributing to existing collections, see the individual collection repository for guidelines, or see <a class="reference internal" href="../community/contributing_maintained_collections.html#contributing-maintained-collections"><span class="std std-ref">Contributing to Ansible-maintained Collections</span></a> to contribute to one of the Ansible-maintained collections.</p></li>
</ul>
</section>
<section id="where-did-this-specific-module-go">
<span id="find-my-module"></span><h2>Where did this specific module go?<a class="headerlink" href="#where-did-this-specific-module-go" title="Permalink to this headline"></a></h2>
<p>IF you are searching for a specific module, you can check the <a class="reference external" href="https://github.com/ansible/ansible/blob/devel/lib/ansible/config/ansible_builtin_runtime.yml">runtime.yml</a> file, which lists the first destination for each module that we extracted from the main ansible/ansible repository. Some modules have moved again since then. You can also search on <a class="reference external" href="https://galaxy.ansible.com/">Ansible Galaxy</a> or ask on one of our <a class="reference internal" href="../community/communication.html#communication-irc"><span class="std std-ref">chat channels</span></a>.</p>
</section>
<section id="how-can-i-set-the-path-or-any-other-environment-variable-for-a-task-or-entire-play">
<span id="set-environment"></span><h2>How can I set the PATH or any other environment variable for a task or entire play?<a class="headerlink" href="#how-can-i-set-the-path-or-any-other-environment-variable-for-a-task-or-entire-play" title="Permalink to this headline"></a></h2>
<p>Setting environment variables can be done with the <cite>environment</cite> keyword. It can be used at the task or other levels in the play.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">shell</span><span class="p">:</span>
  <span class="nt">cmd</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">date</span>
<span class="nt">environment</span><span class="p">:</span>
  <span class="l l-Scalar l-Scalar-Plain">LANG=fr_FR.UTF-8</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">hosts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">servers</span>
<span class="nt">environment</span><span class="p">:</span>
  <span class="nt">PATH</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ansible_env.PATH</span><span class="nv"> </span><span class="s">}}:/thingy/bin&quot;</span>
  <span class="nt">SOME</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">value</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>starting in 2.0.1 the setup task from <code class="docutils literal notranslate"><span class="pre">gather_facts</span></code> also inherits the environment directive from the play, you might need to use the <code class="docutils literal notranslate"><span class="pre">|default</span></code> filter to avoid errors if setting this at play level.</p>
</div>
</section>
<section id="how-do-i-handle-different-machines-needing-different-user-accounts-or-ports-to-log-in-with">
<span id="faq-setting-users-and-ports"></span><h2>How do I handle different machines needing different user accounts or ports to log in with?<a class="headerlink" href="#how-do-i-handle-different-machines-needing-different-user-accounts-or-ports-to-log-in-with" title="Permalink to this headline"></a></h2>
<p>Setting inventory variables in the inventory file is the easiest way.</p>
<p>For instance, suppose these hosts have different usernames and ports:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[webservers]</span>
<span class="na">asdf.example.com  ansible_port</span><span class="o">=</span><span class="s">5000   ansible_user=alice</span>
<span class="na">jkl.example.com   ansible_port</span><span class="o">=</span><span class="s">5001   ansible_user=bob</span>
</pre></div>
</div>
<p>You can also dictate the connection type to be used, if you want:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[testcluster]</span>
<span class="na">localhost           ansible_connection</span><span class="o">=</span><span class="s">local</span>
<span class="na">/path/to/chroot1    ansible_connection</span><span class="o">=</span><span class="s">chroot</span>
<span class="na">foo.example.com     ansible_connection</span><span class="o">=</span><span class="s">paramiko</span>
</pre></div>
</div>
<p>You may also wish to keep these in group variables instead, or file them in a group_vars/&lt;groupname&gt; file.
See the rest of the documentation for more information about how to organize variables.</p>
</section>
<section id="how-do-i-get-ansible-to-reuse-connections-enable-kerberized-ssh-or-have-ansible-pay-attention-to-my-local-ssh-config-file">
<span id="use-ssh"></span><h2>How do I get ansible to reuse connections, enable Kerberized SSH, or have Ansible pay attention to my local SSH config file?<a class="headerlink" href="#how-do-i-get-ansible-to-reuse-connections-enable-kerberized-ssh-or-have-ansible-pay-attention-to-my-local-ssh-config-file" title="Permalink to this headline"></a></h2>
<p>Switch your default connection type in the configuration file to <code class="docutils literal notranslate"><span class="pre">ssh</span></code>, or use <code class="docutils literal notranslate"><span class="pre">-c</span> <span class="pre">ssh</span></code> to use
Native OpenSSH for connections instead of the python paramiko library. In Ansible 1.2.1 and later, <code class="docutils literal notranslate"><span class="pre">ssh</span></code> will be used
by default if OpenSSH is new enough to support ControlPersist as an option.</p>
<p>Paramiko is great for starting out, but the OpenSSH type offers many advanced options. You will want to run Ansible
from a machine new enough to support ControlPersist, if you are using this connection type. You can still manage
older clients. If you are using RHEL 6, CentOS 6, SLES 10 or SLES 11 the version of OpenSSH is still a bit old, so
consider managing from a Fedora or openSUSE client even though you are managing older nodes, or just use paramiko.</p>
<p>We keep paramiko as the default as if you are first installing Ansible on these enterprise operating systems, it offers a better experience for new users.</p>
</section>
<section id="how-do-i-configure-a-jump-host-to-access-servers-that-i-have-no-direct-access-to">
<span id="use-ssh-jump-hosts"></span><h2>How do I configure a jump host to access servers that I have no direct access to?<a class="headerlink" href="#how-do-i-configure-a-jump-host-to-access-servers-that-i-have-no-direct-access-to" title="Permalink to this headline"></a></h2>
<p>You can set a <code class="docutils literal notranslate"><span class="pre">ProxyCommand</span></code> in the
<code class="docutils literal notranslate"><span class="pre">ansible_ssh_common_args</span></code> inventory variable. Any arguments specified in
this variable are added to the sftp/scp/ssh command line when connecting
to the relevant host(s). Consider the following inventory group:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[gatewayed]</span>
<span class="na">foo ansible_host</span><span class="o">=</span><span class="s">192.0.2.1</span>
<span class="na">bar ansible_host</span><span class="o">=</span><span class="s">192.0.2.2</span>
</pre></div>
</div>
<p>You can create <cite>group_vars/gatewayed.yml</cite> with the following contents:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="nt">ansible_ssh_common_args</span><span class="p">:</span> <span class="s">&#39;-o</span><span class="nv"> </span><span class="s">ProxyCommand=&quot;ssh</span><span class="nv"> </span><span class="s">-W</span><span class="nv"> </span><span class="s">%h:%p</span><span class="nv"> </span><span class="s">-q</span><span class="nv"> </span><span class="s"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b9cccadccbf9ded8cddcced8c097dcc1d8d4c9d5dc97dad6d4">[email&#160;protected]</a>&quot;&#39;</span>
</pre></div>
</div>
<p>Ansible will append these arguments to the command line when trying to
connect to any hosts in the group <code class="docutils literal notranslate"><span class="pre">gatewayed</span></code>. (These arguments are used
in addition to any <code class="docutils literal notranslate"><span class="pre">ssh_args</span></code> from <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code>, so you do not need to
repeat global <code class="docutils literal notranslate"><span class="pre">ControlPersist</span></code> settings in <code class="docutils literal notranslate"><span class="pre">ansible_ssh_common_args</span></code>.)</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">-W</span></code> is available only with OpenSSH 5.4 or later. With
older versions, it’s necessary to execute <code class="docutils literal notranslate"><span class="pre">nc</span> <span class="pre">%h:%p</span></code> or some equivalent
command on the bastion host.</p>
<p>With earlier versions of Ansible, it was necessary to configure a
suitable <code class="docutils literal notranslate"><span class="pre">ProxyCommand</span></code> for one or more hosts in <code class="docutils literal notranslate"><span class="pre">~/.ssh/config</span></code>,
or globally by setting <code class="docutils literal notranslate"><span class="pre">ssh_args</span></code> in <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code>.</p>
</section>
<section id="how-do-i-get-ansible-to-notice-a-dead-target-in-a-timely-manner">
<span id="ssh-serveraliveinterval"></span><h2>How do I get Ansible to notice a dead target in a timely manner?<a class="headerlink" href="#how-do-i-get-ansible-to-notice-a-dead-target-in-a-timely-manner" title="Permalink to this headline"></a></h2>
<p>You can add <code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">ServerAliveInterval=NumberOfSeconds</span></code> in <code class="docutils literal notranslate"><span class="pre">ssh_args</span></code> from <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code>. Without this option,
SSH and therefore Ansible will wait until the TCP connection times out. Another solution is to add <code class="docutils literal notranslate"><span class="pre">ServerAliveInterval</span></code>
into your global SSH configuration. A good value for <code class="docutils literal notranslate"><span class="pre">ServerAliveInterval</span></code> is up to you to decide; keep in mind that
<code class="docutils literal notranslate"><span class="pre">ServerAliveCountMax=3</span></code> is the SSH default so any value you set will be tripled before terminating the SSH session.</p>
</section>
<section id="how-do-i-speed-up-run-of-ansible-for-servers-from-cloud-providers-ec2-openstack">
<span id="cloud-provider-performance"></span><h2>How do I speed up run of ansible for servers from cloud providers (EC2, openstack,.. )?<a class="headerlink" href="#how-do-i-speed-up-run-of-ansible-for-servers-from-cloud-providers-ec2-openstack" title="Permalink to this headline"></a></h2>
<p>Don’t try to manage a fleet of machines of a cloud provider from your laptop.
Rather connect to a management node inside this cloud provider first and run Ansible from there.</p>
</section>
<section id="how-do-i-handle-not-having-a-python-interpreter-at-usr-bin-python-on-a-remote-machine">
<span id="python-interpreters"></span><h2>How do I handle not having a Python interpreter at /usr/bin/python on a remote machine?<a class="headerlink" href="#how-do-i-handle-not-having-a-python-interpreter-at-usr-bin-python-on-a-remote-machine" title="Permalink to this headline"></a></h2>
<p>While you can write Ansible modules in any language, most Ansible modules are written in Python,
including the ones central to letting Ansible work.</p>
<p>By default, Ansible assumes it can find a <strong class="command">/usr/bin/python</strong> on your remote system that is
either Python2, version 2.6 or higher or Python3, 3.5 or higher.</p>
<p>Setting the inventory variable <code class="docutils literal notranslate"><span class="pre">ansible_python_interpreter</span></code> on any host will tell Ansible to
auto-replace the Python interpreter with that value instead. Thus, you can point to any Python you
want on the system if <strong class="command">/usr/bin/python</strong> on your system does not point to a compatible
Python interpreter.</p>
<p>Some platforms may only have Python 3 installed by default. If it is not installed as
<strong class="command">/usr/bin/python</strong>, you will need to configure the path to the interpreter via
<code class="docutils literal notranslate"><span class="pre">ansible_python_interpreter</span></code>. Although most core modules will work with Python 3, there may be some
special purpose ones which do not or you may encounter a bug in an edge case. As a temporary
workaround you can install Python 2 on the managed host and configure Ansible to use that Python via
<code class="docutils literal notranslate"><span class="pre">ansible_python_interpreter</span></code>. If there’s no mention in the module’s documentation that the module
requires Python 2, you can also report a bug on our <a class="reference external" href="https://github.com/ansible/ansible/issues">bug tracker</a> so that the incompatibility can be fixed in a future release.</p>
<p>Do not replace the shebang lines of your python modules. Ansible will do this for you automatically at deploy time.</p>
<p>Also, this works for ANY interpreter, for example ruby: <code class="docutils literal notranslate"><span class="pre">ansible_ruby_interpreter</span></code>, perl: <code class="docutils literal notranslate"><span class="pre">ansible_perl_interpreter</span></code>, and so on,
so you can use this for custom modules written in any scripting language and control the interpreter location.</p>
<p>Keep in mind that if you put <code class="docutils literal notranslate"><span class="pre">env</span></code> in your module shebang line (<code class="docutils literal notranslate"><span class="pre">#!/usr/bin/env</span> <span class="pre">&lt;other&gt;</span></code>),
this facility will be ignored so you will be at the mercy of the remote <cite>$PATH</cite>.</p>
</section>
<section id="how-do-i-handle-the-package-dependencies-required-by-ansible-package-dependencies-during-ansible-installation">
<span id="installation-faqs"></span><h2>How do I handle the package dependencies required by Ansible package dependencies during Ansible installation ?<a class="headerlink" href="#how-do-i-handle-the-package-dependencies-required-by-ansible-package-dependencies-during-ansible-installation" title="Permalink to this headline"></a></h2>
<p>While installing Ansible, sometimes you may encounter errors such as <cite>No package ‘libffi’ found</cite> or <cite>fatal error: Python.h: No such file or directory</cite>
These errors are generally caused by the missing packages, which are dependencies of the packages required by Ansible.
For example, <cite>libffi</cite> package is dependency of <cite>pynacl</cite> and <cite>paramiko</cite> (Ansible -&gt; paramiko -&gt; pynacl -&gt; libffi).</p>
<p>In order to solve these kinds of dependency issues, you might need to install required packages using
the OS native package managers, such as <cite>yum</cite>, <cite>dnf</cite>, or <cite>apt</cite>, or as mentioned in the package installation guide.</p>
<p>Refer to the documentation of the respective package for such dependencies and their installation methods.</p>
</section>
<section id="common-platform-issues">
<h2>Common Platform Issues<a class="headerlink" href="#common-platform-issues" title="Permalink to this headline"></a></h2>
<section id="what-customer-platforms-does-red-hat-support">
<h3>What customer platforms does Red Hat support?<a class="headerlink" href="#what-customer-platforms-does-red-hat-support" title="Permalink to this headline"></a></h3>
<p>A number of them! For a definitive list please see this <a class="reference external" href="https://access.redhat.com/articles/3168091">Knowledge Base article</a>.</p>
</section>
<section id="running-in-a-virtualenv">
<h3>Running in a virtualenv<a class="headerlink" href="#running-in-a-virtualenv" title="Permalink to this headline"></a></h3>
<p>You can install Ansible into a virtualenv on the controller quite simply:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ virtualenv ansible
$ <span class="nb">source</span> ./ansible/bin/activate
$ pip install ansible
</pre></div>
</div>
<p>If you want to run under Python 3 instead of Python 2 you may want to change that slightly:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ virtualenv -p python3 ansible
$ <span class="nb">source</span> ./ansible/bin/activate
$ pip install ansible
</pre></div>
</div>
<p>If you need to use any libraries which are not available via pip (for instance, SELinux Python
bindings on systems such as Red Hat Enterprise Linux or Fedora that have SELinux enabled), then you
need to install them into the virtualenv. There are two methods:</p>
<ul>
<li><p>When you create the virtualenv, specify <code class="docutils literal notranslate"><span class="pre">--system-site-packages</span></code> to make use of any libraries
installed in the system’s Python:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ virtualenv ansible --system-site-packages
</pre></div>
</div>
</li>
<li><p>Copy those files in manually from the system. For instance, for SELinux bindings you might do:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ virtualenv ansible --system-site-packages
$ cp -r -v /usr/lib64/python3.*/site-packages/selinux/ ./py3-ansible/lib64/python3.*/site-packages/
$ cp -v /usr/lib64/python3.*/site-packages/*selinux*.so ./py3-ansible/lib64/python3.*/site-packages/
</pre></div>
</div>
</li>
</ul>
</section>
<section id="running-on-macos">
<h3>Running on macOS<a class="headerlink" href="#running-on-macos" title="Permalink to this headline"></a></h3>
<p>When executing Ansible on a system with macOS as a controller machine one might encounter the following error:</p>
<blockquote>
<div><div class="admonition error">
<p class="admonition-title">Error</p>
<p>+[__NSCFConstantString initialize] may have been in progress in another thread when fork() was called. We cannot safely call it or ignore it in the fork() child process. Crashing instead. Set a breakpoint on objc_initializeAfterForkError to debug.
ERROR! A worker was found in a dead state</p>
</div>
</div></blockquote>
<p>In general the recommended workaround is to set the following environment variable in your shell:</p>
<blockquote>
<div><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">OBJC_DISABLE_INITIALIZE_FORK_SAFETY</span><span class="o">=</span>YES
</pre></div>
</div>
</div></blockquote>
</section>
<section id="running-on-bsd">
<h3>Running on BSD<a class="headerlink" href="#running-on-bsd" title="Permalink to this headline"></a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../user_guide/intro_bsd.html#working-with-bsd"><span class="std std-ref">Ansible and BSD</span></a></p>
</div>
</section>
<section id="running-on-solaris">
<h3>Running on Solaris<a class="headerlink" href="#running-on-solaris" title="Permalink to this headline"></a></h3>
<p>By default, Solaris 10 and earlier run a non-POSIX shell which does not correctly expand the default
tmp directory Ansible uses ( <code class="file docutils literal notranslate"><span class="pre">~/.ansible/tmp</span></code>). If you see module failures on Solaris machines, this
is likely the problem. There are several workarounds:</p>
<ul>
<li><p>You can set <code class="docutils literal notranslate"><span class="pre">remote_tmp</span></code> to a path that will expand correctly with the shell you are using
(see the plugin documentation for <a class="reference external" href="https://docs.ansible.com/ansible/2.9/plugins/shell/csh.html#csh-shell" title="(in Ansible v2.9)"><span class="xref std std-ref">C shell</span></a>, <a class="reference external" href="https://docs.ansible.com/ansible/2.9/plugins/shell/fish.html#fish-shell" title="(in Ansible v2.9)"><span class="xref std std-ref">fish shell</span></a>,
and <a class="reference internal" href="../collections/ansible/builtin/powershell_shell.html#powershell-shell"><span class="std std-ref">Powershell</span></a>). For example, in the ansible config file you can set:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">remote_tmp=$HOME/.ansible/tmp</span>
</pre></div>
</div>
<p>In Ansible 2.5 and later, you can also set it per-host in inventory like this:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">solaris1 ansible_remote_tmp=$HOME/.ansible/tmp</span>
</pre></div>
</div>
</li>
<li><p>You can set <a class="reference internal" href="../user_guide/intro_inventory.html#ansible-shell-executable"><span class="std std-ref">ansible_shell_executable</span></a> to the path to a POSIX compatible shell. For
instance, many Solaris hosts have a POSIX shell located at <code class="file docutils literal notranslate"><span class="pre">/usr/xpg4/bin/sh</span></code> so you can set
this in inventory like so:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">solaris1 ansible_shell_executable=/usr/xpg4/bin/sh</span>
</pre></div>
</div>
<p>(bash, ksh, and zsh should also be POSIX compatible if you have any of those installed).</p>
</li>
</ul>
</section>
<section id="running-on-z-os">
<h3>Running on z/OS<a class="headerlink" href="#running-on-z-os" title="Permalink to this headline"></a></h3>
<p>There are a few common errors that one might run into when trying to execute Ansible on z/OS as a target.</p>
<ul>
<li><p>Version 2.7.6 of python for z/OS will not work with Ansible because it represents strings internally as EBCDIC.</p>
<p>To get around this limitation, download and install a later version of <a class="reference external" href="https://www.rocketsoftware.com/zos-open-source">python for z/OS</a> (2.7.13 or 3.6.1) that represents strings internally as ASCII. Version 2.7.13 is verified to work.</p>
</li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">pipelining</span> <span class="pre">=</span> <span class="pre">False</span></code> in <cite>/etc/ansible/ansible.cfg</cite> then Ansible modules are transferred in binary mode via sftp however execution of python fails with</p>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>SyntaxError: Non-UTF-8 code starting with '\x83' in file /a/user1/.ansible/tmp/ansible-tmp-1548232945.35-274513842609025/AnsiballZ_stat.py on line 1, but no encoding declared; see <a class="reference external" href="https://python.org/dev/peps/pep-0263/">https://python.org/dev/peps/pep-0263/</a> for details</p>
</div>
<p>To fix it set <code class="docutils literal notranslate"><span class="pre">pipelining</span> <span class="pre">=</span> <span class="pre">True</span></code> in <cite>/etc/ansible/ansible.cfg</cite>.</p>
</li>
<li><p>Python interpret cannot be found in default location <code class="docutils literal notranslate"><span class="pre">/usr/bin/python</span></code> on target host.</p>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>/usr/bin/python: EDC5129I No such file or directory</p>
</div>
<p>To fix this set the path to the python installation in your inventory like so:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">zos1 ansible_python_interpreter=/usr/lpp/python/python-2017-04-12-py27/python27/bin/python</span>
</pre></div>
</div>
</li>
<li><p>Start of python fails with <code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">module</span> <span class="pre">libpython2.7.so</span> <span class="pre">was</span> <span class="pre">not</span> <span class="pre">found.</span></code></p>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>EE3501S The module libpython2.7.so was not found.</p>
</div>
<p>On z/OS, you must execute python from gnu bash. If gnu bash is installed at <code class="docutils literal notranslate"><span class="pre">/usr/lpp/bash</span></code>, you can fix this in your inventory by specifying an <code class="docutils literal notranslate"><span class="pre">ansible_shell_executable</span></code>:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">zos1 ansible_shell_executable=/usr/lpp/bash/bin/bash</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="running-under-fakeroot">
<h3>Running under fakeroot<a class="headerlink" href="#running-under-fakeroot" title="Permalink to this headline"></a></h3>
<p>Some issues arise as <code class="docutils literal notranslate"><span class="pre">fakeroot</span></code> does not create a full nor POSIX compliant system by default.
It is known that it will not correctly expand the default tmp directory Ansible uses (<code class="file docutils literal notranslate"><span class="pre">~/.ansible/tmp</span></code>).
If you see module failures, this is likely the problem.
The simple workaround is to set <code class="docutils literal notranslate"><span class="pre">remote_tmp</span></code> to a path that will expand correctly (see documentation of the shell plugin you are using for specifics).</p>
<p>For example, in the ansible config file (or via environment variable) you can set:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">remote_tmp=$HOME/.ansible/tmp</span>
</pre></div>
</div>
</section>
</section>
<section id="what-is-the-best-way-to-make-content-reusable-redistributable">
<span id="use-roles"></span><h2>What is the best way to make content reusable/redistributable?<a class="headerlink" href="#what-is-the-best-way-to-make-content-reusable-redistributable" title="Permalink to this headline"></a></h2>
<p>If you have not done so already, read all about “Roles” in the playbooks documentation. This helps you make playbook content
self-contained, and works well with things like git submodules for sharing content with others.</p>
<p>If some of these plugin types look strange to you, see the API documentation for more details about ways Ansible can be extended.</p>
</section>
<section id="where-does-the-configuration-file-live-and-what-can-i-configure-in-it">
<span id="configuration-file"></span><h2>Where does the configuration file live and what can I configure in it?<a class="headerlink" href="#where-does-the-configuration-file-live-and-what-can-i-configure-in-it" title="Permalink to this headline"></a></h2>
<p>See <a class="reference internal" href="../installation_guide/intro_configuration.html#intro-configuration"><span class="std std-ref">Configuring Ansible</span></a>.</p>
</section>
<section id="how-do-i-disable-cowsay">
<span id="who-would-ever-want-to-disable-cowsay-but-ok-here-is-how"></span><h2>How do I disable cowsay?<a class="headerlink" href="#how-do-i-disable-cowsay" title="Permalink to this headline"></a></h2>
<p>If cowsay is installed, Ansible takes it upon itself to make your day happier when running playbooks. If you decide
that you would like to work in a professional cow-free environment, you can either uninstall cowsay, set <code class="docutils literal notranslate"><span class="pre">nocows=1</span></code>
in <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code>, or set the <span class="target" id="index-0"></span><a class="reference internal" href="config.html#envvar-ANSIBLE_NOCOWS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ANSIBLE_NOCOWS</span></code></a> environment variable:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">export ANSIBLE_NOCOWS=1</span>
</pre></div>
</div>
</section>
<section id="how-do-i-see-a-list-of-all-of-the-ansible-variables">
<span id="browse-facts"></span><h2>How do I see a list of all of the ansible_ variables?<a class="headerlink" href="#how-do-i-see-a-list-of-all-of-the-ansible-variables" title="Permalink to this headline"></a></h2>
<p>Ansible by default gathers “facts” about the machines under management, and these facts can be accessed in playbooks
and in templates. To see a list of all of the facts that are available about a machine, you can run the <code class="docutils literal notranslate"><span class="pre">setup</span></code> module
as an ad hoc action:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">ansible -m setup hostname</span>
</pre></div>
</div>
<p>This will print out a dictionary of all of the facts that are available for that particular host. You might want to pipe
the output to a pager.This does NOT include inventory variables or internal ‘magic’ variables. See the next question
if you need more than just ‘facts’.</p>
</section>
<section id="how-do-i-see-all-the-inventory-variables-defined-for-my-host">
<span id="browse-inventory-vars"></span><h2>How do I see all the inventory variables defined for my host?<a class="headerlink" href="#how-do-i-see-all-the-inventory-variables-defined-for-my-host" title="Permalink to this headline"></a></h2>
<p>By running the following command, you can see inventory variables for a host:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">ansible-inventory --list --yaml</span>
</pre></div>
</div>
</section>
<section id="how-do-i-see-all-the-variables-specific-to-my-host">
<span id="browse-host-vars"></span><h2>How do I see all the variables specific to my host?<a class="headerlink" href="#how-do-i-see-all-the-variables-specific-to-my-host" title="Permalink to this headline"></a></h2>
<p>To see all host specific variables, which might include facts and other sources:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">ansible -m debug -a &quot;var=hostvars[&#39;hostname&#39;]&quot; localhost</span>
</pre></div>
</div>
<p>Unless you are using a fact cache, you normally need to use a play that gathers facts first, for facts included in the task above.</p>
</section>
<section id="how-do-i-loop-over-a-list-of-hosts-in-a-group-inside-of-a-template">
<span id="host-loops"></span><h2>How do I loop over a list of hosts in a group, inside of a template?<a class="headerlink" href="#how-do-i-loop-over-a-list-of-hosts-in-a-group-inside-of-a-template" title="Permalink to this headline"></a></h2>
<p>A pretty common pattern is to iterate over a list of hosts inside of a host group, perhaps to populate a template configuration
file with a list of servers. To do this, you can just access the “$groups” dictionary in your template, like this:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">host</span> <span class="k">in</span> <span class="nv">groups</span><span class="o">[</span><span class="s1">&#39;db_servers&#39;</span><span class="o">]</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">host</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>If you need to access facts about these hosts, for instance, the IP address of each hostname,
you need to make sure that the facts have been populated. For example, make sure you have a play that talks to db_servers:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">hosts</span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">db_servers</span>
  <span class="nt">tasks</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">msg=&quot;doesn&#39;t matter what you do, just that they were talked to previously.&quot;</span>
</pre></div>
</div>
<p>Then you can use the facts inside your template, like this:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">host</span> <span class="k">in</span> <span class="nv">groups</span><span class="o">[</span><span class="s1">&#39;db_servers&#39;</span><span class="o">]</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">   </span><span class="cp">{{</span> <span class="nv">hostvars</span><span class="o">[</span><span class="nv">host</span><span class="o">][</span><span class="s1">&#39;ansible_eth0&#39;</span><span class="o">][</span><span class="s1">&#39;ipv4&#39;</span><span class="o">][</span><span class="s1">&#39;address&#39;</span><span class="o">]</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</section>
<section id="how-do-i-access-a-variable-name-programmatically">
<span id="programatic-access-to-a-variable"></span><h2>How do I access a variable name programmatically?<a class="headerlink" href="#how-do-i-access-a-variable-name-programmatically" title="Permalink to this headline"></a></h2>
<p>An example may come up where we need to get the ipv4 address of an arbitrary interface, where the interface to be used may be supplied
via a role parameter or other input. Variable names can be built by adding strings together using “~”, like so:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">hostvars</span><span class="o">[</span><span class="nv">inventory_hostname</span><span class="o">][</span><span class="s1">&#39;ansible_&#39;</span> <span class="o">~</span> <span class="nv">which_interface</span><span class="o">][</span><span class="s1">&#39;ipv4&#39;</span><span class="o">][</span><span class="s1">&#39;address&#39;</span><span class="o">]</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>The trick about going through hostvars is necessary because it’s a dictionary of the entire namespace of variables. <code class="docutils literal notranslate"><span class="pre">inventory_hostname</span></code>
is a magic variable that indicates the current host you are looping over in the host loop.</p>
<p>In the example above, if your interface names have dashes, you must replace them with underscores:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">hostvars</span><span class="o">[</span><span class="nv">inventory_hostname</span><span class="o">][</span><span class="s1">&#39;ansible_&#39;</span> <span class="o">~</span> <span class="nv">which_interface</span> <span class="o">|</span> <span class="nf">replace</span><span class="o">(</span><span class="s1">&#39;_&#39;</span><span class="o">,</span> <span class="s1">&#39;-&#39;</span><span class="o">)</span> <span class="o">][</span><span class="s1">&#39;ipv4&#39;</span><span class="o">][</span><span class="s1">&#39;address&#39;</span><span class="o">]</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>Also see <a class="reference internal" href="#dynamic-variables">dynamic_variables</a>.</p>
</section>
<section id="how-do-i-access-a-group-variable">
<span id="access-group-variable"></span><h2>How do I access a group variable?<a class="headerlink" href="#how-do-i-access-a-group-variable" title="Permalink to this headline"></a></h2>
<p>Technically, you don’t, Ansible does not really use groups directly. Groups are labels for host selection and a way to bulk assign variables,
they are not a first class entity, Ansible only cares about Hosts and Tasks.</p>
<p>That said, you could just access the variable by selecting a host that is part of that group, see <a class="reference internal" href="#first-host-in-a-group">first_host_in_a_group</a> below for an example.</p>
</section>
<section id="how-do-i-access-a-variable-of-the-first-host-in-a-group">
<span id="first-host-in-a-group"></span><h2>How do I access a variable of the first host in a group?<a class="headerlink" href="#how-do-i-access-a-variable-of-the-first-host-in-a-group" title="Permalink to this headline"></a></h2>
<p>What happens if we want the ip address of the first webserver in the webservers group?  Well, we can do that too. Note that if we
are using dynamic inventory, which host is the ‘first’ may not be consistent, so you wouldn’t want to do this unless your inventory
is static and predictable. (If you are using AWX or the <a class="reference internal" href="tower.html#ansible-platform"><span class="std std-ref">Red Hat Ansible Automation Platform</span></a>, it will use database order, so this isn’t a problem even if you are using cloud
based inventory scripts).</p>
<p>Anyway, here’s the trick:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">hostvars</span><span class="o">[</span><span class="nv">groups</span><span class="o">[</span><span class="s1">&#39;webservers&#39;</span><span class="o">][</span><span class="m">0</span><span class="o">]][</span><span class="s1">&#39;ansible_eth0&#39;</span><span class="o">][</span><span class="s1">&#39;ipv4&#39;</span><span class="o">][</span><span class="s1">&#39;address&#39;</span><span class="o">]</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>Notice how we’re pulling out the hostname of the first machine of the webservers group. If you are doing this in a template, you
could use the Jinja2 ‘#set’ directive to simplify this, or in a playbook, you could also use set_fact:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">set_fact</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">headnode=</span><span class="cp">{{</span> <span class="nv">groups</span><span class="o">[</span><span class="s1">&#39;webservers&#39;</span><span class="o">][</span><span class="m">0</span><span class="o">]</span> <span class="cp">}}</span>

<span class="p p-Indicator">-</span> <span class="nt">debug</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">msg=</span><span class="cp">{{</span> <span class="nv">hostvars</span><span class="o">[</span><span class="nv">headnode</span><span class="o">]</span><span class="nv">.ansible_eth0.ipv4.address</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Notice how we interchanged the bracket syntax for dots – that can be done anywhere.</p>
</section>
<section id="how-do-i-copy-files-recursively-onto-a-target-host">
<span id="file-recursion"></span><h2>How do I copy files recursively onto a target host?<a class="headerlink" href="#how-do-i-copy-files-recursively-onto-a-target-host" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">copy</span></code> module has a recursive parameter. However, take a look at the <code class="docutils literal notranslate"><span class="pre">synchronize</span></code> module if you want to do something more efficient
for a large number of files. The <code class="docutils literal notranslate"><span class="pre">synchronize</span></code> module wraps rsync. See the module index for info on both of these modules.</p>
</section>
<section id="how-do-i-access-shell-environment-variables">
<span id="shell-env"></span><h2>How do I access shell environment variables?<a class="headerlink" href="#how-do-i-access-shell-environment-variables" title="Permalink to this headline"></a></h2>
<p><strong>On controller machine :</strong> Access existing variables from controller use the <code class="docutils literal notranslate"><span class="pre">env</span></code> lookup plugin.
For example, to access the value of the HOME environment variable on the management machine:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="c1"># ...</span>
  <span class="nt">vars</span><span class="p">:</span>
     <span class="nt">local_home</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">lookup</span><span class="o">(</span><span class="s1">&#39;env&#39;</span><span class="o">,</span><span class="s1">&#39;HOME&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<p><strong>On target machines :</strong> Environment variables are available via facts in the <code class="docutils literal notranslate"><span class="pre">ansible_env</span></code> variable:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">ansible_env.HOME</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>If you need to set environment variables for TASK execution, see <a class="reference internal" href="../user_guide/playbooks_environment.html#playbooks-environment"><span class="std std-ref">Setting the remote environment</span></a>
in the <a class="reference internal" href="../user_guide/playbooks_special_topics.html#playbooks-special-topics"><span class="std std-ref">Advanced Playbooks</span></a> section.
There are several ways to set environment variables on your target machines. You can use the
<a class="reference internal" href="../collections/ansible/builtin/template_module.html#template-module"><span class="std std-ref">template</span></a>, <a class="reference internal" href="../collections/ansible/builtin/replace_module.html#replace-module"><span class="std std-ref">replace</span></a>, or <a class="reference internal" href="../collections/ansible/builtin/lineinfile_module.html#lineinfile-module"><span class="std std-ref">lineinfile</span></a>
modules to introduce environment variables into files.  The exact files to edit vary depending on your OS
and distribution and local configuration.</p>
</section>
<section id="how-do-i-generate-encrypted-passwords-for-the-user-module">
<span id="user-passwords"></span><h2>How do I generate encrypted passwords for the user module?<a class="headerlink" href="#how-do-i-generate-encrypted-passwords-for-the-user-module" title="Permalink to this headline"></a></h2>
<p>Ansible ad hoc command is the easiest option:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">ansible all -i localhost, -m debug -a &quot;msg={{ &#39;mypassword&#39; | password_hash(&#39;sha512&#39;, &#39;mysecretsalt&#39;) }}&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">mkpasswd</span></code> utility that is available on most Linux systems is also a great option:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">mkpasswd --method=sha-512</span>
</pre></div>
</div>
<p>If this utility is not installed on your system (for example, you are using macOS) then you can still easily
generate these passwords using Python. First, ensure that the <a class="reference external" href="https://foss.heptapod.net/python-libs/passlib/-/wikis/home">Passlib</a>
password hashing library is installed:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">pip install passlib</span>
</pre></div>
</div>
<p>Once the library is ready, SHA512 password values can then be generated as follows:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="go">python -c &quot;from passlib.hash import sha512_crypt; import getpass; print(sha512_crypt.using(rounds=5000).hash(getpass.getpass()))&quot;</span>
</pre></div>
</div>
<p>Use the integrated <a class="reference internal" href="../user_guide/playbooks_filters.html#hash-filters"><span class="std std-ref">Hashing and encrypting strings and passwords</span></a> to generate a hashed version of a password.
You shouldn’t put plaintext passwords in your playbook or host_vars; instead, use <a class="reference internal" href="../user_guide/vault.html#playbooks-vault"><span class="std std-ref">Using encrypted variables and files</span></a> to encrypt sensitive data.</p>
<p>In OpenBSD, a similar option is available in the base system called <code class="docutils literal notranslate"><span class="pre">encrypt</span> <span class="pre">(1)</span></code></p>
</section>
<section id="ansible-allows-dot-notation-and-array-notation-for-variables-which-notation-should-i-use">
<span id="dot-or-array-notation"></span><h2>Ansible allows dot notation and array notation for variables. Which notation should I use?<a class="headerlink" href="#ansible-allows-dot-notation-and-array-notation-for-variables-which-notation-should-i-use" title="Permalink to this headline"></a></h2>
<p>The dot notation comes from Jinja and works fine for variables without special
characters. If your variable contains dots (.), colons (:), or dashes (-), if
a key begins and ends with two underscores, or if a key uses any of the known
public attributes, it is safer to use the array notation. See <a class="reference internal" href="../user_guide/playbooks_variables.html#playbooks-variables"><span class="std std-ref">Using Variables</span></a>
for a list of the known public attributes.</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="x">item[0][&#39;checksum:md5&#39;]</span>
<span class="x">item[&#39;section&#39;][&#39;2.1&#39;]</span>
<span class="x">item[&#39;region&#39;][&#39;Mid-Atlantic&#39;]</span>
<span class="x">It is </span><span class="cp">{{</span> <span class="nv">temperature</span><span class="o">[</span><span class="s1">&#39;Celsius&#39;</span><span class="o">][</span><span class="s1">&#39;-3&#39;</span><span class="o">]</span> <span class="cp">}}</span><span class="x"> outside.</span>
</pre></div>
</div>
<p>Also array notation allows for dynamic variable composition, see <a class="reference internal" href="#dynamic-variables">dynamic_variables</a>.</p>
<p>Another problem with ‘dot notation’ is that some keys can cause problems because they collide with attributes and methods of python dictionaries.</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="x">item.update # this breaks if item is a dictionary, as &#39;update()&#39; is a python method for dictionaries</span>
<span class="x">item[&#39;update&#39;] # this works</span>
</pre></div>
</div>
</section>
<section id="when-is-it-unsafe-to-bulk-set-task-arguments-from-a-variable">
<span id="argsplat-unsafe"></span><h2>When is it unsafe to bulk-set task arguments from a variable?<a class="headerlink" href="#when-is-it-unsafe-to-bulk-set-task-arguments-from-a-variable" title="Permalink to this headline"></a></h2>
<p>You can set all of a task’s arguments from a dictionary-typed variable. This
technique can be useful in some dynamic execution scenarios. However, it
introduces a security risk. We do not recommend it, so Ansible issues a
warning when you do something like this:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="c1">#...</span>
<span class="nt">vars</span><span class="p">:</span>
  <span class="nt">usermod_args</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">testuser</span>
    <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">present</span>
    <span class="nt">update_password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
<span class="nt">tasks</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">user</span><span class="p">:</span> <span class="s">&#39;</span><span class="cp">{{</span> <span class="nv">usermod_args</span> <span class="cp">}}</span><span class="s">&#39;</span>
</pre></div>
</div>
<p>This particular example is safe. However, constructing tasks like this is
risky because the parameters and values passed to <code class="docutils literal notranslate"><span class="pre">usermod_args</span></code> could
be overwritten by malicious values in the <code class="docutils literal notranslate"><span class="pre">host</span> <span class="pre">facts</span></code> on a compromised
target machine. To mitigate this risk:</p>
<ul class="simple">
<li><p>set bulk variables at a level of precedence greater than <code class="docutils literal notranslate"><span class="pre">host</span> <span class="pre">facts</span></code> in the order of precedence
found in <a class="reference internal" href="../user_guide/playbooks_variables.html#ansible-variable-precedence"><span class="std std-ref">Variable precedence: Where should I put a variable?</span></a> (the example above is safe because play vars take
precedence over facts)</p></li>
<li><p>disable the <a class="reference internal" href="config.html#inject-facts-as-vars"><span class="std std-ref">INJECT_FACTS_AS_VARS</span></a> configuration setting to prevent fact values from colliding
with variables (this will also disable the original warning)</p></li>
</ul>
</section>
<section id="can-i-get-training-on-ansible">
<span id="commercial-support"></span><h2>Can I get training on Ansible?<a class="headerlink" href="#can-i-get-training-on-ansible" title="Permalink to this headline"></a></h2>
<p>Yes! See our <a class="reference external" href="https://www.ansible.com/products/consulting">services page</a> for information on our services
and training offerings. Email <a class="reference external" href="/cdn-cgi/l/email-protection#bed7d0d8d1989d8d8985989d8b8c85989d8a8685dfd0cdd7dcd2db989d8a8885ddd1d3">info<span>&#64;</span>ansible<span>&#46;</span>com</a> for further details.</p>
<p>We also offer free web-based training classes on a regular basis. See our
<a class="reference external" href="https://www.ansible.com/resources/webinars-training">webinar page</a> for more info on upcoming webinars.</p>
</section>
<section id="is-there-a-web-interface-rest-api-gui">
<span id="web-interface"></span><h2>Is there a web interface / REST API / GUI?<a class="headerlink" href="#is-there-a-web-interface-rest-api-gui" title="Permalink to this headline"></a></h2>
<p>Yes! The open-source web interface is Ansible AWX. The supported Red Hat product that makes Ansible even more powerful and easy to use is <a class="reference internal" href="tower.html#ansible-platform"><span class="std std-ref">Red Hat Ansible Automation Platform</span></a>.</p>
</section>
<section id="how-do-i-keep-secret-data-in-my-playbook">
<span id="keep-secret-data"></span><h2>How do I keep secret data in my playbook?<a class="headerlink" href="#how-do-i-keep-secret-data-in-my-playbook" title="Permalink to this headline"></a></h2>
<p>If you would like to keep secret data in your Ansible content and still share it publicly or keep things in source control, see <a class="reference internal" href="../user_guide/vault.html#playbooks-vault"><span class="std std-ref">Using encrypted variables and files</span></a>.</p>
<p>If you have a task that you don’t want to show the results or command given to it when using -v (verbose) mode, the following task or playbook attribute can be useful:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">secret task</span>
  <span class="nt">shell</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/usr/bin/do_something --value=</span><span class="cp">{{</span> <span class="nv">secret_value</span> <span class="cp">}}</span>
  <span class="nt">no_log</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<p>This can be used to keep verbose output but hide sensitive information from others who would otherwise like to be able to see the output.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">no_log</span></code> attribute can also apply to an entire play:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">hosts</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>
  <span class="nt">no_log</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<p>Though this will make the play somewhat difficult to debug. It’s recommended that this
be applied to single tasks only, once a playbook is completed. Note that the use of the
<code class="docutils literal notranslate"><span class="pre">no_log</span></code> attribute does not prevent data from being shown when debugging Ansible itself via
the <span class="target" id="index-1"></span><a class="reference internal" href="config.html#envvar-ANSIBLE_DEBUG"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ANSIBLE_DEBUG</span></code></a> environment variable.</p>
</section>
<section id="when-should-i-use-also-how-to-interpolate-variables-or-dynamic-variable-names">
<span id="interpolate-variables"></span><span id="dynamic-variables"></span><span id="when-to-use-brackets"></span><h2>When should I use {{ }}? Also, how to interpolate variables or dynamic variable names<a class="headerlink" href="#when-should-i-use-also-how-to-interpolate-variables-or-dynamic-variable-names" title="Permalink to this headline"></a></h2>
<p>A steadfast rule is ‘always use <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">}}</span></code> except when <code class="docutils literal notranslate"><span class="pre">when:</span></code>’.
Conditionals are always run through Jinja2 as to resolve the expression,
so <code class="docutils literal notranslate"><span class="pre">when:</span></code>, <code class="docutils literal notranslate"><span class="pre">failed_when:</span></code> and <code class="docutils literal notranslate"><span class="pre">changed_when:</span></code> are always templated and you should avoid adding <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">}}</span></code>.</p>
<p>In most other cases you should always use the brackets, even if previously you could use variables without
specifying (like <code class="docutils literal notranslate"><span class="pre">loop</span></code> or <code class="docutils literal notranslate"><span class="pre">with_</span></code> clauses), as this made it hard to distinguish between an undefined variable and a string.</p>
<p>Another rule is ‘moustaches don’t stack’. We often see this:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">somevar_</span><span class="o">{{</span><span class="nv">other_var</span><span class="cp">}}</span><span class="x"> }}</span>
</pre></div>
</div>
<p>The above DOES NOT WORK as you expect, if you need to use a dynamic variable use the following as appropriate:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">hostvars</span><span class="o">[</span><span class="nv">inventory_hostname</span><span class="o">][</span><span class="s1">&#39;somevar_&#39;</span> <span class="o">~</span> <span class="nv">other_var</span><span class="o">]</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>For ‘non host vars’ you can use the <a class="reference internal" href="../collections/ansible/builtin/vars_lookup.html#vars-lookup"><span class="std std-ref">vars lookup</span></a> plugin:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">lookup</span><span class="o">(</span><span class="s1">&#39;vars&#39;</span><span class="o">,</span> <span class="s1">&#39;somevar_&#39;</span> <span class="o">~</span> <span class="nv">other_var</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>To determine if a keyword requires <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">}}</span></code> or even supports templating, use <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-t</span> <span class="pre">keyword</span> <span class="pre">&lt;name&gt;</span></code>,
this will return documentation on the keyword including a <code class="docutils literal notranslate"><span class="pre">template</span></code> field with the values <code class="docutils literal notranslate"><span class="pre">explicit</span></code> (requires <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">}}</span></code>),
<code class="docutils literal notranslate"><span class="pre">implicit</span></code> (assumes <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">}}</span></code>, so no needed) or <code class="docutils literal notranslate"><span class="pre">static</span></code> (no templating supported, all characters will be interpreted literally)</p>
</section>
<section id="why-don-t-you-ship-ansible-in-wheel-format-or-other-packaging-format">
<span id="why-no-wheel"></span><h2>Why don’t you ship ansible in wheel format (or other packaging format) ?<a class="headerlink" href="#why-don-t-you-ship-ansible-in-wheel-format-or-other-packaging-format" title="Permalink to this headline"></a></h2>
<p>In most cases it has to do with maintainability. There are many ways to ship software and we do not have
the resources to release Ansible on every platform.
In some cases there are technical issues. For example, our dependencies are not present on Python Wheels.</p>
</section>
<section id="how-do-i-get-the-original-ansible-host-when-i-delegate-a-task">
<span id="ansible-host-delegated"></span><h2>How do I get the original ansible_host when I delegate a task?<a class="headerlink" href="#how-do-i-get-the-original-ansible-host-when-i-delegate-a-task" title="Permalink to this headline"></a></h2>
<p>As the documentation states, connection variables are taken from the <code class="docutils literal notranslate"><span class="pre">delegate_to</span></code> host so <code class="docutils literal notranslate"><span class="pre">ansible_host</span></code> is overwritten,
but you can still access the original via <code class="docutils literal notranslate"><span class="pre">hostvars</span></code>:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="nt">original_host</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">hostvars</span><span class="o">[</span><span class="nv">inventory_hostname</span><span class="o">][</span><span class="s1">&#39;ansible_host&#39;</span><span class="o">]</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<p>This works for all overridden connection variables, like <code class="docutils literal notranslate"><span class="pre">ansible_user</span></code>, <code class="docutils literal notranslate"><span class="pre">ansible_port</span></code>, and so on.</p>
</section>
<section id="how-do-i-fix-protocol-error-filename-does-not-match-request-when-fetching-a-file">
<span id="scp-protocol-error-filename"></span><h2>How do I fix ‘protocol error: filename does not match request’ when fetching a file?<a class="headerlink" href="#how-do-i-fix-protocol-error-filename-does-not-match-request-when-fetching-a-file" title="Permalink to this headline"></a></h2>
<p>Since release <code class="docutils literal notranslate"><span class="pre">7.9p1</span></code> of OpenSSH there is a <a class="reference external" href="https://bugzilla.mindrot.org/show_bug.cgi?id=2966">bug</a>
in the SCP client that can trigger this error on the Ansible controller when using SCP as the file transfer mechanism:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="nt">failed to transfer file to /tmp/ansible/file.txt\r\nprotocol error</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">filename does not match request</span>
</pre></div>
</div>
<p>In these releases, SCP tries to validate that the path of the file to fetch matches the requested path.
The validation
fails if the remote filename requires quotes to escape spaces or non-ascii characters in its path. To avoid this error:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Use SFTP instead of SCP by setting <code class="docutils literal notranslate"><span class="pre">scp_if_ssh</span></code> to <code class="docutils literal notranslate"><span class="pre">smart</span></code> (which tries SFTP first) or to <code class="docutils literal notranslate"><span class="pre">False</span></code>. You can do this in one of four ways:</dt><dd><ul>
<li><p>Rely on the default setting, which is <code class="docutils literal notranslate"><span class="pre">smart</span></code> - this works if <code class="docutils literal notranslate"><span class="pre">scp_if_ssh</span></code> is not explicitly set anywhere</p></li>
<li><p>Set a <a class="reference internal" href="../user_guide/intro_inventory.html#host-variables"><span class="std std-ref">host variable</span></a> or <a class="reference internal" href="../user_guide/intro_inventory.html#group-variables"><span class="std std-ref">group variable</span></a> in inventory: <code class="docutils literal notranslate"><span class="pre">ansible_scp_if_ssh:</span> <span class="pre">False</span></code></p></li>
<li><p>Set an environment variable on your control node: <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">ANSIBLE_SCP_IF_SSH=False</span></code></p></li>
<li><p>Pass an environment variable when you run Ansible: <code class="docutils literal notranslate"><span class="pre">ANSIBLE_SCP_IF_SSH=smart</span> <span class="pre">ansible-playbook</span></code></p></li>
<li><p>Modify your <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file: add <code class="docutils literal notranslate"><span class="pre">scp_if_ssh=False</span></code> to the <code class="docutils literal notranslate"><span class="pre">[ssh_connection]</span></code> section</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>If you must use SCP, set the <code class="docutils literal notranslate"><span class="pre">-T</span></code> arg to tell the SCP client to ignore path validation. You can do this in one of three ways:</dt><dd><ul>
<li><p>Set a <a class="reference internal" href="../user_guide/intro_inventory.html#host-variables"><span class="std std-ref">host variable</span></a> or <a class="reference internal" href="../user_guide/intro_inventory.html#group-variables"><span class="std std-ref">group variable</span></a>: <code class="docutils literal notranslate"><span class="pre">ansible_scp_extra_args=-T</span></code>,</p></li>
<li><p>Export or pass an environment variable: <code class="docutils literal notranslate"><span class="pre">ANSIBLE_SCP_EXTRA_ARGS=-T</span></code></p></li>
<li><p>Modify your <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file: add <code class="docutils literal notranslate"><span class="pre">scp_extra_args=-T</span></code> to the <code class="docutils literal notranslate"><span class="pre">[ssh_connection]</span></code> section</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you see an <code class="docutils literal notranslate"><span class="pre">invalid</span> <span class="pre">argument</span></code> error when using <code class="docutils literal notranslate"><span class="pre">-T</span></code>, then your SCP client is not performing filename validation and will not trigger this error.</p>
</div>
</section>
<section id="does-ansible-support-multiple-factor-authentication-2fa-mfa-biometrics-finterprint-usbkey-otp">
<span id="mfa-support"></span><h2>Does Ansible support multiple factor authentication 2FA/MFA/biometrics/finterprint/usbkey/OTP/…<a class="headerlink" href="#does-ansible-support-multiple-factor-authentication-2fa-mfa-biometrics-finterprint-usbkey-otp" title="Permalink to this headline"></a></h2>
<p>No, Ansible is designed to execute multiple tasks against multiple targets, minimizing user interaction.
As with most automation tools, it is not compatible with interactive security systems designed to handle human interaction.
Most of these systems require a secondary prompt per target, which prevents scaling to thousands of targets.  They also
tend to have very short expiration periods so it requires frequent reauthorization, also an issue with many hosts and/or
a long set of tasks.</p>
<p>In such environments we recommend securing around Ansible’s execution but still allowing it to use an ‘automation user’ that does not require such measures.
With AWX or the <a class="reference internal" href="tower.html#ansible-platform"><span class="std std-ref">Red Hat Ansible Automation Platform</span></a>, administrators can set up RBAC access to inventory, along with managing credentials and job execution.</p>
</section>
<section id="the-validate-option-is-not-enough-for-my-needs-what-do-i-do">
<span id="complex-configuration-validation"></span><h2>The ‘validate’ option is not enough for my needs, what do I do?<a class="headerlink" href="#the-validate-option-is-not-enough-for-my-needs-what-do-i-do" title="Permalink to this headline"></a></h2>
<p>Many Ansible modules that create or update files have a <code class="docutils literal notranslate"><span class="pre">validate</span></code> option that allows you to abort the update if the validation command fails.
This uses the temporary file Ansible creates before doing the final update. In many cases this does not work since the validation tools
for the specific application require either specific names, multiple files or some other factor that is not present in this simple feature.</p>
<p>For these cases you have to handle the validation and restoration yourself. The following is a simple example of how to do this with block/rescue
and backups, which most file based modules also support:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">update config and backout if validation fails</span>
  <span class="nt">block</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">do the actual update, works with copy, lineinfile and any action that allows for `backup`.</span>
       <span class="nt">template</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">src=template.j2 dest=/x/y/z backup=yes moreoptions=stuff</span>
       <span class="nt">register</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">updated</span>

  <span class=" -Error">  </span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">run validation, this will change a lot as needed. We assume it returns an error when not passing, use `failed_when` if otherwise.</span>
      <span class="nt">shell</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">run_validation_commmand</span>
      <span class="nt">become</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
      <span class="nt">become_user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">requiredbyapp</span>
      <span class="nt">environment</span><span class="p">:</span>
        <span class="nt">WEIRD_REQUIREMENT</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class=" -Error"> </span><span class="nt">rescue</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">restore backup file to original, in the hope the previous configuration was working.</span>
      <span class="nt">copy</span><span class="p">:</span>
         <span class="nt">remote_src</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
         <span class="nt">dest</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/x/y/z</span>
         <span class="nt">src</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">updated[&#39;backup_file&#39;]</span><span class="nv"> </span><span class="s">}}&quot;</span>
 <span class="nt">always</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">We choose to always delete backup, but could copy or move, or only delete in rescue.</span>
      <span class="nt">file</span><span class="p">:</span>
         <span class="nt">path</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">updated[&#39;backup_file&#39;]</span><span class="nv"> </span><span class="s">}}&quot;</span>
         <span class="nt">state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">absent</span>
</pre></div>
</div>
</section>
<section id="why-does-the-regex-search-filter-return-none-instead-of-an-empty-string">
<span id="jinja2-faqs"></span><h2>Why does the <code class="docutils literal notranslate"><span class="pre">regex_search</span></code> filter return <cite>None</cite> instead of an empty string?<a class="headerlink" href="#why-does-the-regex-search-filter-return-none-instead-of-an-empty-string" title="Permalink to this headline"></a></h2>
<p>Until the jinja2 2.10 release, Jinja was only able to return strings, but Ansible needed Python objects in some cases. Ansible uses <code class="docutils literal notranslate"><span class="pre">safe_eval</span></code> and  only sends strings that look like certain types of Python objects through this function. With <code class="docutils literal notranslate"><span class="pre">regex_search</span></code> that does not find a match, the result (<code class="docutils literal notranslate"><span class="pre">None</span></code>) is converted to the string “None” which is not useful in non-native jinja2.</p>
<p>The following example of a single templating action shows this behavior:</p>
<div class="highlight-Jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="s1">&#39;ansible&#39;</span> <span class="o">|</span> <span class="nf">regex_search</span><span class="o">(</span><span class="s1">&#39;foobar&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>This example does not result in a Python <code class="docutils literal notranslate"><span class="pre">None</span></code>, so Ansible historically converted it to “” (empty string).</p>
<p>The native jinja2 functionality actually allows us to return full Python objects, that are always represented as Python objects everywhere, and as such the result of a single templating action with <code class="docutils literal notranslate"><span class="pre">regex_search</span></code> can result in the Python <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Native jinja2 functionality is not needed when <code class="docutils literal notranslate"><span class="pre">regex_search</span></code> is used as an intermediate result that is then compared to the jinja2 <code class="docutils literal notranslate"><span class="pre">none</span></code> test.</p>
<div class="highlight-Jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="s1">&#39;ansible&#39;</span> <span class="o">|</span> <span class="nf">regex_search</span><span class="o">(</span><span class="s1">&#39;foobar&#39;</span><span class="o">)</span> <span class="k">is</span> <span class="nf">none</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</div>
</section>
<section id="how-do-i-submit-a-change-to-the-documentation">
<span id="docs-contributions"></span><h2>How do I submit a change to the documentation?<a class="headerlink" href="#how-do-i-submit-a-change-to-the-documentation" title="Permalink to this headline"></a></h2>
<p>Documentation for Ansible is kept in the main project git repository, and complete instructions
for contributing can be found in the docs README <a class="reference external" href="https://github.com/ansible/ansible/blob/devel/docs/docsite/README.md">viewable on GitHub</a>. Thanks!</p>
</section>
<section id="i-don-t-see-my-question-here">
<span id="i-dont-see-my-question"></span><h2>I don’t see my question here<a class="headerlink" href="#i-don-t-see-my-question-here" title="Permalink to this headline"></a></h2>
<p>If you have not found an answer to your questions, you can ask on one of our mailing lists or chat channels. For instructions on subscribing to a list or joining a chat channel, see <a class="reference internal" href="../community/communication.html#communication"><span class="std std-ref">Communicating with the Ansible community</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="../user_guide/playbooks.html#working-with-playbooks"><span class="std std-ref">Working with playbooks</span></a></dt><dd><p>An introduction to playbooks</p>
</dd>
<dt><a class="reference internal" href="../user_guide/playbooks_best_practices.html#playbooks-best-practices"><span class="std std-ref">Tips and tricks</span></a></dt><dd><p>Tips and tricks for playbooks</p>
</dd>
<dt><a class="reference external" href="https://groups.google.com/group/ansible-project">User Mailing List</a></dt><dd><p>Have a question?  Stop by the google group!</p>
</dd>
</dl>
</div>
</section>
</section>


           </div>
          </div>
          

<footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../dev_guide/testing/sanity/yamllint.html" class="btn btn-neutral float-left" title="yamllint" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="glossary.html" class="btn btn-neutral float-right" title="Glossary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ansible project contributors.
      <span class="lastupdated">Last updated on Jul 12, 2022.
      </span></p>
  </div>

  
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script><!-- extra footer elements for Ansible beyond RTD Sphinx Theme -->
<!-- begin analytics -->
<script>
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = 'https://js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script>
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script>

</body>
</html>