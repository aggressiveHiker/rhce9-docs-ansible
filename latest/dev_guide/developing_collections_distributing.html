<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Distributing collections &mdash; Ansible Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/ansible.css" type="text/css" />
      <link rel="stylesheet" href="../_static/antsibull-minimal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/rtd-ethical-ads.css" type="text/css" />
    <link rel="shortcut icon" href="_static/images/Ansible-Mark-RGB_Black.svg"/>
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/dev_guide/developing_collections_distributing.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Migrating Ansible content to a different collection" href="developing_collections_migrating.html" />
    <link rel="prev" title="Testing collections" href="developing_collections_testing.html" /><!-- extra head elements for Ansible beyond RTD Sphinx Theme -->
<script src="https://www.redhat.com/dtm.js"></script>


<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="6">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->



<script>
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','https://s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

</head>

<body class="wy-body-for-nav"><!-- extra body elements for Ansible beyond RTD Sphinx Theme -->
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
    <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
    <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
    <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/Ansible-Mark-RGB_White.svg"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Documentation</div>
</a>
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Ansible
          </a>
              <div class="version">
                6
              </div><!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <script>
        function switchVersionTo(slug) {
          var current_url_path = window.location.pathname;
          var url_version = current_url_path.search("/6/") > -1
            ? "/6/"
            : "/latest/";
          var new_version_url = current_url_path.replace(url_version, "/" + slug + "/");
          window.location.replace(new_version_url);
        }
      </script>
      <select
          class="version-list"
          id="version-list"
          onchange="switchVersionTo(this.value);"
      >
        
        <option
            value="latest"
            
        >
            latest
        </option>
        
        <option
            value="2.9"
            
        >
            2.9
        </option>
        
        <option
            value="devel"
            
        >
            devel
        </option>
        
      </select>
    </div>
  
</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" method="get">
    <input type="text" class="st-default-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Ansible getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting started with Ansible</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Ansible Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/contributions_collections.html">Ansible Collections Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/contributions.html">ansible-core Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/advanced_index.html">Advanced Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="style_guide/index.html">Ansible documentation style guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending Ansible</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="developing_locally.html">Adding modules and plugins locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules.html">Should you develop a module?</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general.html">Developing modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_checklist.html">Contributing your module to an existing Ansible collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_best_practices.html">Conventions, tips, and pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_python_3.html">Ansible and Python 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_documenting.html">Module format and documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general_windows.html">Windows module development walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general_aci.html">Developing Cisco ACI modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/aws_guidelines.html">Guidelines for Ansible Amazon AWS module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/openstack_guidelines.html">OpenStack Ansible Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/ovirt_dev_guide.html">oVirt Ansible Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/vmware_guidelines.html">Guidelines for VMware module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/vmware_rest_guidelines.html">Guidelines for VMware REST module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_in_groups.html">Creating a new collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_lifecycle.html">The lifecycle of an Ansible module or plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_plugins.html">Developing plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_inventory.html">Developing dynamic inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_core.html">Developing <code class="docutils literal notranslate"><span class="pre">ansible-core</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_program_flow_modules.html">Ansible module architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_api.html">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_rebasing.html">Rebasing a pull request</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_module_utilities.html">Using and developing module utilities</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="developing_collections.html">Developing collections</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="developing_collections_creating.html">Creating collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="developing_collections_shared.html">Using shared resources in collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="developing_collections_testing.html">Testing collections</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Distributing collections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#initial-configuration-of-your-distribution-server-or-servers">Initial configuration of your distribution server or servers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-your-collection-tarball">Building your collection tarball</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preparing-to-publish-your-collection">Preparing to publish your collection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#publishing-your-collection">Publishing your collection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="developing_collections_migrating.html">Migrating Ansible content to a different collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="developing_collections_contributing.html">Contributing to collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="developing_collections_changelogs.html">Generating changelogs and porting guide entries in a collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="developing_collections_structure.html">Collection structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="collections_galaxy_meta.html">Collection Galaxy metadata structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="migrating_roles.html">Migrating Roles to Roles in Collections on Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="collections_galaxy_meta.html">Collection Galaxy metadata structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview_architecture.html">Ansible architecture</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/cloud_guides.html">Legacy Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/getting_started/index.html">Network Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/user_guide/index.html">Network Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/dev_guide/index.html">Network Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../collections/index.html">Collection Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collections/all_plugins.html">Indexes of all modules and plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/release_and_maintenance.html">Releases and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/tower.html">Red Hat Ansible Automation Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/automationhub.html">Ansible Automation Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/ansible_roadmap_index.html">Ansible Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/ansible_core_roadmap_index.html">ansible-core Roadmaps</a></li>
</ul>
<!-- extra nav elements for Ansible beyond RTD Sphinx Theme -->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Developer Guide</a> &raquo;</li>
          <li><a href="developing_collections.html">Developing collections</a> &raquo;</li>
      <li>Distributing collections</li>
  <li class="wy-breadcrumbs-aside">
          <!-- Ansible-specific additions for modules etc -->
            
              <a href="https://github.com/ansible/ansible/edit/devel/docs/docsite/rst/dev_guide/developing_collections_distributing.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
            
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  <script>
    function startsWith(str, needle) {
      return str.slice(0, needle.length) == needle
    }
    function startsWithOneOf(str, needles) {
      return needles.some(function (needle) {
        return startsWith(str, needle);
      });
    }
    var banner = '';
      var extra_banner = '';
    /*use extra_banner for when marketing wants something extra, like a survey or AnsibleFest notice
    var extra_banner =
      '<div id="latest_extra_banner_id" class="admonition important">' +
      '<br>' +
      '<p>' +
        'You\'re invited to AnsibleFest 2021! ' +
      '<p>' +
        'Explore ways to automate, innovate, and accelerate with our free virtual event September 29-30. ' +
      '<pr>' +
        '<a href="https://reg.ansiblefest.redhat.com/flow/redhat/ansible21/regGenAttendee/login?sc_cid=7013a000002pemAAAQ">Register now!</a> ' +
      '</p>' +
      '<br>' +
      '</div>'; */
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">' +
                     '<p>This is the testing site for Ansible Documentation. Unless you are reviewing pre-production changes, please visit the <a href="https://docs.ansible.com/ansible/latest/">official documentation website</a>.</p> <p></p>' +
                     '</div>');
    }
    
      // Create a banner
      current_url_path = window.location.pathname;

      var important = false;
      var msg = '<p>';
      if (startsWith(current_url_path, "/ansible-core/")) {
        msg += 'You are reading documentation for Ansible Core, which contains no plugins except for those in ansible.builtin. For documentation of the Ansible package, go to <a href="/ansible/latest">the latest documentation</a>.';
      } else if (startsWithOneOf(current_url_path, ["/ansible/latest/", "/ansible/6/"])) {
        /* temp extra banner to advertise AnsibeFest2021 */
        banner += extra_banner;

        msg += 'You are reading the <b>latest</b> (stable) community version of the Ansible documentation. Red Hat subscribers, select <b>2.9</b> in the version selection to the left for the most recent Red Hat release.';
      } else if (startsWith(current_url_path, "/ansible/2.9/")) {
        msg += 'You are reading the latest Red Hat released version of the Ansible documentation. Community users can use this version, or select <b>latest</b> from the version selector to the left for the most recent community version.';
      } else if (startsWith(current_url_path, "/ansible/devel/")) {
        /* temp extra banner to advertise AnsibleFest2021 */
        banner += extra_banner;

        /* temp banner to advertise survey
        important = true;
        msg += 'Please take our <a href="https://www.surveymonkey.co.uk/r/B9V3CDY">Docs survey</a> before December 31 to help us improve Ansible documentation.';
        */

        msg += 'You are reading the <b>devel</b> version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the <b>latest</b> (stable) released version.';
      } else {
        msg += 'You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the <b>latest</b> (stable) released version.';
      }
      msg += '</p>';

      banner += '<div id="banner_id" class="admonition ';
      banner += important ? 'important' : 'caution';
      banner += '">';
      banner += important ? '<br>' : '';
      banner += msg;
      banner += important ? '<br>' : '';
      banner += '</div>';
      document.write(banner);
    
  </script>


  
           <div itemprop="articleBody">
             
  <section id="distributing-collections">
<span id="id1"></span><h1>Distributing collections<a class="headerlink" href="#distributing-collections" title="Permalink to this headline"></a></h1>
<p>A collection is a distribution format for Ansible content. A typical collection contains modules and other plugins that address a set of related use cases. For example, a collection might automate administering a particular database. A collection can also contain roles and playbooks.</p>
<p>To distribute your collection and allow others to use it, you can publish your collection on one or more distribution servers. Distribution servers include:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 37%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Distribution server</p></th>
<th class="head"><p>Collections accepted</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ansible Galaxy</p></td>
<td><p>All collections</p></td>
</tr>
<tr class="row-odd"><td><p>Red Hat Automation Hub</p></td>
<td><p>Only collections certified by Red Hat</p></td>
</tr>
<tr class="row-even"><td><p>Privately hosted Automation Hub</p></td>
<td><p>Collections authorized by the owners</p></td>
</tr>
</tbody>
</table>
<p>Distributing collections involves four major steps:</p>
<ol class="arabic simple">
<li><p>Initial configuration of your distribution server or servers</p></li>
<li><p>Building your collection tarball</p></li>
<li><p>Preparing to publish your collection</p></li>
<li><p>Publishing your collection</p></li>
</ol>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#initial-configuration-of-your-distribution-server-or-servers" id="id2">Initial configuration of your distribution server or servers</a></p>
<ul>
<li><p><a class="reference internal" href="#creating-a-namespace" id="id3">Creating a namespace</a></p></li>
<li><p><a class="reference internal" href="#getting-your-api-token" id="id4">Getting your API token</a></p></li>
<li><p><a class="reference internal" href="#specifying-your-api-token-and-distribution-server" id="id5">Specifying your API token and distribution server</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-your-collection-tarball" id="id6">Building your collection tarball</a></p>
<ul>
<li><p><a class="reference internal" href="#ignoring-files-and-folders" id="id7">Ignoring files and folders</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#preparing-to-publish-your-collection" id="id8">Preparing to publish your collection</a></p>
<ul>
<li><p><a class="reference internal" href="#installing-your-collection-locally" id="id9">Installing your collection locally</a></p></li>
<li><p><a class="reference internal" href="#reviewing-your-collection" id="id10">Reviewing your collection</a></p></li>
<li><p><a class="reference internal" href="#understanding-collection-versioning" id="id11">Understanding collection versioning</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#publishing-your-collection" id="id12">Publishing your collection</a></p>
<ul>
<li><p><a class="reference internal" href="#publishing-a-collection-from-the-command-line" id="id13">Publishing a collection from the command line</a></p></li>
<li><p><a class="reference internal" href="#publishing-a-collection-from-the-website" id="id14">Publishing a collection from the website</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="initial-configuration-of-your-distribution-server-or-servers">
<span id="config-distribution-server"></span><h2><a class="toc-backref" href="#id2">Initial configuration of your distribution server or servers</a><a class="headerlink" href="#initial-configuration-of-your-distribution-server-or-servers" title="Permalink to this headline"></a></h2>
<p>Configure a connection to one or more distribution servers so you can publish collections there. You only need to configure each distribution server once. You must repeat the other steps (building your collection tarball, preparing to publish, and publishing your collection) every time you publish a new collection or a new version of an existing collection.</p>
<ol class="arabic simple">
<li><p>Create a namespace on each distribution server you want to use.</p></li>
<li><p>Get an API token for each distribution server you want to use.</p></li>
<li><p>Specify the API token for each distribution server you want to use.</p></li>
</ol>
<section id="creating-a-namespace">
<span id="get-namespace"></span><h3><a class="toc-backref" href="#id3">Creating a namespace</a><a class="headerlink" href="#creating-a-namespace" title="Permalink to this headline"></a></h3>
<p>You must upload your collection into a namespace on each distribution server. If you have a login for Ansible Galaxy, your Ansible Galaxy username is usually also an Ansible Galaxy namespace.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Namespaces on Ansible Galaxy cannot include hyphens. If you have a login for Ansible Galaxy that includes a hyphen, your Galaxy username is not also a Galaxy namespace. For example, <code class="docutils literal notranslate"><span class="pre">awesome-user</span></code> is a valid username for Ansible Galaxy, but it is not a valid namespace.</p>
</div>
<p>You can create additional namespaces on Ansible Galaxy if you choose. For Red Hat Automation Hub and private Automation Hub you must create a namespace before you can upload your collection. To create a namespace:</p>
<ul class="simple">
<li><p>To create a namespace on Galaxy, see <a class="reference external" href="https://galaxy.ansible.com/docs/contributing/namespaces.html#galaxy-namespaces">Galaxy namespaces</a> on the Galaxy docsite for details.</p></li>
<li><p>To create a namespace on Red Hat Automation Hub, see the <a class="reference external" href="https://access.redhat.com/articles/4916901">Ansible Certified Content FAQ</a>.</p></li>
</ul>
<p>Specify the namespace in the <code class="file docutils literal notranslate"><span class="pre">galaxy.yml</span></code> file for each collection. For more information on the <code class="file docutils literal notranslate"><span class="pre">galaxy.yml</span></code> file, see <a class="reference internal" href="collections_galaxy_meta.html#collections-galaxy-meta"><span class="std std-ref">Collection Galaxy metadata structure</span></a>.</p>
</section>
<section id="getting-your-api-token">
<span id="galaxy-get-token"></span><h3><a class="toc-backref" href="#id4">Getting your API token</a><a class="headerlink" href="#getting-your-api-token" title="Permalink to this headline"></a></h3>
<p>An API token authenticates your connection to each distribution server. You need a separate API token for each distribution server. Use the correct API token to connect to each distribution server securely and protect your content.</p>
<p>To get your API token:</p>
<ul class="simple">
<li><p>To get an API token for Galaxy, go to the <a class="reference external" href="https://galaxy.ansible.com/me/preferences">Galaxy profile preferences</a> page and click <span class="guilabel">API Key</span>.</p></li>
<li><p>To get an API token for Automation Hub, go to <a class="reference external" href="https://cloud.redhat.com/ansible/automation-hub/token/">the token page</a> and click <span class="guilabel">Load token</span>.</p></li>
</ul>
</section>
<section id="specifying-your-api-token-and-distribution-server">
<span id="galaxy-specify-token"></span><h3><a class="toc-backref" href="#id5">Specifying your API token and distribution server</a><a class="headerlink" href="#specifying-your-api-token-and-distribution-server" title="Permalink to this headline"></a></h3>
<p>Each time you publish a collection, you must specify the API token and the distribution server to create a secure connection. You have two options for specifying the token and distribution server:</p>
<ul class="simple">
<li><p>You can configure the token in configuration, as part of a <code class="docutils literal notranslate"><span class="pre">galaxy_server_list</span></code> entry in your <code class="file docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file. Using configuration is the most secure option.</p></li>
<li><p>You can pass the token at the command line as an argument to the <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span></code> command. If you pass the token at the command line, you can specify the server at the command line, by using the default setting, or by setting the server in configuration. Passing the token at the command line is insecure, because typing secrets at the command line may expose them to other users on the system.</p></li>
</ul>
<section id="specifying-the-token-and-distribution-server-in-configuration">
<span id="galaxy-token-ansible-cfg"></span><h4>Specifying the token and distribution server in configuration<a class="headerlink" href="#specifying-the-token-and-distribution-server-in-configuration" title="Permalink to this headline"></a></h4>
<p>By default, Ansible Galaxy is configured as the only distribution server. You can add other distribution servers and specify your API token or tokens in configuration by editing the <code class="docutils literal notranslate"><span class="pre">galaxy_server_list</span></code> section of your <code class="file docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file. This is the most secure way to manage authentication for distribution servers. Specify a URL and token for each server. For example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[galaxy]</span>
<span class="na">server_list</span> <span class="o">=</span> <span class="s">release_galaxy</span>

<span class="k">[galaxy_server.release_galaxy]</span>
<span class="na">url</span><span class="o">=</span><span class="s">https://galaxy.ansible.com/</span>
<span class="na">token</span><span class="o">=</span><span class="s">abcdefghijklmnopqrtuvwxyz</span>
</pre></div>
</div>
<p>You cannot use <code class="docutils literal notranslate"><span class="pre">apt-key</span></code> with any servers defined in your <a class="reference internal" href="../user_guide/collections_using.html#galaxy-server-config"><span class="std std-ref">galaxy_server_list</span></a>. See <a class="reference internal" href="../user_guide/collections_using.html#galaxy-server-config"><span class="std std-ref">Configuring the ansible-galaxy client</span></a> for complete details.</p>
</section>
<section id="specifying-the-token-at-the-command-line">
<span id="galaxy-use-token-arg"></span><h4>Specifying the token at the command line<a class="headerlink" href="#specifying-the-token-at-the-command-line" title="Permalink to this headline"></a></h4>
<p>You can specify the API token at the command line using the <code class="docutils literal notranslate"><span class="pre">--token</span></code> argument of the <a class="reference internal" href="../cli/ansible-galaxy.html#ansible-galaxy"><span class="std std-ref">ansible-galaxy</span></a> command. There are three ways to specify the distribution server when passing the token at the command line:</p>
<ul class="simple">
<li><p>using the <code class="docutils literal notranslate"><span class="pre">--server</span></code> argument of the <a class="reference internal" href="../cli/ansible-galaxy.html#ansible-galaxy"><span class="std std-ref">ansible-galaxy</span></a> command</p></li>
<li><p>relying on the default (<a class="reference external" href="https://galaxy.ansible.com">https://galaxy.ansible.com</a>)</p></li>
<li><p>setting a server in configuration by creating a <a class="reference internal" href="../reference_appendices/config.html#galaxy-server"><span class="std std-ref">GALAXY_SERVER</span></a> setting in your <code class="file docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file</p></li>
</ul>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-galaxy collection publish path/to/my_namespace-my_collection-1.0.0.tar.gz --token abcdefghijklmnopqrtuvwxyz
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">--token</span></code> argument is insecure. Passing secrets at the command line may expose them to others on the system.</p>
</div>
</section>
</section>
</section>
<section id="building-your-collection-tarball">
<span id="building-collections"></span><h2><a class="toc-backref" href="#id6">Building your collection tarball</a><a class="headerlink" href="#building-your-collection-tarball" title="Permalink to this headline"></a></h2>
<p>After configuring one or more distribution servers, build a collection tarball. The collection tarball is the published artifact, the object that you upload and other users download to install your collection. To build a collection tarball:</p>
<ol class="arabic simple">
<li><p>Review the version number in your <code class="file docutils literal notranslate"><span class="pre">galaxy.yml</span></code> file. Each time you publish your collection, it must have a new version number. You cannot make changes to existing versions of your collection on a distribution server. If you try to upload the same collection version more than once, the distribution server returns the error <code class="docutils literal notranslate"><span class="pre">Code:</span> <span class="pre">conflict.collection_exists</span></code>. Collections follow semantic versioning rules. For more information on versions, see <a class="reference internal" href="#collection-versions"><span class="std std-ref">Understanding collection versioning</span></a>. For more information on the <code class="file docutils literal notranslate"><span class="pre">galaxy.yml</span></code> file, see <a class="reference internal" href="collections_galaxy_meta.html#collections-galaxy-meta"><span class="std std-ref">Collection Galaxy metadata structure</span></a>.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">build</span></code> from inside the top-level directory of the collection. For example:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>collection_dir#&gt; ansible-galaxy collection build
</pre></div>
</div>
<p>This command builds a tarball of the collection in the current directory, which you can upload to your selected distribution server:</p>
<div class="highlight-YAML+Jinja notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">my_collection/</span>
<span class="l l-Scalar l-Scalar-Plain">├── galaxy.yml</span>
<span class="l l-Scalar l-Scalar-Plain">├── ...</span>
<span class="l l-Scalar l-Scalar-Plain">├── my_namespace-my_collection-1.0.0.tar.gz</span>
<span class="l l-Scalar l-Scalar-Plain">└── ...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>To reduce the size of collections, certain files and folders are excluded from the collection tarball by default. See <a class="reference internal" href="#ignoring-files-and-folders-collections"><span class="std std-ref">Ignoring files and folders</span></a> if your collection directory contains other files you want to exclude.</p></li>
<li><p>The current Galaxy maximum tarball size is 2 MB.</p></li>
</ul>
</div>
<p>You can upload your tarball to one or more distribution servers. You can also distribute your collection locally by copying the tarball to install your collection directly on target systems.</p>
<section id="ignoring-files-and-folders">
<span id="ignoring-files-and-folders-collections"></span><h3><a class="toc-backref" href="#id7">Ignoring files and folders</a><a class="headerlink" href="#ignoring-files-and-folders" title="Permalink to this headline"></a></h3>
<p>By default the build step includes all the files in the collection directory in the tarball except for the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">galaxy.yml</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.pyc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*.retry</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tests/output</span></code></p></li>
<li><p>previously built tarballs in the root directory</p></li>
<li><p>various version control directories such as <code class="docutils literal notranslate"><span class="pre">.git/</span></code></p></li>
</ul>
<p>To exclude other files and folders from your collection tarball, set a list of file glob-like patterns in the <code class="docutils literal notranslate"><span class="pre">build_ignore</span></code> key in the collection’s <code class="docutils literal notranslate"><span class="pre">galaxy.yml</span></code> file. These patterns use the following special characters for wildcard matching:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*</span></code>: Matches everything</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">?</span></code>: Matches any single character</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[seq]</span></code>: Matches any character in sequence</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[!seq]</span></code>:Matches any character not in sequence</p></li>
</ul>
<p>For example, to exclude the <code class="file docutils literal notranslate"><span class="pre">sensitive</span></code> folder within the <code class="docutils literal notranslate"><span class="pre">playbooks</span></code> folder as well any <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> archives, set the following in your <code class="docutils literal notranslate"><span class="pre">galaxy.yml</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">build_ignore</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">playbooks/sensitive</span>
<span class="p p-Indicator">-</span> <span class="s">&#39;*.tar.gz&#39;</span>
</pre></div>
</div>
<p>For more information on the <code class="file docutils literal notranslate"><span class="pre">galaxy.yml</span></code> file, see <a class="reference internal" href="collections_galaxy_meta.html#collections-galaxy-meta"><span class="std std-ref">Collection Galaxy metadata structure</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">build_ignore</span></code> feature is only supported with <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">build</span></code> in Ansible 2.10 or newer.</p>
</div>
</section>
</section>
<section id="preparing-to-publish-your-collection">
<span id="trying-collection-locally"></span><h2><a class="toc-backref" href="#id8">Preparing to publish your collection</a><a class="headerlink" href="#preparing-to-publish-your-collection" title="Permalink to this headline"></a></h2>
<p>Each time you publish your collection, you must create a <a class="reference internal" href="#collection-versions"><span class="std std-ref">new version</span></a> on the distribution server. After you publish a version of a collection, you cannot delete or modify that version. To avoid unnecessary extra versions, check your collection for bugs, typos, and other issues locally before publishing:</p>
<ol class="arabic simple">
<li><p>Install the collection locally.</p></li>
<li><p>Review the locally installed collection before publishing a new version.</p></li>
</ol>
<section id="installing-your-collection-locally">
<h3><a class="toc-backref" href="#id9">Installing your collection locally</a><a class="headerlink" href="#installing-your-collection-locally" title="Permalink to this headline"></a></h3>
<p>You have two options for installing your collection locally:</p>
<blockquote>
<div><ul class="simple">
<li><p>Install your collection locally from the tarball.</p></li>
<li><p>Install your collection locally from your git repository.</p></li>
</ul>
</div></blockquote>
<section id="installing-your-collection-locally-from-the-tarball">
<h4>Installing your collection locally from the tarball<a class="headerlink" href="#installing-your-collection-locally-from-the-tarball" title="Permalink to this headline"></a></h4>
<p>To install your collection locally from the tarball, run <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">install</span></code> and specify the collection tarball. You can optionally specify a location using the <code class="docutils literal notranslate"><span class="pre">-p</span></code> flag. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>collection_dir#&gt; ansible-galaxy collection install my_namespace-my_collection-1.0.0.tar.gz -p ./collections
</pre></div>
</div>
<p>Install the tarball into a directory configured in <a class="reference internal" href="../reference_appendices/config.html#collections-paths"><span class="std std-ref">COLLECTIONS_PATHS</span></a> so Ansible can easily find and load the collection. If you do not specify a path value, <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">install</span></code> installs the collection in the first path defined in <a class="reference internal" href="../reference_appendices/config.html#collections-paths"><span class="std std-ref">COLLECTIONS_PATHS</span></a>.</p>
</section>
<section id="installing-your-collection-locally-from-a-git-repository">
<span id="collections-scm-install"></span><h4>Installing your collection locally from a git repository<a class="headerlink" href="#installing-your-collection-locally-from-a-git-repository" title="Permalink to this headline"></a></h4>
<p>To install your collection locally from a git repository, specify the repository and the branch you want to install:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>collection_dir#&gt; ansible-galaxy collection install git+https://github.com/org/repo.git,devel
</pre></div>
</div>
<p>You can install a collection from a git repository instead of from Galaxy or Automation Hub. As a developer, installing from a git repository lets you review your collection before you create the tarball and publish the collection. As a user, installing from a git repository lets you use collections or versions that are not in Galaxy or Automation Hub yet.</p>
<p>The repository must contain a <code class="docutils literal notranslate"><span class="pre">galaxy.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">MANIFEST.json</span></code> file. This file provides metadata such as the version number and namespace of the collection.</p>
</section>
<section id="installing-a-collection-from-a-git-repository-at-the-command-line">
<h4>Installing a collection from a git repository at the command line<a class="headerlink" href="#installing-a-collection-from-a-git-repository-at-the-command-line" title="Permalink to this headline"></a></h4>
<p>To install a collection from a git repository at the command line, use the URI of the repository instead of a collection name or path to a <code class="docutils literal notranslate"><span class="pre">tar.gz</span></code> file. Use the prefix <code class="docutils literal notranslate"><span class="pre">git+</span></code>, unless you’re using SSH authentication with the user <code class="docutils literal notranslate"><span class="pre">git</span></code> (for example, <code class="docutils literal notranslate"><span class="pre">git&#64;github.com:ansible-collections/ansible.windows.git</span></code>). You can specify a branch, commit, or tag using the comma-separated <a class="reference external" href="https://git-scm.com/docs/gitglossary#def_commit-ish">git commit-ish</a> syntax.</p>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install a collection in a repository using the latest commit on the branch &#39;devel&#39;</span>
ansible-galaxy collection install git+https://github.com/organization/repo_name.git,devel

<span class="c1"># Install a collection from a private github repository</span>
ansible-galaxy collection install <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="95f2fce1d5f2fce1fde0f7bbf6faf8">[email&#160;protected]</a>:organization/repo_name.git

<span class="c1"># Install a collection from a local git repository</span>
ansible-galaxy collection install git+file:///home/user/path/to/repo_name.git
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Embedding credentials into a git URI is not secure. Use safe authentication options to prevent your credentials from being exposed in logs or elsewhere.</p>
<ul class="simple">
<li><p>Use <a class="reference external" href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh">SSH</a> authentication</p></li>
<li><p>Use <a class="reference external" href="https://linux.die.net/man/5/netrc">netrc</a> authentication</p></li>
<li><p>Use <a class="reference external" href="https://git-scm.com/docs/git-config#Documentation/git-config.txt-httpextraHeader">http.extraHeader</a> in your git configuration</p></li>
<li><p>Use <a class="reference external" href="https://git-scm.com/docs/git-config#Documentation/git-config.txt-urlltbasegtpushInsteadOf">url.&lt;base&gt;.pushInsteadOf</a> in your git configuration</p></li>
</ul>
</div>
</section>
<section id="specifying-the-collection-location-within-the-git-repository">
<h4>Specifying the collection location within the git repository<a class="headerlink" href="#specifying-the-collection-location-within-the-git-repository" title="Permalink to this headline"></a></h4>
<p>When you install a collection from a git repository, Ansible uses the collection <code class="docutils literal notranslate"><span class="pre">galaxy.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">MANIFEST.json</span></code> metadata file to build the collection. By default, Ansible searches two paths for collection <code class="docutils literal notranslate"><span class="pre">galaxy.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">MANIFEST.json</span></code> metadata files:</p>
<ul class="simple">
<li><p>The top level of the repository.</p></li>
<li><p>Each directory in the repository path (one level deep).</p></li>
</ul>
<p>If a <code class="docutils literal notranslate"><span class="pre">galaxy.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">MANIFEST.json</span></code> file exists in the top level of the repository, Ansible uses the collection metadata in that file to install an individual collection.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>├── galaxy.yml
├── plugins/
│   ├── lookup/
│   ├── modules/
│   └── module_utils/
└─── README.md
</pre></div>
</div>
<p>If a <code class="docutils literal notranslate"><span class="pre">galaxy.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">MANIFEST.json</span></code> file exists in one or more directories in the repository path (one level deep), Ansible installs each directory with a metadata file as a collection. For example, Ansible installs both collection1 and collection2 from this repository structure by default:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>├── collection1
│   ├── docs/
│   ├── galaxy.yml
│   └── plugins/
│       ├── inventory/
│       └── modules/
└── collection2
    ├── docs/
    ├── galaxy.yml
    ├── plugins/
    |   ├── filter/
    |   └── modules/
    └── roles/
</pre></div>
</div>
<p>If you have a different repository structure or only want to install a subset of collections, you can add a fragment to the end of your URI (before the optional comma-separated version) to indicate the location of the metadata file or files. The path should be a directory, not the metadata file itself. For example, to install only collection2 from the example repository with two collections:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>ansible-galaxy collection install git+https://github.com/organization/repo_name.git#/collection2/
</pre></div>
</div>
<p>In some repositories, the main directory corresponds to the namespace:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>namespace/
├── collectionA/
|   ├── docs/
|   ├── galaxy.yml
|   ├── plugins/
|   │   ├── README.md
|   │   └── modules/
|   ├── README.md
|   └── roles/
└── collectionB/
    ├── docs/
    ├── galaxy.yml
    ├── plugins/
    │   ├── connection/
    │   └── modules/
    ├── README.md
    └── roles/
</pre></div>
</div>
<p>You can install all collections in this repository, or install one collection from a specific commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install all collections in the namespace</span>
ansible-galaxy collection install git+https://github.com/organization/repo_name.git#/namespace/

<span class="c1"># Install an individual collection using a specific commit</span>
ansible-galaxy collection install git+https://github.com/organization/repo_name.git#/namespace/collectionA/,7b60ddc245bc416b72d8ea6ed7b799885110f5e5
</pre></div>
</div>
</section>
</section>
<section id="reviewing-your-collection">
<h3><a class="toc-backref" href="#id10">Reviewing your collection</a><a class="headerlink" href="#reviewing-your-collection" title="Permalink to this headline"></a></h3>
<p>Review the collection:</p>
<ul class="simple">
<li><p>Run a playbook that uses the modules and plugins in your collection. Verify that new features and functionality work as expected. For examples and more details see <a class="reference internal" href="../user_guide/collections_using.html#id2"><span class="std std-ref">Using collections</span></a>.</p></li>
<li><p>Check the documentation for typos.</p></li>
<li><p>Check that the version number of your tarball is higher than the latest published version on the distribution server or servers.</p></li>
<li><p>If you find any issues, fix them and rebuild the collection tarball.</p></li>
</ul>
</section>
<section id="understanding-collection-versioning">
<span id="collection-versions"></span><h3><a class="toc-backref" href="#id11">Understanding collection versioning</a><a class="headerlink" href="#understanding-collection-versioning" title="Permalink to this headline"></a></h3>
<p>The only way to change a collection is to release a new version. The latest version of a collection (by highest version number) is the version displayed everywhere in Galaxy and Automation Hub. Users can still download older versions.</p>
<p>Follow semantic versioning when setting the version for your collection. In summary:</p>
<ul class="simple">
<li><p>Increment the major version number, <code class="docutils literal notranslate"><span class="pre">x</span></code> of <code class="docutils literal notranslate"><span class="pre">x.y.z</span></code>, for an incompatible API change.</p></li>
<li><p>Increment the minor version number, <code class="docutils literal notranslate"><span class="pre">y</span></code> of <code class="docutils literal notranslate"><span class="pre">x.y.z</span></code>, for new functionality in a backwards compatible manner (for example new modules/plugins, parameters, return values).</p></li>
<li><p>Increment the patch version number, <code class="docutils literal notranslate"><span class="pre">z</span></code> of <code class="docutils literal notranslate"><span class="pre">x.y.z</span></code>, for backwards compatible bug fixes.</p></li>
</ul>
<p>Read the official <a class="reference external" href="https://semver.org/">Semantic Versioning</a> documentation for details and examples.</p>
</section>
</section>
<section id="publishing-your-collection">
<span id="publish-collection"></span><h2><a class="toc-backref" href="#id12">Publishing your collection</a><a class="headerlink" href="#publishing-your-collection" title="Permalink to this headline"></a></h2>
<p>The last step in distributing your collection is publishing the tarball to Ansible Galaxy, Red Hat Automation Hub, or a privately hosted Automation Hub instance. You can publish your collection in two ways:</p>
<ul class="simple">
<li><p>from the command line using the <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">publish</span></code> command</p></li>
<li><p>from the website of the distribution server (Galaxy, Automation Hub) itself</p></li>
</ul>
<section id="publishing-a-collection-from-the-command-line">
<span id="publish-collection-galaxy-cmd"></span><span id="upload-collection-ansible-galaxy"></span><h3><a class="toc-backref" href="#id13">Publishing a collection from the command line</a><a class="headerlink" href="#publishing-a-collection-from-the-command-line" title="Permalink to this headline"></a></h3>
<p>To upload the collection tarball from the command line using <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-galaxy collection publish path/to/my_namespace-my_collection-1.0.0.tar.gz
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ansible-galaxy command assumes you have retrieved and stored your API token in configuration. See <a class="reference internal" href="#galaxy-specify-token"><span class="std std-ref">Specifying your API token and distribution server</span></a> for details.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">publish</span></code> command triggers an import process, just as if you uploaded the collection through the Galaxy website. The command waits until the import process completes before reporting the status back. If you want to continue without waiting for the import result, use the <code class="docutils literal notranslate"><span class="pre">--no-wait</span></code> argument and manually look at the import progress in your <a class="reference external" href="https://galaxy.ansible.com/my-imports/">My Imports</a> page.</p>
</section>
<section id="publishing-a-collection-from-the-website">
<span id="upload-collection-galaxy"></span><h3><a class="toc-backref" href="#id14">Publishing a collection from the website</a><a class="headerlink" href="#publishing-a-collection-from-the-website" title="Permalink to this headline"></a></h3>
<p>To publish your collection directly on the Galaxy website:</p>
<ol class="arabic simple">
<li><p>Go to the <a class="reference external" href="https://galaxy.ansible.com/my-content/namespaces">My Content</a> page, and click the <strong>Add Content</strong> button on one of your namespaces.</p></li>
<li><p>From the <strong>Add Content</strong> dialogue, click <strong>Upload New Collection</strong>, and select the collection archive file from your local filesystem.</p></li>
</ol>
<p>When you upload a collection, Ansible always uploads the tarball to the namespace specified in the collection metadata in the <code class="docutils literal notranslate"><span class="pre">galaxy.yml</span></code> file, no matter which namespace you select on the website. If you are not an owner of the namespace specified in your collection metadata, the upload request fails.</p>
<p>After Galaxy uploads and accepts a collection, the website shows you the <strong>My Imports</strong> page. This page shows import process information. You can review any errors or warnings about your upload there.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="../user_guide/collections_using.html#collections"><span class="std std-ref">Using collections</span></a></dt><dd><p>Learn how to install and use collections.</p>
</dd>
<dt><a class="reference internal" href="collections_galaxy_meta.html#collections-galaxy-meta"><span class="std std-ref">Collection Galaxy metadata structure</span></a></dt><dd><p>Table of fields used in the <code class="file docutils literal notranslate"><span class="pre">galaxy.yml</span></code> file</p>
</dd>
<dt><a class="reference external" href="https://groups.google.com/group/ansible-devel">Mailing List</a></dt><dd><p>The development mailing list</p>
</dd>
<dt><a class="reference internal" href="../community/communication.html#communication-irc"><span class="std std-ref">Real-time chat</span></a></dt><dd><p>How to join Ansible chat channels</p>
</dd>
</dl>
</div>
</section>
</section>
</section>


           </div>
          </div>
          

<footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="developing_collections_testing.html" class="btn btn-neutral float-left" title="Testing collections" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="developing_collections_migrating.html" class="btn btn-neutral float-right" title="Migrating Ansible content to a different collection" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ansible project contributors.
      <span class="lastupdated">Last updated on Jun 27, 2022.
      </span></p>
  </div>

  
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script><!-- extra footer elements for Ansible beyond RTD Sphinx Theme -->
<!-- begin analytics -->
<script>
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = 'https://js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script>
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script>

</body>
</html>