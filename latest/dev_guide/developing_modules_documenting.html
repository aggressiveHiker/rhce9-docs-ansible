<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Module format and documentation &mdash; Ansible Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/ansible.css" type="text/css" />
      <link rel="stylesheet" href="../_static/antsibull-minimal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/rtd-ethical-ads.css" type="text/css" />
    <link rel="shortcut icon" href="_static/images/Ansible-Mark-RGB_Black.svg"/>
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/dev_guide/developing_modules_documenting.html"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Windows module development walkthrough" href="developing_modules_general_windows.html" />
    <link rel="prev" title="Debugging modules" href="debugging.html" /><!-- extra head elements for Ansible beyond RTD Sphinx Theme -->
<script src="https://www.redhat.com/dtm.js"></script>


<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="6">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->



<script>
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','https://s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

</head>

<body class="wy-body-for-nav"><!-- extra body elements for Ansible beyond RTD Sphinx Theme -->
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
    <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
    <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
    <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/Ansible-Mark-RGB_White.svg"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Documentation</div>
</a>
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Ansible
          </a>
              <div class="version">
                6
              </div><!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <script>
        function switchVersionTo(slug) {
          var current_url_path = window.location.pathname;
          var url_version = current_url_path.search("/6/") > -1
            ? "/6/"
            : "/latest/";
          var new_version_url = current_url_path.replace(url_version, "/" + slug + "/");
          window.location.replace(new_version_url);
        }
      </script>
      <select
          class="version-list"
          id="version-list"
          onchange="switchVersionTo(this.value);"
      >
        
        <option
            value="latest"
            
        >
            latest
        </option>
        
        <option
            value="2.9"
            
        >
            2.9
        </option>
        
        <option
            value="devel"
            
        >
            devel
        </option>
        
      </select>
    </div>
  
</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" method="get">
    <input type="text" class="st-default-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <p class="caption" role="heading"><span class="caption-text">Ansible getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting started with Ansible</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Ansible Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/contributions_collections.html">Ansible Collections Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/contributions.html">ansible-core Contributors Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/advanced_index.html">Advanced Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="style_guide/index.html">Ansible documentation style guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending Ansible</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="developing_locally.html">Adding modules and plugins locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules.html">Should you develop a module?</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general.html">Developing modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_checklist.html">Contributing your module to an existing Ansible collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_best_practices.html">Conventions, tips, and pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_python_3.html">Ansible and Python 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging modules</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Module format and documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-shebang-utf-8-coding">Python shebang &amp; UTF-8 coding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copyright-and-license">Copyright and license</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ansible-metadata-block">ANSIBLE_METADATA block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-block">DOCUMENTATION block</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#documentation-fields">Documentation fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linking-and-other-format-macros-within-module-documentation">Linking and other format macros within module documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documentation-fragments">Documentation fragments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examples-block">EXAMPLES block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#return-block">RETURN block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-imports">Python imports</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-module-documentation">Testing module documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general_windows.html">Windows module development walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general_aci.html">Developing Cisco ACI modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/aws_guidelines.html">Guidelines for Ansible Amazon AWS module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/openstack_guidelines.html">OpenStack Ansible Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/ovirt_dev_guide.html">oVirt Ansible Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/vmware_guidelines.html">Guidelines for VMware module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/vmware_rest_guidelines.html">Guidelines for VMware REST module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_in_groups.html">Creating a new collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_lifecycle.html">The lifecycle of an Ansible module or plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_plugins.html">Developing plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_inventory.html">Developing dynamic inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_core.html">Developing <code class="docutils literal notranslate"><span class="pre">ansible-core</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_program_flow_modules.html">Ansible module architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_api.html">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_rebasing.html">Rebasing a pull request</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_module_utilities.html">Using and developing module utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_collections.html">Developing collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating_roles.html">Migrating Roles to Roles in Collections on Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="collections_galaxy_meta.html">Collection Galaxy metadata structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview_architecture.html">Ansible architecture</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/cloud_guides.html">Legacy Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/getting_started/index.html">Network Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/user_guide/index.html">Network Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/dev_guide/index.html">Network Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../collections/index.html">Collection Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collections/all_plugins.html">Indexes of all modules and plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/release_and_maintenance.html">Releases and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/tower.html">Red Hat Ansible Automation Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/automationhub.html">Ansible Automation Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/ansible_roadmap_index.html">Ansible Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/ansible_core_roadmap_index.html">ansible-core Roadmaps</a></li>
</ul>
<!-- extra nav elements for Ansible beyond RTD Sphinx Theme -->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Developer Guide</a> &raquo;</li>
      <li>Module format and documentation</li>
  <li class="wy-breadcrumbs-aside">
          <!-- Ansible-specific additions for modules etc -->
            
              <a href="https://github.com/ansible/ansible/edit/devel/docs/docsite/rst/dev_guide/developing_modules_documenting.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
            
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  <script>
    function startsWith(str, needle) {
      return str.slice(0, needle.length) == needle
    }
    function startsWithOneOf(str, needles) {
      return needles.some(function (needle) {
        return startsWith(str, needle);
      });
    }
    var banner = '';
      var extra_banner = '';
    /*use extra_banner for when marketing wants something extra, like a survey or AnsibleFest notice
    var extra_banner =
      '<div id="latest_extra_banner_id" class="admonition important">' +
      '<br>' +
      '<p>' +
        'You\'re invited to AnsibleFest 2021! ' +
      '<p>' +
        'Explore ways to automate, innovate, and accelerate with our free virtual event September 29-30. ' +
      '<pr>' +
        '<a href="https://reg.ansiblefest.redhat.com/flow/redhat/ansible21/regGenAttendee/login?sc_cid=7013a000002pemAAAQ">Register now!</a> ' +
      '</p>' +
      '<br>' +
      '</div>'; */
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">' +
                     '<p>This is the testing site for Ansible Documentation. Unless you are reviewing pre-production changes, please visit the <a href="https://docs.ansible.com/ansible/latest/">official documentation website</a>.</p> <p></p>' +
                     '</div>');
    }
    
      // Create a banner
      current_url_path = window.location.pathname;

      var important = false;
      var msg = '<p>';
      if (startsWith(current_url_path, "/ansible-core/")) {
        msg += 'You are reading documentation for Ansible Core, which contains no plugins except for those in ansible.builtin. For documentation of the Ansible package, go to <a href="/ansible/latest">the latest documentation</a>.';
      } else if (startsWithOneOf(current_url_path, ["/ansible/latest/", "/ansible/6/"])) {
        /* temp extra banner to advertise AnsibeFest2021 */
        banner += extra_banner;

        msg += 'You are reading the <b>latest</b> (stable) community version of the Ansible documentation. Red Hat subscribers, select <b>2.9</b> in the version selection to the left for the most recent Red Hat release.';
      } else if (startsWith(current_url_path, "/ansible/2.9/")) {
        msg += 'You are reading the latest Red Hat released version of the Ansible documentation. Community users can use this version, or select <b>latest</b> from the version selector to the left for the most recent community version.';
      } else if (startsWith(current_url_path, "/ansible/devel/")) {
        /* temp extra banner to advertise AnsibleFest2021 */
        banner += extra_banner;

        /* temp banner to advertise survey
        important = true;
        msg += 'Please take our <a href="https://www.surveymonkey.co.uk/r/B9V3CDY">Docs survey</a> before December 31 to help us improve Ansible documentation.';
        */

        msg += 'You are reading the <b>devel</b> version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the <b>latest</b> (stable) released version.';
      } else {
        msg += 'You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the <b>latest</b> (stable) released version.';
      }
      msg += '</p>';

      banner += '<div id="banner_id" class="admonition ';
      banner += important ? 'important' : 'caution';
      banner += '">';
      banner += important ? '<br>' : '';
      banner += msg;
      banner += important ? '<br>' : '';
      banner += '</div>';
      document.write(banner);
    
  </script>


  
           <div itemprop="articleBody">
             
  <section id="module-format-and-documentation">
<span id="module-documenting"></span><span id="developing-modules-documenting"></span><h1>Module format and documentation<a class="headerlink" href="#module-format-and-documentation" title="Permalink to this headline"></a></h1>
<p>If you want to contribute your module to most Ansible collections, you must write your module in Python and follow the standard format described below. (Unless you’re writing a Windows module, in which case the <a class="reference internal" href="developing_modules_general_windows.html#developing-modules-general-windows"><span class="std std-ref">Windows guidelines</span></a> apply.) In addition to following this format, you should review our <a class="reference internal" href="developing_modules_checklist.html#developing-modules-checklist"><span class="std std-ref">submission checklist</span></a>, <a class="reference internal" href="developing_modules_best_practices.html#developing-modules-best-practices"><span class="std std-ref">programming tips</span></a>, and <a class="reference internal" href="developing_python_3.html#developing-python-3"><span class="std std-ref">strategy for maintaining Python 2 and Python 3 compatibility</span></a>, as well as information about <a class="reference internal" href="testing.html#developing-testing"><span class="std std-ref">testing</span></a> before you open a pull request.</p>
<p>Every Ansible module written in Python must begin with seven standard sections in a particular order, followed by the code. The sections in order are:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#python-shebang-utf-8-coding" id="id6">Python shebang &amp; UTF-8 coding</a></p></li>
<li><p><a class="reference internal" href="#copyright-and-license" id="id7">Copyright and license</a></p></li>
<li><p><a class="reference internal" href="#ansible-metadata-block" id="id8">ANSIBLE_METADATA block</a></p></li>
<li><p><a class="reference internal" href="#documentation-block" id="id9">DOCUMENTATION block</a></p></li>
<li><p><a class="reference internal" href="#examples-block" id="id10">EXAMPLES block</a></p></li>
<li><p><a class="reference internal" href="#return-block" id="id11">RETURN block</a></p></li>
<li><p><a class="reference internal" href="#python-imports" id="id12">Python imports</a></p></li>
<li><p><a class="reference internal" href="#testing-module-documentation" id="id13">Testing module documentation</a></p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Why don’t the imports go first?</p>
<p>Keen Python programmers may notice that contrary to PEP 8’s advice we don’t put <code class="docutils literal notranslate"><span class="pre">imports</span></code> at the top of the file. This is because the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> through <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> sections are not used by the module code itself; they are essentially extra docstrings for the file. The imports are placed after these special variables for the same reason as PEP 8 puts the imports after the introductory comments and docstrings. This keeps the active parts of the code together and the pieces which are purely informational apart. The decision to exclude E402 is based on readability (which is what PEP 8 is about). Documentation strings in a module are much more similar to module level docstrings, than code, and are never utilized by the module itself. Placing the imports below this documentation and closer to the code, consolidates and groups all related code in a congruent manner to improve readability, debugging and understanding.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Copy old modules with care!</strong></p>
<p>Some older Ansible modules have <code class="docutils literal notranslate"><span class="pre">imports</span></code> at the bottom of the file, <code class="docutils literal notranslate"><span class="pre">Copyright</span></code> notices with the full GPL prefix, and/or <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> fields in the wrong order. These are legacy files that need updating - do not copy them into new modules. Over time we are updating and correcting older modules. Please follow the guidelines on this page!</p>
</div>
<section id="python-shebang-utf-8-coding">
<span id="shebang"></span><h2><a class="toc-backref" href="#id6">Python shebang &amp; UTF-8 coding</a><a class="headerlink" href="#python-shebang-utf-8-coding" title="Permalink to this headline"></a></h2>
<p>Begin your Ansible module with <code class="docutils literal notranslate"><span class="pre">#!/usr/bin/python</span></code> - this “shebang” allows <code class="docutils literal notranslate"><span class="pre">ansible_python_interpreter</span></code> to work. Follow the shebang immediately with <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">-*-</span> <span class="pre">coding:</span> <span class="pre">utf-8</span> <span class="pre">-*-</span></code> to clarify that the file is UTF-8 encoded.</p>
</section>
<section id="copyright-and-license">
<span id="copyright"></span><h2><a class="toc-backref" href="#id7">Copyright and license</a><a class="headerlink" href="#copyright-and-license" title="Permalink to this headline"></a></h2>
<p>After the shebang and UTF-8 coding, add a <a class="reference external" href="https://www.gnu.org/licenses/gpl-howto.en.html">copyright line</a> with the original copyright holder and a license declaration. The license declaration should be ONLY one line, not the full GPL prefix.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># Copyright: (c) 2018, Terry Jones &lt;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e89c8d9a9a91c68287868d9ba88d90898598848dc6879a8f">[email&#160;protected]</a>&gt;</span>
<span class="c1"># GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)</span>
</pre></div>
</div>
<p>Major additions to the module (for instance, rewrites) may add additional copyright lines. Any legal review will include the source control history, so an exhaustive copyright header is not necessary.
Please do not edit the existing copyright year. This simplifies project administration and is unlikely to cause any interesting legal issues.
When adding a second copyright line for a significant feature or rewrite, add the newer line above the older one:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># Copyright: (c) 2017, [New Contributor(s)]</span>
<span class="c1"># Copyright: (c) 2015, [Original Contributor(s)]</span>
<span class="c1"># GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)</span>
</pre></div>
</div>
</section>
<section id="ansible-metadata-block">
<span id="id1"></span><h2><a class="toc-backref" href="#id8">ANSIBLE_METADATA block</a><a class="headerlink" href="#ansible-metadata-block" title="Permalink to this headline"></a></h2>
<p>Since we moved to collections we have deprecated the METADATA functionality, it is no longer required for modules, but it will not break anything if present.</p>
</section>
<section id="documentation-block">
<span id="id2"></span><h2><a class="toc-backref" href="#id9">DOCUMENTATION block</a><a class="headerlink" href="#documentation-block" title="Permalink to this headline"></a></h2>
<p>After the shebang, the UTF-8 coding, the copyright line, and the license section comes the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block. Ansible’s online module documentation is generated from the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> blocks in each module’s source code. The <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block must be valid YAML. You may find it easier to start writing your <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> string in an <a class="reference internal" href="../community/other_tools_and_programs.html#other-tools-and-programs"><span class="std std-ref">editor with YAML syntax highlighting</span></a> before you include it in your Python file. You can start by copying our <a class="reference external" href="https://github.com/ansible/ansible/blob/devel/examples/DOCUMENTATION.yml">example documentation string</a> into your module file and modifying it. If you run into syntax issues in your YAML, you can validate it on the <a class="reference external" href="http://www.yamllint.com/">YAML Lint</a> website.</p>
<dl class="simple">
<dt>Module documentation should briefly and accurately define what each module and option does, and how it works with others in the underlying system. Documentation should be written for broad audience–readable both by experts and non-experts.</dt><dd><ul class="simple">
<li><p>Descriptions should always start with a capital letter and end with a full stop. Consistency always helps.</p></li>
<li><p>Verify that arguments in doc and module spec dict are identical.</p></li>
<li><p>For password / secret arguments <code class="docutils literal notranslate"><span class="pre">no_log=True</span></code> should be set.</p></li>
<li><p>For arguments that seem to contain sensitive information but <strong>do not</strong> contain secrets, such as “password_length”, set <code class="docutils literal notranslate"><span class="pre">no_log=False</span></code> to disable the warning message.</p></li>
<li><p>If an option is only sometimes required, describe the conditions. For example, “Required when I(state=present).”</p></li>
<li><p>If your module allows <code class="docutils literal notranslate"><span class="pre">check_mode</span></code>, reflect this fact in the documentation.</p></li>
</ul>
</dd>
</dl>
<p>To create clear, concise, consistent, and useful documentation, follow the <a class="reference internal" href="style_guide/index.html#style-guide"><span class="std std-ref">style guide</span></a>.</p>
<p>Each documentation field is described below. Before committing your module documentation, please test it at the command line and as HTML:</p>
<ul class="simple">
<li><p>As long as your module file is <a class="reference internal" href="developing_locally.html#local-modules"><span class="std std-ref">available locally</span></a>, you can use <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-t</span> <span class="pre">module</span> <span class="pre">my_module_name</span></code> to view your module documentation at the command line. Any parsing errors will be obvious - you can view details by adding <code class="docutils literal notranslate"><span class="pre">-vvv</span></code> to the command.</p></li>
<li><p>You should also <a class="reference internal" href="testing_documentation.html#testing-module-documentation"><span class="std std-ref">test the HTML output</span></a> of your module documentation.</p></li>
</ul>
<section id="documentation-fields">
<h3>Documentation fields<a class="headerlink" href="#documentation-fields" title="Permalink to this headline"></a></h3>
<p>All fields in the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block are lower-case. All fields are required unless specified otherwise:</p>
<dl class="field-list">
<dt class="field-odd">module</dt>
<dd class="field-odd"><ul class="simple">
<li><p>The name of the module.</p></li>
<li><p>Must be the same as the filename, without the <code class="docutils literal notranslate"><span class="pre">.py</span></code> extension.</p></li>
</ul>
</dd>
<dt class="field-even">short_description</dt>
<dd class="field-even"><ul class="simple">
<li><p>A short description which is displayed on the <a class="reference internal" href="../collections/index.html#list-of-collections"><span class="std std-ref">Collection Index</span></a> page and <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-l</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">short_description</span></code> is displayed by <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-l</span></code> without any category grouping,
so it needs enough detail to explain the module’s purpose without the context of the directory structure in which it lives.</p></li>
<li><p>Unlike <code class="docutils literal notranslate"><span class="pre">description:</span></code>, <code class="docutils literal notranslate"><span class="pre">short_description</span></code> should not have a trailing period/full stop.</p></li>
</ul>
</dd>
<dt class="field-odd">description</dt>
<dd class="field-odd"><ul class="simple">
<li><p>A detailed description (generally two or more sentences).</p></li>
<li><p>Must be written in full sentences, in other words, with capital letters and periods/full stops.</p></li>
<li><p>Shouldn’t mention the module name.</p></li>
<li><p>Make use of multiple entries rather than using one long paragraph.</p></li>
<li><p>Don’t quote complete values unless it is required by YAML.</p></li>
</ul>
</dd>
<dt class="field-even">version_added</dt>
<dd class="field-even"><ul class="simple">
<li><p>The version of Ansible when the module was added.</p></li>
<li><p>This is a string, and not a float, for example, <code class="docutils literal notranslate"><span class="pre">version_added:</span> <span class="pre">'2.1'</span></code>.</p></li>
<li><p>In collections, this must be the collection version the module was added to, not the Ansible version. For example, <code class="docutils literal notranslate"><span class="pre">version_added:</span> <span class="pre">1.0.0</span></code>.</p></li>
</ul>
</dd>
<dt class="field-odd">author</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Name of the module author in the form <code class="docutils literal notranslate"><span class="pre">First</span> <span class="pre">Last</span> <span class="pre">(&#64;GitHubID)</span></code>.</p></li>
<li><p>Use a multi-line list if there is more than one author.</p></li>
<li><p>Don’t use quotes as it should not be required by YAML.</p></li>
</ul>
</dd>
<dt class="field-even">deprecated</dt>
<dd class="field-even"><ul class="simple">
<li><p>Marks modules that will be removed in future releases. See also <a class="reference internal" href="module_lifecycle.html#module-lifecycle"><span class="std std-ref">The lifecycle of an Ansible module or plugin</span></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">options</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Options are often called <cite>parameters</cite> or <cite>arguments</cite>. Because the documentation field is called <cite>options</cite>, we will use that term.</p></li>
<li><p>If the module has no options (for example, it’s a <code class="docutils literal notranslate"><span class="pre">_facts</span></code> module), all you need is one line: <code class="docutils literal notranslate"><span class="pre">options:</span> <span class="pre">{}</span></code>.</p></li>
<li><p>If your module has options (in other words, accepts arguments), each option should be documented thoroughly. For each module option, include:</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">option-name</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Declarative operation (not CRUD), to focus on the final state, for example <cite>online:</cite>, rather than <cite>is_online:</cite>.</p></li>
<li><p>The name of the option should be consistent with the rest of the module, as well as other modules in the same category.</p></li>
<li><p>When in doubt, look for other modules to find option names that are used for the same purpose, we like to offer consistency to our users.</p></li>
</ul>
</dd>
<dt class="field-even">description</dt>
<dd class="field-even"><ul class="simple">
<li><p>Detailed explanation of what this option does. It should be written in full sentences.</p></li>
<li><p>The first entry is a description of the option itself; subsequent entries detail its use, dependencies, or format of possible values.</p></li>
<li><p>Should not list the possible values (that’s what <code class="docutils literal notranslate"><span class="pre">choices:</span></code> is for, though it should explain what the values do if they aren’t obvious).</p></li>
<li><p>If an option is only sometimes required, describe the conditions. For example, “Required when I(state=present).”</p></li>
<li><p>Mutually exclusive options must be documented as the final sentence on each of the options.</p></li>
</ul>
</dd>
<dt class="field-odd">required</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Only needed if <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>If missing, we assume the option is not required.</p></li>
</ul>
</dd>
<dt class="field-even">default</dt>
<dd class="field-even"><ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">required</span></code> is false/missing, <code class="docutils literal notranslate"><span class="pre">default</span></code> may be specified (assumed ‘null’ if missing).</p></li>
<li><p>Ensure that the default value in the docs matches the default value in the code.</p></li>
<li><p>The default field must not be listed as part of the description, unless it requires additional information or conditions.</p></li>
<li><p>If the option is a boolean value, you can use any of the boolean values recognized by Ansible:
(such as true/false or yes/no).  Choose the one that reads better in the context of the option.</p></li>
</ul>
</dd>
<dt class="field-odd">choices</dt>
<dd class="field-odd"><ul class="simple">
<li><p>List of option values.</p></li>
<li><p>Should be absent if empty.</p></li>
</ul>
</dd>
<dt class="field-even">type</dt>
<dd class="field-even"><ul class="simple">
<li><p>Specifies the data type that option accepts, must match the <code class="docutils literal notranslate"><span class="pre">argspec</span></code>.</p></li>
<li><p>If an argument is <code class="docutils literal notranslate"><span class="pre">type='bool'</span></code>, this field should be set to <code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">bool</span></code> and no <code class="docutils literal notranslate"><span class="pre">choices</span></code> should be specified.</p></li>
<li><p>If an argument is <code class="docutils literal notranslate"><span class="pre">type='list'</span></code>, <code class="docutils literal notranslate"><span class="pre">elements</span></code> should be specified.</p></li>
</ul>
</dd>
<dt class="field-odd">elements</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Specifies the data type for list elements in case <code class="docutils literal notranslate"><span class="pre">type='list'</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">aliases</dt>
<dd class="field-even"><ul class="simple">
<li><p>List of optional name aliases.</p></li>
<li><p>Generally not needed.</p></li>
</ul>
</dd>
<dt class="field-odd">version_added</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Only needed if this option was extended after initial Ansible release, in other words, this is greater than the top level <cite>version_added</cite> field.</p></li>
<li><p>This is a string, and not a float, for example, <code class="docutils literal notranslate"><span class="pre">version_added:</span> <span class="pre">'2.3'</span></code>.</p></li>
<li><p>In collections, this must be the collection version the option was added to, not the Ansible version. For example, <code class="docutils literal notranslate"><span class="pre">version_added:</span> <span class="pre">1.0.0</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">suboptions</dt>
<dd class="field-even"><ul class="simple">
<li><p>If this option takes a dict or list of dicts, you can define the structure here.</p></li>
<li><p>See <a class="reference external" href="https://docs.ansible.com/ansible/6/collections/azure/azcollection/azure_rm_securitygroup_module.html#ansible-collections-azure-azcollection-azure-rm-securitygroup-module" title="(in Ansible v6)"><span class="xref std std-ref">ansible_collections.azure.azcollection.azure_rm_securitygroup_module</span></a>, <a class="reference external" href="https://docs.ansible.com/ansible/6/collections/azure/azcollection/azure_rm_azurefirewall_module.html#ansible-collections-azure-azcollection-azure-rm-azurefirewall-module" title="(in Ansible v6)"><span class="xref std std-ref">ansible_collections.azure.azcollection.azure_rm_azurefirewall_module</span></a>, and <a class="reference external" href="https://docs.ansible.com/ansible/6/collections/openstack/cloud/baremetal_node_action_module.html#ansible-collections-openstack-cloud-baremetal-node-action-module" title="(in Ansible v6)"><span class="xref std std-ref">ansible_collections.openstack.cloud.baremetal_node_action_module</span></a> for examples.</p></li>
</ul>
</dd>
</dl>
</dd>
<dt class="field-odd">requirements</dt>
<dd class="field-odd"><ul class="simple">
<li><p>List of requirements (if applicable).</p></li>
<li><p>Include minimum versions.</p></li>
</ul>
</dd>
<dt class="field-even">seealso</dt>
<dd class="field-even"><ul>
<li><p>A list of references to other modules, documentation or Internet resources</p></li>
<li><p>In Ansible 2.10 and later, references to modules must use  the FQCN or <code class="docutils literal notranslate"><span class="pre">ansible.builtin</span></code> for modules in <code class="docutils literal notranslate"><span class="pre">ansible-core</span></code>.</p></li>
<li><p>A reference can be one of the following formats:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="nt">seealso</span><span class="p">:</span>

<span class="c1"># Reference by module name</span>
<span class="p p-Indicator">-</span> <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cisco.aci.aci_tenant</span>

<span class="c1"># Reference by module name, including description</span>
<span class="p p-Indicator">-</span> <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cisco.aci.aci_tenant</span>
  <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ACI module to create tenants on a Cisco ACI fabric.</span>

<span class="c1"># Reference by rST documentation anchor</span>
<span class="p p-Indicator">-</span> <span class="nt">ref</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">aci_guide</span>
  <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Detailed information on how to manage your ACI infrastructure using Ansible.</span>

<span class="c1"># Reference by rST documentation anchor (with custom title)</span>
<span class="p p-Indicator">-</span> <span class="nt">ref</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">The official Ansible ACI guide &lt;aci_guide&gt;</span>
  <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Detailed information on how to manage your ACI infrastructure using Ansible.</span>

<span class="c1"># Reference by Internet resource</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">APIC Management Information Model reference</span>
  <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Complete reference of the APIC object model.</span>
  <span class="nt">link</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://developer.cisco.com/docs/apic-mim-ref/</span>
</pre></div>
</div>
</li>
<li><p>If you use <code class="docutils literal notranslate"><span class="pre">ref:</span></code> to link to an anchor that is not associated with a title, you must add a title to the ref for the link to work correctly.</p></li>
<li><p>You can link to non-module plugins with <code class="docutils literal notranslate"><span class="pre">ref:</span></code> using the rST anchor, but plugin and module anchors are never associated with a title, so you must supply a title when you link to them. For example <code class="docutils literal notranslate"><span class="pre">ref:</span> <span class="pre">namespace.collection.plugin_name</span> <span class="pre">lookup</span> <span class="pre">plugin</span>&#160; <span class="pre">&lt;ansible_collections.namespace.collection.plugin_name_lookup&gt;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-odd">notes</dt>
<dd class="field-odd"><ul class="simple">
<li><p>Details of any important information that doesn’t fit in one of the above sections.</p></li>
<li><p>For example, whether <code class="docutils literal notranslate"><span class="pre">check_mode</span></code> is or is not supported.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="linking-and-other-format-macros-within-module-documentation">
<span id="module-documents-linking"></span><h3>Linking and other format macros within module documentation<a class="headerlink" href="#linking-and-other-format-macros-within-module-documentation" title="Permalink to this headline"></a></h3>
<p>You can link from your module documentation to other module docs, other resources on docs.ansible.com, and resources elsewhere on the internet with the help of some pre-defined macros. The correct formats for these macros are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">L()</span></code> for links with a heading. For example: <code class="docutils literal notranslate"><span class="pre">See</span> <span class="pre">L(Ansible</span> <span class="pre">Automation</span> <span class="pre">Platform,https://www.ansible.com/products/automation-platform).</span></code> As of Ansible 2.10, do not use <code class="docutils literal notranslate"><span class="pre">L()</span></code> for relative links between Ansible documentation and collection documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">U()</span></code> for URLs. For example: <code class="docutils literal notranslate"><span class="pre">See</span> <span class="pre">U(https://www.ansible.com/products/automation-platform)</span> <span class="pre">for</span> <span class="pre">an</span> <span class="pre">overview.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R()</span></code> for cross-references with a heading (added in Ansible 2.10). For example: <code class="docutils literal notranslate"><span class="pre">See</span> <span class="pre">R(Cisco</span> <span class="pre">IOS</span> <span class="pre">Platform</span> <span class="pre">Guide,ios_platform_options)</span></code>.  Use the RST anchor for the cross-reference. See <a class="reference internal" href="style_guide/index.html#adding-anchors-rst"><span class="std std-ref">Adding anchors</span></a> for details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M()</span></code> for module names. For example: <code class="docutils literal notranslate"><span class="pre">See</span> <span class="pre">also</span> <span class="pre">M(ansible.builtin.yum)</span> <span class="pre">or</span> <span class="pre">M(community.general.apt_rpm)</span></code>.</p></li>
</ul>
<p>There are also some macros which do not create links but we use them to display certain types of
content in a uniform way:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">I()</span></code> for option names. For example: <code class="docutils literal notranslate"><span class="pre">Required</span> <span class="pre">if</span> <span class="pre">I(state=present).</span></code>  This is italicized in
the documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C()</span></code> for files, option values, and inline code. For example: <code class="docutils literal notranslate"><span class="pre">If</span> <span class="pre">not</span> <span class="pre">set</span> <span class="pre">the</span> <span class="pre">environment</span> <span class="pre">variable</span> <span class="pre">C(ACME_PASSWORD)</span> <span class="pre">will</span> <span class="pre">be</span> <span class="pre">used.</span></code> or <code class="docutils literal notranslate"><span class="pre">Use</span> <span class="pre">C(var</span> <span class="pre">|</span> <span class="pre">foo.bar.my_filter)</span> <span class="pre">to</span> <span class="pre">transform</span> <span class="pre">C(var)</span> <span class="pre">into</span> <span class="pre">the</span> <span class="pre">required</span> <span class="pre">format.</span></code>  This displays with a mono-space font in the documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">B()</span></code> currently has no standardized usage. It is displayed in boldface in the documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HORIZONTALLINE</span></code> is used sparingly as a separator in long descriptions. It becomes a horizontal rule (the <code class="docutils literal notranslate"><span class="pre">&lt;hr&gt;</span></code> html tag) in the documentation.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For links between modules and documentation within a collection, you can use any of the options above. For links outside of your collection, use <code class="docutils literal notranslate"><span class="pre">R()</span></code> if available. Otherwise, use <code class="docutils literal notranslate"><span class="pre">U()</span></code> or <code class="docutils literal notranslate"><span class="pre">L()</span></code> with full URLs (not relative links). For modules, use <code class="docutils literal notranslate"><span class="pre">M()</span></code> with the FQCN or <code class="docutils literal notranslate"><span class="pre">ansible.builtin</span></code> as shown in the example. If you are creating your own documentation site, you will need to use the <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html">intersphinx extension</a> to convert <code class="docutils literal notranslate"><span class="pre">R()</span></code> and <code class="docutils literal notranslate"><span class="pre">M()</span></code> to the correct links.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To refer to a group of modules in a collection, use <code class="docutils literal notranslate"><span class="pre">R()</span></code>.  When a collection is not the right granularity, use <code class="docutils literal notranslate"><span class="pre">C(..)</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Refer</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">R(kubernetes.core</span> <span class="pre">collection,</span> <span class="pre">plugins_in_kubernetes.core)</span> <span class="pre">for</span> <span class="pre">information</span> <span class="pre">on</span> <span class="pre">managing</span> <span class="pre">kubernetes</span> <span class="pre">clusters.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">C(win_*)</span> <span class="pre">modules</span> <span class="pre">(spread</span> <span class="pre">across</span> <span class="pre">several</span> <span class="pre">collections)</span> <span class="pre">allow</span> <span class="pre">you</span> <span class="pre">to</span> <span class="pre">manage</span> <span class="pre">various</span> <span class="pre">aspects</span> <span class="pre">of</span> <span class="pre">windows</span> <span class="pre">hosts.</span></code></p></li>
</ul>
</div></blockquote>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because it stands out better, use <code class="docutils literal notranslate"><span class="pre">seealso</span></code> for general references over the use of notes or adding links to the description.</p>
</div>
</section>
<section id="documentation-fragments">
<span id="module-docs-fragments"></span><h3>Documentation fragments<a class="headerlink" href="#documentation-fragments" title="Permalink to this headline"></a></h3>
<p>If you are writing multiple related modules, they may share common documentation, such as authentication details, file mode settings, <code class="docutils literal notranslate"><span class="pre">notes:</span></code> or <code class="docutils literal notranslate"><span class="pre">seealso:</span></code> entries. Rather than duplicate that information in each module’s <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block, you can save it once as a doc_fragment plugin and use it in each module’s documentation. In Ansible, shared documentation fragments are contained in a <code class="docutils literal notranslate"><span class="pre">ModuleDocFragment</span></code> class in <a class="reference external" href="https://github.com/ansible/ansible/tree/devel/lib/ansible/plugins/doc_fragments">lib/ansible/plugins/doc_fragments/</a> or the equivalent directory in a collection. To include a documentation fragment, add <code class="docutils literal notranslate"><span class="pre">extends_documentation_fragment:</span> <span class="pre">FRAGMENT_NAME</span></code> in your module documentation. Use the fully qualified collection name for the FRAGMENT_NAME (for example, <code class="docutils literal notranslate"><span class="pre">kubernetes.core.k8s_auth_options</span></code>).</p>
<p>Modules should only use items from a doc fragment if the module will implement all of the interface documented there in a manner that behaves the same as the existing modules which import that fragment. The goal is that items imported from the doc fragment will behave identically when used in another module that imports the doc fragment.</p>
<p>By default, only the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> property from a doc fragment is inserted into the module documentation. It is possible to define additional properties in the doc fragment in order to import only certain parts of a doc fragment or mix and match as appropriate. If a property is defined in both the doc fragment and the module, the module value overrides the doc fragment.</p>
<p>Here is an example doc fragment named <code class="docutils literal notranslate"><span class="pre">example_fragment.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ModuleDocFragment</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1"># Standard documentation</span>
    <span class="n">DOCUMENTATION</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    options:</span>
<span class="s1">      # options here</span>
<span class="s1">    &#39;&#39;&#39;</span>

    <span class="c1"># Additional section</span>
    <span class="n">OTHER</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    options:</span>
<span class="s1">      # other options here</span>
<span class="s1">    &#39;&#39;&#39;</span>
</pre></div>
</div>
<p>To insert the contents of <code class="docutils literal notranslate"><span class="pre">OTHER</span></code> in a module:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="nt">extends_documentation_fragment</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">example_fragment.other</span>
</pre></div>
</div>
<p>Or use both :</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="nt">extends_documentation_fragment</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">example_fragment</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">example_fragment.other</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.8.</span></p>
</div>
<p>Since Ansible 2.8, you can have user-supplied doc_fragments by using a <code class="docutils literal notranslate"><span class="pre">doc_fragments</span></code> directory adjacent to play or role, just like any other plugin.</p>
<p>For example, all AWS modules should include:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="nt">extends_documentation_fragment</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">aws</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ec2</span>
</pre></div>
</div>
<p><a class="reference internal" href="developing_collections_shared.html#docfragments-collections"><span class="std std-ref">Using documentation fragments in collections</span></a> describes how to incorporate documentation fragments in a collection.</p>
</section>
</section>
<section id="examples-block">
<span id="id3"></span><h2><a class="toc-backref" href="#id10">EXAMPLES block</a><a class="headerlink" href="#examples-block" title="Permalink to this headline"></a></h2>
<p>After the shebang, the UTF-8 coding, the copyright line, the license section, and the <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> block comes the <code class="docutils literal notranslate"><span class="pre">EXAMPLES</span></code> block. Here you show users how your module works with real-world examples in multi-line plain-text YAML format. The best examples are ready for the user to copy and paste into a playbook. Review and update your examples with every change to your module.</p>
<p>Per playbook best practices, each example should include a <code class="docutils literal notranslate"><span class="pre">name:</span></code> line:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>EXAMPLES = r&#39;&#39;&#39;
- name: Ensure foo is installed
  namespace.collection.modulename:
    name: foo
    state: present
&#39;&#39;&#39;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">name:</span></code> line should be capitalized and not include a trailing dot.</p>
<p>Use a fully qualified collection name (FQCN) as a part of the module’s name like in the example above. For modules in <code class="docutils literal notranslate"><span class="pre">ansible-core</span></code>, use the <code class="docutils literal notranslate"><span class="pre">ansible.builtin.</span></code> identifier, for example <code class="docutils literal notranslate"><span class="pre">ansible.builtin.debug</span></code>.</p>
<p>If your examples use boolean options, use yes/no values. Since the documentation generates boolean values as yes/no, having the examples use these values as well makes the module documentation more consistent.</p>
<p>If your module returns facts that are often needed, an example of how to use them can be helpful.</p>
</section>
<section id="return-block">
<span id="id4"></span><h2><a class="toc-backref" href="#id11">RETURN block</a><a class="headerlink" href="#return-block" title="Permalink to this headline"></a></h2>
<p>After the shebang, the UTF-8 coding, the copyright line, the license section, <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code> and <code class="docutils literal notranslate"><span class="pre">EXAMPLES</span></code> blocks comes the <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> block. This section documents the information the module returns for use by other modules.</p>
<p>If your module doesn’t return anything (apart from the standard returns), this section of your module should read: <code class="docutils literal notranslate"><span class="pre">RETURN</span> <span class="pre">=</span> <span class="pre">r'''</span> <span class="pre">#</span> <span class="pre">'''</span></code>
Otherwise, for each value returned, provide the following fields. All fields are required unless specified otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">return name</dt>
<dd class="field-odd"><p>Name of the returned field.</p>
<dl class="field-list simple">
<dt class="field-odd">description</dt>
<dd class="field-odd"><p>Detailed description of what this value represents. Capitalized and with trailing dot.</p>
</dd>
<dt class="field-even">returned</dt>
<dd class="field-even"><p>When this value is returned, such as <code class="docutils literal notranslate"><span class="pre">always</span></code>, <code class="docutils literal notranslate"><span class="pre">changed</span></code> or <code class="docutils literal notranslate"><span class="pre">success</span></code>. This is a string and can contain any human-readable content.</p>
</dd>
<dt class="field-odd">type</dt>
<dd class="field-odd"><p>Data type.</p>
</dd>
<dt class="field-even">elements</dt>
<dd class="field-even"><p>If <code class="docutils literal notranslate"><span class="pre">type='list'</span></code>, specifies the data type of the list’s elements.</p>
</dd>
<dt class="field-odd">sample</dt>
<dd class="field-odd"><p>One or more examples.</p>
</dd>
<dt class="field-even">version_added</dt>
<dd class="field-even"><p>Only needed if this return was extended after initial Ansible release, in other words, this is greater than the top level <cite>version_added</cite> field.
This is a string, and not a float, for example, <code class="docutils literal notranslate"><span class="pre">version_added:</span> <span class="pre">'2.3'</span></code>.</p>
</dd>
<dt class="field-odd">contains</dt>
<dd class="field-odd"><p>Optional. To describe nested return values, set <code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">dict</span></code>, or <code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">list</span></code>/<code class="docutils literal notranslate"><span class="pre">elements:</span> <span class="pre">dict</span></code>, or if you really have to, <code class="docutils literal notranslate"><span class="pre">type:</span> <span class="pre">complex</span></code>, and repeat the elements above for each sub-field.</p>
</dd>
</dl>
</dd>
</dl>
<p>Here are two example <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> sections, one with three simple fields and one with a complex nested field:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>RETURN = r&#39;&#39;&#39;
dest:
    description: Destination file/path.
    returned: success
    type: str
    sample: /path/to/file.txt
src:
    description: Source file used for the copy on the target machine.
    returned: changed
    type: str
    sample: /home/httpd/.ansible/tmp/ansible-tmp-1423796390.97-147729857856000/source
md5sum:
    description: MD5 checksum of the file after running copy.
    returned: when supported
    type: str
    sample: 2a5aeecc61dc98c4d780b14b330e3282
&#39;&#39;&#39;

RETURN = r&#39;&#39;&#39;
packages:
    description: Information about package requirements.
    returned: success
    type: dict
    contains:
        missing:
            description: Packages that are missing from the system.
            returned: success
            type: list
            elements: str
            sample:
                - libmysqlclient-dev
                - libxml2-dev
        badversion:
            description: Packages that are installed but at bad versions.
            returned: success
            type: list
            elements: dict
            sample:
                - package: libxml2-dev
                  version: 2.9.4+dfsg1-2
                  constraint: &quot;&gt;= 3.0&quot;
&#39;&#39;&#39;
</pre></div>
</div>
</section>
<section id="python-imports">
<span id="id5"></span><h2><a class="toc-backref" href="#id12">Python imports</a><a class="headerlink" href="#python-imports" title="Permalink to this headline"></a></h2>
<p>After the shebang, the UTF-8 coding, the copyright line, the license, and the sections for <code class="docutils literal notranslate"><span class="pre">DOCUMENTATION</span></code>, <code class="docutils literal notranslate"><span class="pre">EXAMPLES</span></code>, and <code class="docutils literal notranslate"><span class="pre">RETURN</span></code>, you can finally add the python imports. All modules must use Python imports in the form:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">module_utils.basic</span> <span class="kn">import</span> <span class="n">AnsibleModule</span>
</pre></div>
</div>
<p>The use of “wildcard” imports such as <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module_utils.basic</span> <span class="pre">import</span> <span class="pre">*</span></code> is no longer allowed.</p>
</section>
<section id="testing-module-documentation">
<span id="dev-testing-module-documentation"></span><h2><a class="toc-backref" href="#id13">Testing module documentation</a><a class="headerlink" href="#testing-module-documentation" title="Permalink to this headline"></a></h2>
<p>To test Ansible documentation locally please <a class="reference internal" href="testing_documentation.html#testing-module-documentation"><span class="std std-ref">follow instruction</span></a>.</p>
</section>
</section>


           </div>
          </div>
          

<footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="debugging.html" class="btn btn-neutral float-left" title="Debugging modules" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="developing_modules_general_windows.html" class="btn btn-neutral float-right" title="Windows module development walkthrough" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Ansible project contributors.
      <span class="lastupdated">Last updated on Jun 27, 2022.
      </span></p>
  </div>

  
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script><!-- extra footer elements for Ansible beyond RTD Sphinx Theme -->
<!-- begin analytics -->
<script>
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = 'https://js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script>
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script>

</body>
</html>